/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/dt/OverlayRegistry","sap/ui/dt/Util","sap/ui/fl/apply/api/FlexRuntimeInfoAPI","sap/ui/fl/write/api/ChangesWriteAPI","sap/ui/fl/write/api/PersistenceWriteAPI","sap/ui/fl/Utils"],function(e,r,t,o,a,n,i){"use strict";return function(l){async function s(e){const r=await fetch(`${sap.ui.require.toUrl(e)}.js`);if(!r.ok){throw new Error(`resource ${e} could not be loaded from ${e}. Check for 'file not found' or parse errors. Reason: ${r.statusText}`)}return r.text()}return{exports:{add(r,s,c){var d=l.getFlexSettings();if(!d.developerMode){throw t.createError("service.ControllerExtension#add","code extensions can only be created in developer mode","sap.ui.rta")}if(!r){throw t.createError("service.ControllerExtension#add","can't create controller extension without codeRef","sap.ui.rta")}if(!r.endsWith(".js")){throw t.createError("service.ControllerExtension#add","codeRef has to end with 'js'")}var p=e.getElementById(s);var u=i.getAppComponentForControl(p);var f=p.getControllerModuleName()?`module:${p.getControllerModuleName()}`:p.getController()?.getMetadata().getName();var g=o.getFlexReference({element:u});var v=g.replace(/\.Component/g,"").replace(/\./g,"/");v+="/changes/";v+=r.replace(/\.js/g,"");var m={codeRef:r,controllerName:f,changeType:"codeExt",layer:d.layer,namespace:d.namespace,reference:g,moduleName:v,generator:"rta.service.ControllerExtension"};if(c){m.viewId=s}var h=a.create({changeSpecificData:m,selector:u});n.add({change:h,selector:u});return h.convertToFileContent()},getTemplate(e){var o=r.getOverlay(e);if(!o){throw t.createError("service.ControllerExtension#getTemplate","no overlay found for the given view ID","sap.ui.rta")}var a=o.getDesignTimeMetadata().getControllerExtensionTemplate();return s(`${a}-dbg`).catch(function(){return s(a)})}}}}});
//# sourceMappingURL=ControllerExtension.js.map