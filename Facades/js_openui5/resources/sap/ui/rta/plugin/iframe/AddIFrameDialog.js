/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/core/Element","sap/ui/core/Fragment","sap/ui/core/Lib","sap/ui/core/library","sap/ui/fl/util/getContainerUserInfo","sap/ui/model/json/JSONModel","sap/ui/model/resource/ResourceModel","sap/ui/rta/plugin/iframe/AddIFrameDialogController","sap/ui/rta/Utils"],function(e,t,a,i,o,n,l,r,s,u,d){"use strict";var{ValueState:_}=n;var c=o.getResourceBundleFor("sap.ui.rta");function A(e,t,a,i,o){var n=t?c.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_PERCENT_SECTION"):c.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_PERCENT_HEADER");const l={btpUrl:"https://help.sap.com/docs/ui5-flexibility-for-key-users/ui5-flexibility-for-key-users/embedding-content",s4HanaCloudUrl:"https://help.sap.com/docs/SAP_S4HANA_CLOUD/4fc8d03390c342da8a60f8ee387bca1a/8db25610e91342919fcf63d4e5868ae9.html",s4HanaOnPremUrl:"https://help.sap.com/docs/ABAP_PLATFORM_NEW/a7b390faab1140c087b8926571e942b7/8db25610e91342919fcf63d4e5868ae9.html"};return new r({dialogTitle:e?c.getText("IFRAME_ADDIFRAME_DIALOG_UPDATE_TITLE"):c.getText("IFRAME_ADDIFRAME_DIALOG_TITLE"),documentationUrl:{value:d.getSystemSpecificDocumentationUrl(l)},asContainer:{value:t},title:{value:t?c.getText("IFRAME_ADDIFRAME_DIALOG_CONTAINER_TITLE_DEFAULT_VALUE_TEXT"):null,valueState:_.None,id:"sapUiRtaAddIFrameDialog_ContainerTitle_TitleInput"},frameWidth:{value:parseFloat(a)||100,valueState:_.None,id:"sapUiRtaAddIFrameDialog_WidthInput"},frameWidthUnit:{value:"%"},frameHeight:{value:parseFloat(i)||35,valueState:_.None,id:"sapUiRtaAddIFrameDialog_HeightInput"},frameHeightUnit:{value:"vh"},frameUrl:{value:"",valueState:_.None},previousFrameUrl:{value:""},frameUrlError:{value:undefined},previewUrl:{value:""},parameters:{value:[]},unitsOfWidthMeasure:[{unit:"%",descriptionText:n},{unit:"px",descriptionText:c.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_PX")},{unit:"rem",descriptionText:c.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_REM")}],unitsOfHeightMeasure:[{unit:"vh",descriptionText:c.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_VH")},{unit:"px",descriptionText:c.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_PX")},{unit:"rem",descriptionText:c.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_REM")}],advancedSettings:{value:{allowForms:true,allowScripts:true,allowSameOrigin:true,additionalSandboxParameters:[],...o}},settingsUpdate:{value:false},showParameters:{value:false}})}var g=t.extend("sap.ui.rta.plugin.iframe.AddIFrameDialog",{metadata:{library:"sap.ui.rta",events:{opened:{}}}});g.prototype.open=function(e,t){return new Promise(function(a){this._fnResolve=a;this._createDialog(e,t)}.bind(this))};g.prototype._createDialog=function(t,a){this._oJSONModel=A(!!t?.updateMode,!!t?.asContainer,t?.frameWidth,t?.frameHeight,t?.advancedSettings);this._oController=new u(this._oJSONModel,t);i.load({name:"sap.ui.rta.plugin.iframe.AddIFrameDialog",controller:this._oController}).then(function(e){this._oDialog=e;this._oDialog.addStyleClass(d.getRtaStyleClassName());this._oDialog.setModel(this._oJSONModel,"dialogInfo");this._oDialog.setModel(a.getModel());this._oDialog.setBindingContext(a.getBindingContext());const t=new s({bundleName:"sap.ui.rta.messagebundle"});this._oDialog.setModel(t,"i18n");this._openDialog()}.bind(this)).catch(function(t){e.error("Error loading fragment sap.ui.rta.plugin.iframe.AddIFrameDialog: ",t)})};g.prototype._openDialog=function(){this._oDialog.attachAfterOpen(function(){const e=a.getElementById("sapUiRtaAddIFrameDialog_PreviewFrame");const t=e.getModel("$user");this._oDialog.setModel(t,"$user");this.fireOpened()}.bind(this));this._oDialog.attachAfterClose(function(){this._oDialog.destroy();this._oDialog=null;this._fnResolve(this._oController.getSettings());this._oController=null}.bind(this));this._oDialog.open()};g.buildUrlBuilderParametersFor=async function(e){const t=await l();const a=Object.keys(t).map(function(e){return{label:e,key:`{$user>/${e}}`,value:t[e]}});const i=e.getBindingContext();let o;if(i){const e=i.getObject();o=Object.keys(e).filter(function(t){return typeof e[t]!=="object"}).map(async function(t){const a=i.getModel();const o={label:t,key:`{${t}}`,value:e[t]};if(a.isA("sap.ui.model.odata.v4.ODataModel")){const e=a.getMetaModel();const n=e.getMetaPath(i.getPath());const l=await e.requestObject(`${n}/${t}/$Type`);if(l){o.type=l}}return o})}else{o=[]}return a.concat(await Promise.all(o))};return g});
//# sourceMappingURL=AddIFrameDialog.js.map