/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/Input","sap/m/Label","sap/m/Select","sap/m/Switch","sap/ui/core/mvc/Controller","sap/ui/core/Element","sap/ui/core/Item","sap/ui/layout/form/FormElement","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/rta/plugin/annotations/AnnotationTypes","sap/ui/rta/Utils"],function(e,t,o,n,r,a,i,s,l,p,c,u){"use strict";const y=r.extend("sap.ui.rta.plugin.annotations.AnnotationChangeDialogController");y.prototype.initialize=function(){return new Promise(e=>{this._fnResolveAfterClose=e})};y.prototype.formatDocumentationUrl=function(){const e={btpUrl:"https://help.sap.com/docs/ui5-flexibility-for-key-users/ui5-flexibility-for-key-users/making-ui-changes",s4HanaCloudUrl:"https://help.sap.com/docs/SAP_S4HANA_CLOUD/4fc8d03390c342da8a60f8ee387bca1a/54270a390b194c3e97be2424592c3352.html",s4HanaOnPremUrl:"https://help.sap.com/docs/ABAP_PLATFORM_NEW/a7b390faab1140c087b8926571e942b7/54270a390b194c3e97be2424592c3352.html"};return u.getSystemSpecificDocumentationUrl(e)};y.prototype.filterProperties=function(e,t){const o=[];if(e&&e.length>0){const n=new l("label",t?p.EQ:p.Contains,e);o.push(n)}const n=a.getElementById("sapUiRtaChangeAnnotationDialog_propertyList");const r=n.getBinding("formElements");r.filter(o)};y.prototype.onFilterProperties=function(e){const t=e.getSource().getValue();this.filterProperties(t)};y.prototype.switchDisplayMode=function(e){const t=e.getParameter("state");const o=a.getElementById("sapUiRtaChangeAnnotationDialog_propertyList");const n=o.getModel();n.setProperty("/showChangedPropertiesOnly",t);if(t){const e=n.getProperty("/changedProperties");const t=n.getProperty("/properties").filter(t=>e.some(e=>e.annotationPath===t.annotationPath)||t.originalValue!==t.currentValue);n.setProperty("/propertiesToDisplay",t)}else{n.setProperty("/propertiesToDisplay",n.getProperty("/properties"))}};y.prototype.onSave=function(e){const t=e.getSource().getModel().getData();const o=t.properties.map(e=>{if(e.originalValue===e.currentValue){return null}const o={serviceUrl:t.serviceUrl,content:{annotationPath:e.annotationPath}};o.content[t.valueType===c.StringType?"text":"value"]=t.objectAsKey?JSON.parse(e.currentValue):e.currentValue;return o}).filter(Boolean);this._fnResolveAfterClose(o)};y.prototype.onCancel=function(){this._fnResolveAfterClose([])};function g(t){if(t===c.ValueListType){const e=new o({selectedKey:"{currentValue}"});const t=new i({key:"{key}",text:"{text}"});e.bindItems({path:"/possibleValues",template:t,templateShareable:false});return e}if(t===c.StringType){return new e({value:"{currentValue}",liveChange:e=>{const t=e.getParameter("newValue");const o=e.getSource().getBindingContext();e.getSource().getModel().setProperty("currentValue",t,o)}})}if(t===c.BooleanType){return new n({state:"{currentValue}"})}throw new Error(`Unsupported value type: ${t}`)}y.prototype.editorFactory=function(e,o){const n=o.getProperty("/valueType");const r=o.getProperty("/singleRename");return new s({id:e,label:new t({text:r?"{i18n>ANNOTATION_CHANGE_DIALOG_SINGLE_RENAME_LABEL}":"{= ${label} || ${propertyName}}",tooltip:"{tooltip}"}),fields:[g.call(this,n)]})};return y});
//# sourceMappingURL=AnnotationChangeDialogController.js.map