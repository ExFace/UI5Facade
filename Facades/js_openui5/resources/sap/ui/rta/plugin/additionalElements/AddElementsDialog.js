/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/ManagedObject","sap/ui/core/Element","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/resource/ResourceModel","sap/ui/model/Sorter","sap/ui/rta/Utils"],function(t,e,o,i,s,n,l,r,a){"use strict";const u=t.extend("sap.ui.rta.plugin.additionalElements.AddElementsDialog",{metadata:{library:"sap.ui.rta",properties:{businessContextVisible:{type:"boolean",defaultValue:false},title:{type:"string"}},events:{opened:{},triggerExtensibilityAction:{}}}});u.prototype.init=function(){this._oDialogModel=new i({elements:[],customFieldButtonText:"",customFieldButtonVisible:false,businessContextVisible:false,customFieldButtonTooltip:"",businessContextTexts:[{text:""}],extensibilityMenuButtonActive:false,extensibilityMenuButtonText:"",extensibilityMenuButtonTooltip:"",extensibilityOptions:[]});this._bDescendingSortOrder=false;this.oRTAResourceModel=new l({bundleName:"sap.ui.rta.messagebundle"})};u.prototype.exit=function(...e){if(this._oDialog){this._oDialog.destroy()}if(t.prototype.exit){t.prototype.exit.apply(this,e)}};u.prototype._createDialog=function(){o.load({id:this.getId(),name:"sap.ui.rta.plugin.additionalElements.AddElementsDialog",controller:this}).then(function(t){this._oDialog=t;this._oDialog.addStyleClass(a.getRtaStyleClassName());this._oDialog.setModel(this._oDialogModel);this._oDialog.setModel(this.oRTAResourceModel,"i18n");this._oDialogModel.setProperty("/listNoDataText",this.oRTAResourceModel.getProperty("MSG_NO_FIELDS").toLowerCase());this._oList=e.getElementById(`${this.getId()}--rta_addElementsDialogList`);this._openDialog()}.bind(this))};u.prototype._openDialog=function(){this._oDialog.attachAfterOpen(function(){this.fireOpened()}.bind(this));this._oDialog.attachAfterClose(function(){this._oDialog.destroy();this._oDialog=null}.bind(this));this._oDialog.open()};u.prototype.setCustomFieldButtonVisible=function(t){this._oDialogModel.setProperty("/customFieldButtonVisible",t)};u.prototype.getCustomFieldButtonVisible=function(){return this._oDialogModel.getProperty("/customFieldButtonVisible")};u.prototype._submitDialog=function(){this._oDialog.close();this._fnResolveOnDialogConfirm()};u.prototype._cancelDialog=function(){this._oDialogModel.getObject("/elements").forEach(function(t){t.selected=false});this._oDialog.close();this._fnRejectOnDialogCancel()};u.prototype.setElements=function(t){this._oDialogModel.setProperty("/elements",t)};u.prototype.getElements=function(){return this._oDialogModel.getProperty("/elements")};u.prototype.getSelectedElements=function(){return this._oDialogModel.getObject("/elements").filter(function(t){return t.selected})};u.prototype.open=function(){return new Promise(function(t,e){this._fnResolveOnDialogConfirm=t;this._fnRejectOnDialogCancel=e;this._createDialog()}.bind(this))};u.prototype._resortList=function(){this._bDescendingSortOrder=!this._bDescendingSortOrder;const t=this._oList.getBinding("items");const e=[];e.push(new r("label",this._bDescendingSortOrder));t.sort(e)};u.prototype._updateModelFilter=function(t){const e=t.getParameter("newValue");const o=this._oList.getBinding("items");if(typeof e==="string"){const t=new s("label",n.Contains,e);const i=new s("originalLabel",n.Contains,e);const l=new s("parentPropertyName",n.Contains,e);const r=new s("duplicateName",n.EQ,true);const a=new s({filters:[l,r],and:true});const u=new s({filters:[t,i,a],and:false});o.filter([u])}else{o.filter([])}};u.prototype._redirectToExtensibilityAction=function(t){this.fireTriggerExtensibilityAction({actionKey:t});this._oDialog.close()};u.prototype.setTitle=function(t){this.setProperty("title",t,true);this._oDialogModel.setProperty("/dialogTitle",t)};u.prototype.setExtensibilityOptions=function(t){const e=t.UITexts.options;this._oDialogModel.setProperty("/extensibilityOptions",e);if(e.length===1){this._oDialogModel.setProperty("/customFieldButtonText",e[0].text);if(e[0]?.tooltip){this._oDialogModel.setProperty("/customFieldButtonTooltip",e[0].tooltip)}this.setCustomFieldButtonVisible(true)}else{this._oDialogModel.setProperty("/extensibilityMenuButtonActive",true);this._oDialogModel.setProperty("/extensibilityMenuButtonText",t.UITexts.buttonText);this._oDialogModel.setProperty("/extensibilityMenuButtonTooltip",t.UITexts.tooltip)}};u.prototype.getExtensibilityOptions=function(){return this._oDialogModel.getProperty("/extensibilityOptions")};u.prototype._setBusinessContextVisible=function(t){this.setProperty("businessContextVisible",t,true);this._oDialogModel.setProperty("/businessContextVisible",t)};u.prototype.addExtensibilityInfo=function(t){const e=t?.extensionData;this._removeExtensionDataTexts();const o=this._oDialogModel.getObject("/businessContextTexts");if(e&&e.length>0){e.forEach(function(t){o.push({text:t.description})},this)}else{o.push({text:this.oRTAResourceModel.getProperty("MSG_NO_BUSINESS_CONTEXTS")})}this._setBusinessContextVisible(true);this._oDialogModel.setProperty("/businessContextTexts/0/text",t?.UITexts?.headerText)};u.prototype._removeExtensionDataTexts=function(){const t=this._oDialogModel.getObject("/businessContextTexts");t.splice(1)};return u});
//# sourceMappingURL=AddElementsDialog.js.map