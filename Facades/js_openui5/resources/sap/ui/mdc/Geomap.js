/*!
* OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.define(["sap/ui/core/Lib","sap/ui/mdc/Control","./GeomapRenderer","sap/base/Log","sap/ui/mdc/ActionToolbar","./geomap/PropertyHelper","sap/ui/mdc/mixin/FilterIntegrationMixin","sap/ui/model/base/ManagedObjectModel","sap/ui/mdc/p13n/subcontroller/FilterController","sap/ui/base/ManagedObjectObserver"],(e,t,o,i,n,a,r,s,p,l)=>{"use strict";const u=t.extend("sap.ui.mdc.Geomap",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/geomap/Geomap.designtime",interfaces:["sap.ui.mdc.IFilterSource","sap.ui.mdc.IxState"],defaultAggregation:"items",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"700px",invalidate:true},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"700px",invalidate:true},header:{type:"string",group:"Misc",defaultValue:""},centerLat:{type:"float"},centerLng:{type:"float"},zoom:{type:"float"},enableSelectionControl:{type:"boolean",defaultValue:false,group:"Behavior"},enableNavigationControl:{type:"boolean",defaultValue:true,group:"Behavior"},enableFullscreenControl:{type:"boolean",defaultValue:true,group:"Behavior"},enableScaleControl:{type:"boolean",defaultValue:true,group:"Behavior"},
/**
                     * Enables the copyright control for the map
                     */
enableCopyrightControl:{type:"boolean",defaultValue:false,group:"Behavior"},delegate:{type:"object",group:"Data",defaultValue:{name:"sap/ui/mdc/GeomapDelegate",payload:{}}},propertyInfo:{type:"object",defaultValue:[]}},aggregations:{_geomap:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},items:{type:"sap.ui.mdc.geomap.Item",multiple:true}},associations:{},events:{zoomChange:{}}},renderer:o});u.prototype.init=function(){this._oManagedObjectModel=new s(this);this.setModel(this._oManagedObjectModel,"$mdcGeomap");t.prototype.init.apply(this,arguments);this._setPropertyHelperClass(a);this._setupPropertyInfoStore("propertyInfo")};u.prototype.onBeforeRendering=function(){t.prototype.onBeforeRendering.apply(this,arguments);this._applyConfigurations()};u.prototype.applySettings=function(e,o){t.prototype.applySettings.apply(this,arguments);this.initializedPromise=new Promise((e,t)=>{this._fnResolveInitialized=e;this._fnRejectInitialized=t});this.geomapBoundPromise=new Promise((e,t)=>{this._fnResolveGeomapBound=e;this._fnRejectGeomapBound=t});this.initControlDelegate().then(()=>{if(!this.isDestroyed()){this._initMap()}})};u.prototype._initMap=function(){this.getControlDelegate().initializeGeomap(this).then(e=>{this.setBusyIndicatorDelay(0);this.getControlDelegate().createInitialGeomapContent(this);this._oObserver?.disconnect();this._oObserver?.destroy();this._oObserver=new l(this._propagateItemChangeToGeomap.bind(this));this._oObserver.observe(this,{aggregations:["items"]});this._fnResolveGeomapBound();this._bGeomapReady=true;this._fnResolveInitialized();e.invalidate()}).catch(e=>{this._fnRejectInitialized(e);i.error("mdc Geomap","Error during initialization of geomap.")})};u.prototype._applyConfigurations=function(){const e=this._getInnerGeomap();if(e){e.setCenterLat(this.getCenterLat());e.setCenterLng(this.getCenterLng());e.setZoom(this.getZoom());e.setWidth(this.getWidth());e.setHeight(this.getHeight())}};u.prototype._geomapDataLoadComplete=function(){this.setBusy(false)};u.prototype._loadDelegate=function(){return new Promise(e=>{const t=[this.getDelegate().name];function o(t){e(t)}sap.ui.require(t,o)})};u.prototype.getPropertyInfoSet=function(){return this.getPropertyHelper()?this.getPropertyHelper().getProperties():[]};u.prototype._rebind=async function(e){if(!this._bGeomapReady){this.setBusy(true);await this.initialized();this.setBusy(false)}if(!this.getControlDelegate().getGeomapBound(this)){this._initMap();return}const t=this.getControlDelegate();let o;if(t._getBindingInfo){o=t._getBindingInfo(this);i.warning("mdc Geomap","calling the private delegate._getBindingInfo. Please make the function public!")}else{o=t.getBindingInfo(this)}t.updateBindingInfo(this,o);t.rebind(this,o)};u.prototype.onThemeChanged=function(){i.info("THEME CHANGES")};u.prototype.initialized=function(){return this.initializedPromise};u.prototype.destroy=function(){this._bIsDestroyed=true;t.prototype.destroy.apply(this,arguments)};u.prototype.getManagedObjectModel=function(){return this._oManagedObjectModel};u.prototype.getCurrentState=function(){const e={};return e};u.prototype._propagateItemChangeToGeomap=function(e){if(this._bIsDestroyed){return}this.getControlDelegate().propagateItemChangeToGeomap(this,e)};u.prototype.innerGeomapBound=function(){return this.innerGeomapBoundPromise};u.prototype.zoomIn=function(){this.getControlDelegate().zoomIn(this);this.fireZoomChange();return this};u.prototype.zoomOut=function(){this.getControlDelegate().zoomOut(this);this.fireZoomChange();return this};u.prototype._getInnerGeomap=function(){return this.getAggregation("_geomap")};u.prototype.exit=function(){delete this.geomapBoundPromise;delete this._fnResolveGeomapBound;delete this._fnRejectGeomapBound;delete this.initializedPromise;delete this._fnResolveInitialized;delete this._fnRejectInitialized;delete this._oGeomapContentPromise;t.prototype.exit.apply(this,arguments);this._oObserver?.destroy();delete this._oObserver};return u});
//# sourceMappingURL=Geomap.js.map