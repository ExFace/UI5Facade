/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/Label","sap/ui/model/base/ManagedObjectModel","sap/ui/model/BindingMode","sap/m/plugins/PluginBase","sap/ui/core/Element","sap/ui/core/Control","sap/base/Log"],(e,t,o,n,i,l,a)=>{"use strict";const r=l.extend("sap.ui.mdc.table.Column",{metadata:{library:"sap.ui.mdc",defaultAggregation:"template",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},minWidth:{type:"float",group:"Behavior",defaultValue:8},header:{type:"string",group:"Appearance"},headerVisible:{type:"boolean",group:"Appearance",defaultValue:true},hAlign:{type:"sap.ui.core.HorizontalAlign",group:"Appearance",defaultValue:"Begin"},importance:{type:"sap.ui.core.Priority",group:"Behavior",defaultValue:"None"},dataProperty:{type:"string"},propertyKey:{type:"string"},required:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{template:{type:"sap.ui.core.Control",multiple:false},creationTemplate:{type:"sap.ui.core.Control",multiple:false},extendedSettings:{type:"sap.ui.mdc.table.ColumnSettings",multiple:false}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.openEnd();if(t._oColumnHeaderLabel){e.renderControl(t._oColumnHeaderLabel.getLabel())}e.close("div")}}});r.prototype.init=function(){this.mSkipPropagation={template:true,creationTemplate:true};this._oManagedObjectModel=new t(this,{calculatedWidth:null,p13nWidth:null});this._oManagedObjectModel.setDefaultBindingMode(o.OneWay);this._oInnerColumnReady=Promise.withResolvers()};r.prototype.getColumnAIActionPluginOwner=function(){return this._oInnerColumn||this._oInnerColumnReady.promise};r.prototype.getInnerColumn=function(){const e=this.getTable();if(e&&(!this._oInnerColumn||this._oInnerColumn.isDestroyed())){this._oInnerColumn=e._getType().createColumn(this);this._readP13nValues();this._oInnerColumn.setModel(this._oManagedObjectModel,"$sap.ui.mdc.table.Column");this._oInnerColumnReady.resolve()}return this._oInnerColumn};const s=l.extend("sap.ui.mdc.table.ColumnHeaderLabel",{metadata:{library:"sap.ui.mdc",final:true,aggregations:{label:{type:"sap.m.Label",multiple:false}},associations:{column:{type:"sap.ui.mdc.table.Column"}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.style("width","100%");e.openEnd();e.renderControl(i.getElementById(t.getColumn()));e.close("div")}},getText:function(){return this.getLabel()?.getText()},clone:function(){return this.getLabel()?.clone()},getRequired:function(){return this.getLabel()?.getRequired()},getAccessibilityInfo:function(){return this.getLabel()?.getAccessibilityInfo()},setIsInColumnHeaderContext:function(e){this.getLabel()?.setIsInColumnHeaderContext(e)}});r.prototype.getHeaderLabel=function(t){if(this._oColumnHeaderLabel?.isDestroyed()){delete this._oColumnHeaderLabel}this._oColumnHeaderLabel??=new s({column:this,label:new e({width:"{= ${$sap.ui.mdc.table.Column>/headerVisible} ? '100%' : '0px' }",text:"{$sap.ui.mdc.table.Column>/header}",textAlign:"{$sap.ui.mdc.table.Column>/hAlign}",required:"{$sap.ui.mdc.table.Column>/required}",...t})});return this._oColumnHeaderLabel};r.prototype.getTemplateClone=function(){const e=this.getTemplate();if(e&&(!this._oTemplateClone||this._oTemplateClone.isDestroyed())){this._oTemplateClone=e.clone()}return this._oTemplateClone};r.prototype.setHeader=function(e){this.setProperty("header",e,true);const t=this.getDomRef();if(t){t.textContent=this.getHeader()}return this};r.prototype.getPropertyKey=function(){const e=this.getProperty("propertyKey");return e||this.getDataProperty()};r.prototype.setTooltip=function(e){if(e&&e.isA&&e.isA("sap.ui.core.TooltipBase")){a.error("The control sap.ui.mdc.table.Column allows only strings as tooltip, but given is "+e);return this}return l.prototype.setTooltip.apply(this,arguments)};r.prototype.setParent=function(e){const t=this.getTable();l.prototype.setParent.apply(this,arguments);if(this._bIsBeingMoved){return}this._disconnectFromTable(t);this._connectToTable()};r.prototype._getAIAction=function(){return n.getPlugin(this,"sap.m.plugins.ColumnAIAction")};r.prototype._connectToTable=function(){const e=this.getTable();if(!e){return}this._getAIAction()?.setEnabled(true);this._calculateColumnWidth();this._readP13nValues()};r.prototype._disconnectFromTable=function(){this._getAIAction()?.setEnabled(false);this._oInnerColumn?.destroy();delete this._oInnerColumn};r.prototype._onModifications=function(){this._readP13nValues()};r.prototype._calculateColumnWidth=function(){const e=this.getTable();if(!e||!e.getEnableAutoColumnWidth()||!this.isPropertyInitial("width")){return}const t=e.getPropertyHelper();if(t){t.calculateColumnWidth(this).then(e=>{this._oManagedObjectModel.setProperty("/@custom/calculatedWidth",e)})}else{e._fullyInitialized().then(this._calculateColumnWidth.bind(this))}};r.prototype._readP13nValues=function(){const e=this.getTable();const t=this.getPropertyKey();const o=e._getXConfig();const n=o?.aggregations?.columns?.[t];this._oManagedObjectModel.setProperty("/@custom/p13nWidth",n?.width)};r.prototype.getTable=function(){const e=this.getParent();return e&&e.isA("sap.ui.mdc.Table")?e:null};r.prototype.exit=function(){this._disconnectFromTable();this._oInnerColumnReady=null;["_oManagedObjectModel","_oInnerColumn","_oTemplateClone","_oColumnHeaderLabel"].forEach(function(e){if(this[e]){this[e].destroy();delete this[e]}},this)};return r});
//# sourceMappingURL=Column.js.map