/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/BaseDelegate","sap/ui/model/FilterType","sap/ui/mdc/enums/BaseType","sap/ui/mdc/enums/ConditionValidated","sap/ui/mdc/enums/OperatorName","sap/ui/mdc/condition/Condition","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterProcessor","sap/ui/mdc/condition/FilterConverter","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/Device","sap/ui/mdc/enums/FieldDisplay","sap/ui/mdc/enums/RequestShowContainerReason","sap/ui/mdc/util/loadModules"],(e,t,n,i,o,s,r,a,u,l,c,p,d,f,g)=>{"use strict";const h=function(e,t,n,i){const o=i.getConditions();const s=u.apply(e,t,(e,t)=>e&&e.getProperty(t));if(i.isSingleSelect()&&o.length>0){return s[0]}else{return s.find(e=>!this.findConditionsForContext(n,i,e,o).length)}};const C=Object.assign({},e);C.retrieveContent=function(e,t,n){return Promise.resolve()};C.isSearchSupported=function(e,t,n){return false};C.showTypeahead=function(e,t){if(p.system.phone){return true}if(!t||t.isA("sap.ui.mdc.valuehelp.base.FilterableListContent")&&!t.getFilterValue()){return false}else if(t.isA("sap.ui.mdc.valuehelp.base.ListContent")){const e=t.getListBinding();const n=e&&e.getCurrentContexts().length;return n>0}return true};C.updateBindingInfo=function(e,t,n){n.parameters={};n.filters=this.getFilters(e,t)};C.getFilters=function(e,t){const n=t.getActiveFilterBar();const r=n?n.getConditions():t._oInitialFilterConditions||{};if(!t.isPropertyInitial("filterFields")){const e=t.getFilterFields();const a=t.getSearch();if(!n&&a&&e&&e!=="$search"){const t=s.createCondition(o.Contains,[a],undefined,undefined,i.NotValidated);r[e]=[t]}}const a=r&&this.getTypesForConditions(e,t,r);const u=r&&l.createFilters(r,a,undefined,t.getCaseSensitive());return u?[u]:[]};C.updateBinding=function(e,n,i,o){n.filter(i.filters,t.Application);if(n.isSuspended()){n.resume()}};C.adjustSearch=function(e,t,n){return n};C.executeFilter=function(e,t,n){return Promise.resolve(t)};C.checkListBindingPending=function(e,t,n){if(!t||t.isSuspended()){return false}return Promise.resolve(t.getContexts(0,n)).then(e=>e.length===0)};C.onConditionPropagation=function(e,t,n){};C.getInitialFilterConditions=function(e,t,n){const i={};return i};C.findConditionsForContext=function(e,t,n,i){const o=t.getItemFromContext(n);const s=o&&t.createCondition(o.key,o.description,o.payload);return i.filter(t=>this.compareConditions(e,s,t))};C.compareConditions=function(e,t,n){if(t.operator===n.operator){if(t.validated===i.Validated&&t.validated===n.validated){return t.values[0]===n.values[0]}return c.getOperator(t.operator)?.compareConditions(t,n)}return false};C.modifySelectionBehaviour=function(e,t,n){return n};C.createConditionPayload=function(e,t,n,i){return undefined};C.getTypesForConditions=function(e,t,i){const o={};const s=t&&t.getListBindingInfo();if(s&&s.template){const e=this.getTypeMap();s.template.mAggregations.cells.forEach(t=>{Object.values(t.mBindingInfos).forEach(t=>{t.parts.forEach(t=>{const{type:i,formatOptions:s,constraints:r,path:a}=t;const u=typeof i==="string"?e.getDataTypeInstance(i,s,r):i;o[a]={type:u||null,baseType:u?e.getBaseTypeForType(u):n.String}})})},{})}return o};C.getFilterConditions=function(e,t,n){if(this.getInitialFilterConditions){return this.getInitialFilterConditions(e,t,n&&n.control||t&&t.getControl())}return{}};C.getFirstMatch=function(e,t,n){let i;const o=t.getListBinding(n)?.getCurrentContexts();const s=n.value;if(s&&o?.length){const u=n.hasOwnProperty("caseSensitive")?n.caseSensitive:t.getCaseSensitive();const l=t.getKeyPath();const c=n.checkDescription&&t.getDescriptionPath();let p;switch(e.getDisplay()){case d.Description:p=[c];break;case d.DescriptionValue:p=[c,l];break;case d.ValueDescription:p=[l,c];break;default:p=[l];break}p=p.filter(e=>!!e);for(const n of p){const l=[new r({path:n,operator:a.EQ,value1:s,caseSensitive:u}),new r({path:n,operator:a.StartsWith,value1:s,caseSensitive:u})];for(const n of l){i=h.call(this,o,n,e,t);if(i){return i}}}}return i};C.isFilteringCaseSensitive=function(e,t){return t.getCaseSensitive()};C.requestShowContainer=async function(e,t,n){if(n===f.Tap){return!!await(this.shouldOpenOnClick?.(e,t))}if(n===f.Typing){await e.retrieveDelegateContent(t);return!!await t.isTypeaheadSupported()}if(n===f.Filter){const[n]=t?.getContent()||[];return!!await(this.showTypeahead?.(e,n))}if(n===f.Focus){return!!await(this.shouldOpenOnFocus?.(e,t))}if(n===f.Navigate){await e.retrieveDelegateContent(t);return!!await t.shouldOpenOnNavigate()}if(n===f.ValueHelpRequest){return t.isDialog()}return false};C.shouldOpenOnFocus=function(e,t){let n=false;if(t.isA("sap.ui.mdc.valuehelp.Popover")){n=t.getOpensOnFocus()}return Promise.resolve(n)};C.shouldOpenOnClick=function(e,t){let n=false;if(t.isA("sap.ui.mdc.valuehelp.Popover")){if(p.system.phone&&(!t.isSingleSelect()||!t.isDialog())){n=true}else{let e=true;if(!t.isPropertyInitial("opensOnClick")){e=false;n=t.getOpensOnClick()}if(e){const e=t._getContent();n=!!e&&e.shouldOpenOnClick()}}}return Promise.resolve(n)};C.onControlConnect=function(e,t,n){};return C});
//# sourceMappingURL=ValueHelpDelegate.js.map