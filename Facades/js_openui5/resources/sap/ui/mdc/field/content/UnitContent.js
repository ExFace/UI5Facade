/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/field/content/DefaultContent","sap/ui/core/library","sap/ui/model/Filter","sap/base/util/isEmptyObject","sap/base/util/merge","sap/ui/mdc/enums/FieldEditMode"],(e,t,i,a,n,l)=>{"use strict";const{ValueState:o}=t;const s=function(e,t,i,a,n,l){return e.getUnitTypeInstance?e.getUnitTypeInstance(t,n,l):e.getDataTypeInstance(t.getMetadata().getName(),i,a,{showNumber:n,showMeasure:l})};const d=Object.assign({},e,{getEdit:function(){return["sap/ui/mdc/field/FieldInput","sap/ui/core/InvisibleText"]},getEditMultiValue:function(){return["sap/ui/mdc/field/FieldMultiInput","sap/ui/mdc/field/FieldInput","sap/m/Token","sap/ui/core/InvisibleText"]},getEditMultiLine:function(){return[null]},getUseDefaultValueHelp:function(){return false},createEdit:function(e,t,i){e.setIsMeasure(true);const a=t[0];const n=t[1];const l=e.getConditionsType();this._adjustDataTypeForUnit(e);const o=n.getStaticId("sap.ui.mdc","field.NUMBER");let s=[];const d=new a(i,{value:{path:"$field>/conditions",type:l},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",valueHelpIconSrc:"sap-icon://slim-arrow-down",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:{path:"$field>/valueState",formatter:r},valueStateText:{path:"$field>/valueStateText",formatter:u},showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",autocomplete:false,fieldGroupIds:{path:"$field>/fieldGroupIds",formatter:p},ariaDescribedBy:[o],change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange()});d.setPreferUserInteraction(true);e.setAriaLabelledBy(d);s.push(d);s=this._addUnitControl(e,s,i,a,n);return s},createEditMultiValue:function(e,t,a){e.setIsMeasure(true);const n=t[0];const l=t[2];const o=t[1];const s=t[3];const d=e.getConditionType();const c=e.getConditionsType();this._adjustDataTypeForUnit(e);let f=[];const g=new l(a+"-token",{text:{path:"$field>",type:d}});const h=new i({path:"values",test:function(e){if(!Array.isArray(e[0])||e[0][0]){return true}else{return false}}});const y=s.getStaticId("sap.ui.mdc","field.NUMBER");const m=new n(a,{value:{path:"$field>/conditions",type:c},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:{path:"$field>/valueState",formatter:r},valueStateText:{path:"$field>/valueStateText",formatter:u},showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",fieldGroupIds:{path:"$field>/fieldGroupIds",formatter:p},ariaDescribedBy:[y],tokens:{path:"$field>/conditions",template:g,filters:[h]},dependents:[g],autocomplete:false,showSuggestion:false,change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange(),tokenUpdate:e.getHandleTokenUpdate()});m.setPreferUserInteraction(true);e.setAriaLabelledBy(m);f.push(m);f=this._addUnitControl(e,f,a,o,s);return f},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.UnitContent - createEditMultiLine not defined!")},_addUnitControl:function(e,t,i,a,n){const o=e.getUnitConditionsType();if(e.getField().getEditMode()===l.EditableDisplay){t[0].bindProperty("description",{path:"$field>/conditions",type:o});t[0].setWidth("100%");t[0].setFieldWidth("70%")}else{let l;const s=e.getUnitOriginalType();const d=s&&s.getMetadata().getName();if(d&&d.indexOf("Currency")>=0){l=n.getStaticId("sap.ui.mdc","field.CURRENCY")}else{l=n.getStaticId("sap.ui.mdc","field.UNIT")}const c=new a(i+"-unit",{value:{path:"$field>/conditions",type:o},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditableUnit},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:{path:"$field>/valueState",formatter:r},valueStateText:{path:"$field>/valueStateText",formatter:u},valueHelpIconSrc:e.getValueHelpIcon(),showValueHelp:"{$field>/_valueHelpEnabled}",ariaAttributes:"{$field>/_ariaAttributes}",width:"30%",tooltip:"{$field>/tooltip}",autocomplete:false,fieldGroupIds:{path:"$field>/fieldGroupIds",formatter:p},ariaDescribedBy:[l],change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange(),valueHelpRequest:e.getHandleValueHelpRequest()});c.setPreferUserInteraction(true);e.setAriaLabelledBy(c);t.push(c)}return t},_adjustDataTypeForUnit:function(e){const t=e.getField();const i=t.getTypeMap();const l=e.retrieveDataType();const o=l.getFormatOptions();const d=l.getConstraints();const r=!o||!o.hasOwnProperty("showMeasure")||o.showMeasure;const u=!o||!o.hasOwnProperty("showNumber")||o.showNumber;if(r&&u){const t=n({},o);const r=a(d)?undefined:n({},d);const u=(e.getCompositeTypes()??[]).length>0;let p=s(i,l,t,r,true,false);if(u){p.processPartTypes(e.getCompositeTypes())}e.setUnitOriginalType(e.getDataType());i.initializeInternalType(p,e.getFieldTypeInitialization());e.setDataType(p);p=s(i,l,t,r,false,true);if(u){p.processPartTypes(e.getCompositeTypes())}i.initializeInternalType(p,e.getFieldTypeInitialization());e.setUnitType(p);e.updateConditionType()}}});function r(e){const t=this.getParent();if(!t||!t.isInvalidInput()||t._isInvalidInputForContent(this)){return e}else{return o.None}}function u(e){const t=this.getParent();if(!t||!t.isInvalidInput()){return e}else if(t._isInvalidInputForContent(this)){const e=t._getInvalidInputException(this);return e.message}else{return""}}function p(e){const t=this.getParent();if(t){e.push(t.getId())}else{let t=this.getId();const i=t.lastIndexOf("-inner");t=t.slice(0,i);e.push(t)}return e}return d});
//# sourceMappingURL=UnitContent.js.map