/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/Layer"],function(r){"use strict";function e(r,e){const t=e.aObjects||[];const o=e.aMandatoryProperties||[];const n=e.aSupportedProperties||[];const p=e.oSupportedPropertyPattern||{};const i=e.oSupportedPropertyTypes||{};t.forEach(function(e){const t=new Set(Object.keys(r[e]));if(o){o.forEach(function(r){if(!t.has(r)){const e=o.length>1?"properties are":"property is";throw new Error(`Mandatory property '${r}' is missing. Mandatory ${e} ${o.join("|")}.`)}})}if(n){const r=[];t.forEach(function(e){if(!n.includes(e)){r.push(e)}});if(r.length>0){const e=r.length>1?`Properties ${r.join("|")} are not supported. `:`Property ${r.join("|")} is not supported. `;const t=n.length>1?`Supported properties are ${n.join("|")}.`:`Supported property is ${n.join("|")}.`;throw new Error(e+t)}}if(i){t.forEach(function(t){if(i[t]){if(String(typeof r[e][t])!==i[t]){throw new Error(`The property '${t}' is type of '${typeof r[e][t]}'. Supported type for property '${t}' is '${i[t]}'`)}}})}if(p){t.forEach(function(t){if(p[t]){const o=new RegExp(p[t]);if(!o.test(r[e][t])){throw new Error(`The property has disallowed values. Supported values for '${t}' should adhere to regular expression ${o}.`)}}})}})}function t(r,t){const o=t.sKey||"";const n=t.sChangeType||"";const p=t.iMaxNumberOfKeys||1;const i=Object.keys(r);if(p===0||p<-1){throw new Error(`The parameter 'iMaxNumberOfKeys' is invalid for change '${n}'. It must be either -1 (no limit) or a positive integer.`)}if(i.length>1){throw new Error("It is not allowed to add more than one object under change object 'content'.")}if(i.length<1){throw new Error(`The change object 'content' cannot be empty. Please provide the necessary property, as outlined in the change schema for '${n}'.`)}if(i[0]!==o){throw new Error(`The provided property '${i[0]}' is not supported. Supported property for change '${n}' is '${o}'.`)}const a=Object.keys(r[o]);if(a.length>p&&p!==-1){throw new Error(`It is not allowed to add more than ${p} ${n}. Provided keys are: ${a.join(", ")}.`)}if(a.length<1){throw new Error(`There is no ${o} provided. Please provide an ${o}.`)}if(a.includes("")){throw new Error(`The ID of your ${o} is empty.`)}e(r[o],{aObjects:a,aMandatoryProperties:t.aMandatoryProperties,aSupportedProperties:t.aSupportedProperties,oSupportedPropertyPattern:t.oSupportedPropertyPattern,oSupportedPropertyTypes:t.oSupportedPropertyTypes});return p===1?a[0]:a}function o(r,e,t,o,n,p){const a=Array.isArray(r)?r:[r];a.forEach(function(r){i(r,e,t,n,p);d(r,o)})}function n(r){var e=[];var t=r.filter(function(r){return r.endsWith("/*")});t.forEach(function(r){var t=r.replaceAll("/*","");if(t){e.push(t)}});return e}function p(r,e){const t=n(r);let o=false;t.forEach(function(r){if(e.startsWith(r)){const t=e.replace(r,"");if(t.startsWith("/")||t===""){o=true}}});return o}function i(r,e,t,o,n){if(!r.propertyPath){throw new Error("Invalid change format: The mandatory 'propertyPath' is not defined. Please define the mandatory property 'propertyPath'")}if(!r.operation){throw new Error("Invalid change format: The mandatory 'operation' is not defined. Please define the mandatory property 'operation'")}const i=r.operation.toUpperCase();if(i==="DELETE"){if(o){if(o.includes(r.propertyPath)){throw new Error(`The property '${r.propertyPath}' was attempted to be deleted. The mandatory properties ${o.join("|")} cannot be deleted.`)}}if(r.hasOwnProperty("propertyValue")){throw new Error("The property 'propertyValue' must not be provided in a 'DELETE' operation. Please remove 'propertyValue'.")}}if(i!=="DELETE"){if(!r.hasOwnProperty("propertyValue")){throw new Error("Invalid change format: The mandatory 'propertyValue' is not defined. Please define the mandatory property 'propertyValue'")}if(!e.includes(r.propertyPath)&&!p(e,r.propertyPath)){throw new Error(`Changing ${r.propertyPath} is not supported. The supported 'propertyPath' is: ${e.join("|")}`)}if(n){const e=r.propertyPath.split("/");const t=e[e.length-1];if(n[t]){if(String(typeof r.propertyValue)!==n[t]){throw new Error(`The property '${t}' is type of '${typeof r.propertyValue}'. Supported type for property '${t}' is '${n[t]}'.`)}}}}if(!t.includes(i)){throw new Error(`Operation ${i} is not supported. The supported 'operation' is ${t.join("|")}`)}}function a(r,e,t,n,p,i){var a=Object.keys(r).filter(function(r){return r.endsWith("Id")}).shift();if(!r[a]){throw new Error(`Mandatory "${a}" parameter is not provided.`)}if(!r.entityPropertyChange){throw new Error(`Changes for "${r[a]}" are not provided.`)}o(r.entityPropertyChange,e,t,n,p,i)}var s={};s[r.CUSTOMER]="customer.";s[r.CUSTOMER_BASE]="customer.";s[r.PARTNER]="partner.";s[r.VENDOR]=null;function h(r,e){var t=e.getLayer();if(!t){throw new Error("Mandatory layer parameter is not provided.")}var o=f(t);if(o===null){Object.keys(s).forEach(function(e){if(s[e]&&r.startsWith(s[e])){throw new Error(`Id ${r} must not start with reserved ${s[e]}`)}})}else if(!r.startsWith(o)){throw new Error(`Id ${r} must start with ${o}`)}}function f(r){var e=s[r];if(e===undefined){throw new Error(`Layer ${r} not supported.`)}return e}function d(r,e){if(e){if(!Object.keys(e).includes(r.propertyPath)){return}if(!r.propertyValue.match(e[r.propertyPath])){throw new Error(`Not supported format for propertyPath ${r.propertyPath}. `+`The supported pattern is ${e[r.propertyPath]}`)}}}return{checkEntityPropertyChange:a,checkIdNamespaceCompliance:h,getNamespacePrefixForLayer:f,getClearedGenericPath:n,isGenericPropertyPathSupported:p,getAndCheckContentObject:t}});
//# sourceMappingURL=DescriptorChangeCheck.js.map