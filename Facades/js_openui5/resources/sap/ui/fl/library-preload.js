//@ui5-bundle sap/ui/fl/library-preload.js
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/Layer", [],function(){"use strict";return{USER:"USER",PUBLIC:"PUBLIC",CUSTOMER:"CUSTOMER",CUSTOMER_BASE:"CUSTOMER_BASE",PARTNER:"PARTNER",VENDOR:"VENDOR",BASE:"BASE"}});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/LayerUtils", ["sap/ui/thirdparty/hasher","sap/ui/fl/Layer","sap/ui/fl/initial/_internal/FlexInfoSession"],function(e,r,a){"use strict";var t=[r.BASE,r.VENDOR,r.PARTNER,r.CUSTOMER_BASE,r.CUSTOMER,r.PUBLIC,r.USER];var n={};t.forEach(function(e,r){n[e]=r});function i(e){return new URLSearchParams(window.location.search).get(e)}var s={_mLayersIndex:n,_sTopLayer:t[t.length-1],FL_MAX_LAYER_PARAM:"sap-ui-fl-max-layer",isValidLayer(e){return Object.keys(r).some(function(r){return r===e})},isVendorLayer(){return this.getCurrentLayer()===r.VENDOR},isCustomerDependentLayer(e){return[r.PUBLIC,r.CUSTOMER,r.CUSTOMER_BASE].indexOf(e)>-1},isDeveloperLayer(e){return s.compareAgainstCurrentLayer(e,r.CUSTOMER)===-1},doesCurrentLayerRequirePackage(){var e=this.getCurrentLayer();return e===r.VENDOR||e===r.PARTNER||e===r.CUSTOMER_BASE},getMaxLayer(r){var a=s.getMaxLayerTechnicalParameter(e.getHash(),r);return a||i(this.FL_MAX_LAYER_PARAM)||s._sTopLayer},getLayerIndex(e){return this._mLayersIndex[e]},isOverMaxLayer(e,r){return this.isOverLayer(e,this.getMaxLayer(r))},isOverLayer(e,r){return this.getLayerIndex(e)>this.getLayerIndex(r)},compareAgainstCurrentLayer(e,r){var a=r||s.getCurrentLayer();if(this.getLayerIndex(a)>this.getLayerIndex(e)||!e){return-1}else if(this.getLayerIndex(a)===this.getLayerIndex(e)){return 0}return 1},isLayerFilteringRequired(e){var r=a.getByReference(e);var t=r.maxLayer?r.maxLayer:s._sTopLayer;return this._sTopLayer!==t},isSapUiLayerParameterProvided(){return!!i("sap-ui-layer")},getCurrentLayer(){var e=i("sap-ui-layer")||"";return e.toUpperCase()||r.CUSTOMER},filterChangeDefinitionsByMaxLayer(e,r){return e.filter(function(e){return!e.layer||!s.isOverMaxLayer(e.layer,r)})},filterChangeOrChangeDefinitionsByCurrentLayer(e,r){if(!r){return e}return e.filter(function(e){var a=e.getLayer&&e.getLayer()||e.layer;return r===a})},getMaxLayerTechnicalParameter(e,r){if(r){var a=r.parseShellHash(e)||{};if(a.params&&a.params.hasOwnProperty(this.FL_MAX_LAYER_PARAM)){return a.params[this.FL_MAX_LAYER_PARAM][0]}}return undefined}};return s});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/Scenario", [],function(){"use strict";return{AppVariant:"APP_VARIANT",VersionedAppVariant:"VERSIONED_APP_VARIANT",AdaptationProject:"ADAPTATION_PROJECT",FioriElementsFromScratch:"FE_FROM_SCRATCH",UiAdaptation:"UI_ADAPTATION"}});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/Utils", ["sap/base/i18n/Localization","sap/base/util/isPlainObject","sap/base/util/uid","sap/base/util/restricted/_isEqual","sap/base/Log","sap/ui/base/BindingInfo","sap/ui/base/SyncPromise","sap/ui/base/ManagedObject","sap/ui/core/util/reflection/BaseTreeModifier","sap/ui/core/Component","sap/ui/core/Element","sap/ui/fl/initial/_internal/FlexConfiguration","sap/ui/fl/Scenario","sap/ui/thirdparty/hasher","sap/ui/core/mvc/View"],function(e,t,r,n,i,o,a,s,p,u,c,l,f,g,m){"use strict";function h(e){if(e?.getEntry){return e.getEntry?.("sap.app")?.type}return e?.["sap.app"]?.type}function d(e,t){if(e?.startupParameters&&t&&Array.isArray(e.startupParameters[t])){return e.startupParameters[t][0]}return undefined}const C={isVariantByStartupParameter(e){const t=this.getAppComponentForControl(e);if(t?.getComponentData){return!!d(t.getComponentData(),"sap-app-id")}return false},getAppDescriptor(e){return this.getAppComponentForControl(e)?.getMetadata?.()?.getManifestObject?.().getJson()},isBinding(e,r){let n;try{n=o.parse(e,r)}catch(e){return false}return typeof e==="string"&&!!n||t(e)&&((e.hasOwnProperty("path")||e.hasOwnProperty("parts"))&&!e.hasOwnProperty("ui5object"))},getComponentForControl(e){function t(e){const r=u.getOwnerIdFor(e);if(!r){if(typeof e?.getParent==="function"){const r=e.getParent();if(r){return t(r)}}}return r||""}if(e){const r=t(e);if(r){return u.getComponentById(r)}}return undefined},getAppComponentForControl(e){let t=e instanceof u?e:C.getComponentForControl(e);if(t?.getAppComponent?.()instanceof u){return t.getAppComponent()}if(t?.oComponentData?.appComponent){return t.oComponentData.appComponent}if(t?.getManifestEntry){const e=t.getManifestEntry("sap.app");if(e?.type&&e.type!=="application"){if(t instanceof u){t=C.getComponentForControl(t)}return this.getAppComponentForControl(t)}}return t},getAppComponentForSelector(e){return e.appComponent||C.getAppComponentForControl(e)},getViewForControl(e){if(e instanceof m){return e}if(typeof e?.getParent==="function"){e=e.getParent();return C.getViewForControl(e)}return undefined},getClient(){return new URLSearchParams(window.location.search).get("sap-client")},getConnectors(){const e=l.getFlexibilityServices();return e.map(e=>e?.connector)},getLrepUrl(){const e=l.getFlexibilityServices();const t=e.find(e=>e.connector==="LrepConnector");return t?.url||""},getCurrentLanguage(){const t=e.getLanguage();if(typeof t!=="string"){return""}const r=t.indexOf("-");if(r<0&&t.length<=2){return t.toUpperCase()}if(r>0&&r<=2){return t.substring(0,r).toUpperCase()}return""},getControlType(e){return e?.getMetadata?.()?.getElementName?.()},checkControlId(e,t){if(!t){e=e instanceof s?e:c.getElementById(e);t=C.getAppComponentForControl(e)}return p.checkControlId(e,t)},hasLocalIdSuffix:p.hasLocalIdSuffix,getParsedURLHash(e){return e?.parseShellHash(g.getHash())||{}},getUrlParameter(e){return new URLSearchParams(window.location.search).get(e)},getUshellContainer(){const e=sap.ui.require("sap/ushell/Container");return e?.isInitialized()?e:undefined},createDefaultFileName(e){const t=r().replace(/-/g,"_");return e?`${t}_${e}`:t},createNamespace(e,t){const r=t==="ctrl_variant"?"variants":"changes";const n=e.reference.replace(".Component","");return`apps/${n}/${r}/`},buildLrepRootNamespace(e,t,r){const n="apps";const i="Error in sap.ui.fl.Utils#buildLrepRootNamespace:";if(!e){throw new Error(`${i} for every scenario you need a base ID`)}switch(t){case f.VersionedAppVariant:case f.AppVariant:if(!r){throw new Error(`${i} in the ${t} scenario you additionally need a project ID`)}return`${n}/${e}/appVariants/${r}/`;case f.AdaptationProject:if(!r){throw new Error(`${i} in the ${t} scenario you additionally need a project ID`)}return`${n}/${e}/adapt/${r}/`;case f.FioriElementsFromScratch:case f.UiAdaptation:default:return`${n}/${e}/`}},isApplication(e){return h(e)==="application"},isApplicationComponent(e){return e instanceof u&&C.isApplication(e.getManifestObject())},isEmbeddedComponent(e){const t=C.getAppComponentForControl(e);return!!(e instanceof u&&h(e.getManifestObject())==="component"&&t&&C.isApplicationComponent(t))},indexOfObject(e,t){return e.findIndex(e=>n(e,t))},execPromiseQueueSequentially(e,t,r,n){if(e.length===0){if(r){return Promise.resolve()}return C.FakePromise?new C.FakePromise:Promise.resolve()}const o=e.shift();if(typeof o==="function"){let a;try{a=o()}catch(e){a=Promise.reject(e)}return a.then(function(){if(!r&&a instanceof Promise){r=true}}).catch(function(e){let r="Error during execPromiseQueueSequentially processing occurred";r+=e?`: ${e.message}`:"";i.error(r,e);if(t){if(n){throw new Error(e.message)}else{throw new Error(r)}}}).then(function(){return this.execPromiseQueueSequentially(e,t,r,n)}.bind(this))}i.error("Changes could not be applied, promise not wrapped inside function.");return this.execPromiseQueueSequentially(e,t,r,n)},FakePromise:function(e,t,r){C.FakePromise.fakePromiseIdentifier="sap.ui.fl.Utils.FakePromise";this.vValue=e;this.vError=t;this.bContinueWithFakePromise=arguments.length<3||r===C.FakePromise.fakePromiseIdentifier;const n=function(e,t){try{const r=t(e,C.FakePromise.fakePromiseIdentifier);if(a.isThenable(r)){return r}return new C.FakePromise(r)}catch(e){const t=e;return new C.FakePromise(undefined,t)}};C.FakePromise.prototype.then=function(e,t){if(!this.bContinueWithFakePromise){return Promise.resolve(e(this.vValue))}if(!this.vError){return n(this.vValue,e)}else if(t){return n(this.vError,t)}return this};C.FakePromise.prototype.catch=function(e){if(!this.bContinueWithFakePromise){return Promise.reject(e(this.vError))}if(this.vError){return n(this.vError,e)}return this};if(this.vValue instanceof Promise||this.vValue instanceof C.FakePromise){return this.vValue}return undefined},getChangeFromChangesMap(e,t){let r;Object.values(e).some(e=>{r=e.find(e=>e.getId()===t);return r});return r},handleUrlParameters(e,t,r,n){if(C.hasParameterAndValue(t,r,n)){if(e.startsWith("?")){e=e.substr(1,e.length)}const n=e.split("&").filter(e=>e!==`${t}=${r}`);e="";if(n.length>0){e=`?${n.join("&")}`}}else{e+=`${(e.length>0?"&":"?")+t}=${r}`}return e},hasParameterAndValue(e,t,r){return C.getParameter(e,r)===t},getParameter(e,t){return C.getParsedURLHash(t)?.params?.[e]?.[0]||C.getUrlParameter(e)},findAggregation(e,t){return e?.getMetadata?.()?.getAllAggregations?.()?.[t]},getAggregation(e,t){const r=C.findAggregation(e,t);if(r){return e[r._sGetter]()}return undefined},getProperty(e,t){const r=e.getMetadata().getPropertyLikeSetting(t)?._sGetter;return e[r]()},getUShellService(e){if(e){const t=this.getUshellContainer();if(t){return t.getServiceAsync(e)}}return Promise.resolve()},async getUShellServices(e){const t={};for(const r of e){t[r]=await this.getUShellService(r)}return t}};return C});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/DelegateMediator", ["sap/base/Log","sap/base/util/restricted/_pick","sap/ui/fl/requireAsync"],function(e,t,r){"use strict";const n={};let a={};let o={};let i={};function l(e){const t=e.getModel?.();if(!t){return undefined}return t.getMetadata().getName()}function d(e,t){t||=l(e);const r=a[t];return r}async function c(e,t){const r=await t.getControlMetadata(e);const n=o[r.getName()];return n}function s(t,n,a){return r(a.name).catch(r=>{e.error(`Failed to load the delegate for the control ${n.getId(t)}\n\t\t\t${r.message}`);return undefined})}function u(e,t,r){const n=[];r.forEach(function(r){if(r){n.push(async function(){const n=await s(e,t,r);if(n){r.instance=n||{};return r}return undefined}())}else{n.push(Promise.resolve())}});return Promise.all(n)}n.registerReadDelegate=function(e){if(!(e.modelType&&e.delegate)){throw new Error("'modelType' and 'delegate' properties are required for registration!")}if(a[e.modelType]){throw new Error(`modelType ${e.modelType} is already defined!`)}a[e.modelType]={name:e.delegate,modelType:e.modelType}};n.registerWriteDelegate=function(e){if(!(e.controlType&&e.delegate)){throw new Error("'controlType' and 'delegate' properties are required for registration!")}o[e.controlType]={name:e.delegate,requiredLibraries:e.requiredLibraries,delegateType:e.delegateType,controlType:e.controlType,payload:e.payload}};function g(e){return e?{...e,modelType:e.modelType||e.payload?.modelType,instance:t(e.instance,["getPropertyInfo","getRepresentedProperties"])}:undefined}n.getReadDelegateForControl=async function(e,t,r){let n=d(e,r);let a=t.getFlexDelegate(e);[a,n]=await u(e,t,[a,n]);return a?.instance.getPropertyInfo?g(a):g(n)};function p(e,r){return e?{...e,controlType:e.controlType||r.getMetadata?.().getName(),instance:t(e.instance,["createLabel","createControlForProperty","createLayout"])}:undefined}n.getWriteDelegateForControl=async function(e,t){let r=await c(e,t);let n=t.getFlexDelegate(e);[n,r]=await u(e,t,[n,r]);return n?.instance.createLabel||n?.instance.createLayout?p(n,e):p(r,e)};n.clear=function(){a={};o={};i={}};n.registerAddXMLAdjustFragmentHandler=function(e){i[e.key]=e.handler};n.getAddXMLAdjustFragmentHandlers=function(){return i};return n});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes", [],function(){"use strict";return{getChangeTypes(){return["appdescr_ovp_addNewCard","appdescr_ovp_removeCard","appdescr_ovp_changeCard","appdescr_app_addNewInbound","appdescr_app_changeInbound","appdescr_app_setInbounds","appdescr_app_removeInbound","appdescr_app_removeAllInboundsExceptOne","appdescr_app_addNewOutbound","appdescr_app_changeOutbound","appdescr_app_removeOutbound","appdescr_app_addNewDataSource","appdescr_app_changeDataSource","appdescr_app_removeDataSource","appdescr_app_addAnnotationsToOData","appdescr_app_addTechnicalAttributes","appdescr_app_removeTechnicalAttributes","appdescr_app_setTitle","appdescr_app_setSubTitle","appdescr_app_setShortTitle","appdescr_app_setDescription","appdescr_app_setInfo","appdescr_app_setDestination","appdescr_app_setKeywords","appdescr_app_setAch","appdescr_app_addCdsViews","appdescr_app_removeCdsViews","appdescr_flp_setConfig","appdescr_ui5_addNewModelEnhanceWith","appdescr_ui5_removeModel","appdescr_ui5_replaceComponentUsage","appdescr_ui5_setMinUI5Version","appdescr_smb_addNamespace","appdescr_smb_changeNamespace","appdescr_ui_generic_app_setMainPage","appdescr_ui_setIcon","appdescr_ui_setDeviceTypes","appdescr_ui5_addLibraries","appdescr_ui5_addNewModel","appdescr_app_addAnnotationsToOData","appdescr_ui5_addComponentUsages","appdescr_ui5_setFlexExtensionPointEnabled","appdescr_url_setUri","appdescr_fiori_setRegistrationIds","appdescr_card","appdescr_card_designtime","appdescr_fiori_setAbstract","appdescr_fe_changePageConfiguration","appdescr_ui5_changeModel","appdescr_ui_generic_app_addNewObjectPage","appdescr_ui_generic_app_changePageConfiguration","appdescr_fe_addNewPage"]},getCondensableChangeTypes(){return["appdescr_app_setTitle","appdescr_app_setInfo","appdescr_app_setShortTitle","appdescr_app_setSubTitle","appdescr_app_setDescription","appdescr_app_setDestination","appdescr_app_setKeywords","appdescr_app_setAch","appdescr_ui_setIcon","appdescr_ui_setDeviceTypes","appdescr_ui_setIcon","appdescr_ui_setDeviceTypes","appdescr_fiori_setRegistrationIds","appdescr_smb_changeNamespace"]}}});
/*!
* OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/fl/apply/_internal/changeHandlers/ChangeHandlerRegistration", ["sap/ui/core/Lib","sap/ui/fl/apply/_internal/changeHandlers/ChangeHandlerStorage","sap/ui/fl/changeHandler/AddXML","sap/ui/fl/changeHandler/AddXMLAtExtensionPoint","sap/ui/fl/changeHandler/HideControl","sap/ui/fl/changeHandler/MoveControls","sap/ui/fl/changeHandler/MoveElements","sap/ui/fl/changeHandler/PropertyBindingChange","sap/ui/fl/changeHandler/PropertyChange","sap/ui/fl/changeHandler/StashControl","sap/ui/fl/changeHandler/UnhideControl","sap/ui/fl/changeHandler/UnstashControl"],function(e,n,a,r,t,i,o,s,l,d,g,h){"use strict";var u={hideControl:t,moveElements:o,moveControls:i,stashControl:d,unhideControl:g,unstashControl:h};var f={addXML:a,addXMLAtExtensionPoint:r,propertyBindingChange:s,propertyChange:l};var c={};function C(e,n){c[e]=n;n.catch(function(){}).then(function(){delete c[e]})}function H(e){return n.registerChangeHandlersForLibrary(e)}function p(e){if(e.getParameter("operation")==="add"){var n=e.getParameter("metadata");var a=n.sName;var r=n&&n.extensions&&n.extensions.flChangeHandlers;if(r){var t=H(r);C(a,t)}}}var v={getChangeHandlersOfLoadedLibsAndRegisterOnNewLoadedLibs(){var n=e.all();e.attachLibraryChanged(p);var a=[];Object.values(n).forEach(function(e){if(e.extensions&&e.extensions.flChangeHandlers){a.push(H(e.extensions.flChangeHandlers))}});return Promise.all(a)},waitForChangeHandlerRegistration(e){if(c[e]){return c[e].catch(function(){})}return Promise.resolve()},registerPredefinedChangeHandlers(){n.registerPredefinedChangeHandlers(u,f)},registerAnnotationChangeHandler(e){n.registerAnnotationChangeHandler(e)},getAnnotationChangeHandler(e){return n.getAnnotationChangeHandler(e)}};return v});
/*!
* OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/fl/apply/_internal/changeHandlers/ChangeHandlerStorage", ["sap/base/util/each","sap/base/Log","sap/ui/fl/Layer","sap/ui/fl/requireAsync"],function(e,n,r,t){"use strict";const a={};let o={};let l={};let i={};let s={};const c="defaultForAll";const u={VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:true,PUBLIC:false,USER:false};const f={VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:false,PUBLIC:false,USER:false};function h(e){if(!e.changeHandler){n.error("sap.ui.fl.registry.ChangeRegistryStorage: changeHandler required");return false}return true}async function g(e){if(typeof e.changeHandler==="string"){const n=await t(e.changeHandler.replace(/\./g,"/"));e.changeHandler=n}return e.changeHandler}function d(e,n){let r={};if(!n||!n.changeHandler){r.changeHandler=n}else{r=n}if(r.changeHandler==="default"){r.changeHandler=i.defaultChangeHandlers[e]}else if(Object.keys(i.developerChangeHandlers||{}).includes(e)){throw Error(`You can't use a custom change handler for the following Developer Mode change type: ${e}. Please use 'default' instead.`)}return r}function y(n){l={};e(n,function(e,n){const r={controlType:"defaultActiveForAll",changeHandler:n,layers:{...f},changeType:e};l[e]=r})}function p(n,r,t){t=d(r,t);const a={...u};if(t.layers){e(t.layers,function(e,n){if(a[e]===undefined){throw Error(`The Layer '${e}' is not supported. Please only use supported layers`)}a[e]=n})}const o={controlType:n,changeHandler:t.changeHandler,layers:a,changeType:r};return h(o)?o:undefined}function C(e,n,r){const t=p(e,n,r);if(t){o[e]||={};o[e][n]=t}}function H(r,a){let o=Promise.resolve(a);const l="ChangeHandlerStorage.registerChangeHandlersForControl.skip_next_then";if(typeof a==="string"){o=new Promise(e=>{setTimeout(()=>{t(`${a}.flexibility`).then(e).catch(function(t){n.error(`Flexibility change handler registration failed.\nControlType: ${r}\n${t.message}`);e(l)})},0)})}return o.then(function(n){if(n!==l){e(n,function(e,n){C(r,e,n)})}}).catch(function(e){n.error(e.message)})}function E(e,n,t){const a=o[e]&&o[e][n]||l[n];if(!a){throw Error("No Change handler registered for the Control and Change type")}t=t===r.PUBLIC?r.USER:t;if(!a.layers[t]){throw Error(`Change type ${n} not enabled for layer ${t}`)}return a}function T(e,r,a,o){const l=o.getChangeHandlerModulePath(a);if(typeof l!=="string"){return Promise.resolve(undefined)}return t(l).then(function(n){const t=n[e];if(t){return p(r,e,t)}}).catch(function(e){n.error(`Flexibility registration for control ${o.getId(a)} failed to load module ${l}\n${e.message}`)})}a.getChangeHandler=function(e,n,r,t,a){return T(e,n,r,t).then(function(r){const t=r||E(n,e,a);return g(t)}).then(function(e){if(typeof e.completeChangeContent!=="function"||typeof e.applyChange!=="function"||typeof e.revertChange!=="function"){throw new Error("The ChangeHandler is either not available or does not have all required functions")}return e})};a.registerPredefinedChangeHandlers=function(e,n){i.defaultChangeHandlers=e;i.developerChangeHandlers=n;y(n)};a.registerChangeHandlersForLibrary=function(n){const r=[];e(n,function(e,n){r.push(H(e,n))});return Promise.all(r)};a.clearAll=function(){o={};l={};i={};s={}};a.registerChangeHandlersForControl=function(e,n){return H(e,n)};a.registerAnnotationChangeHandler=function(e){const n=e.isDefaultChangeHandler?c:e.changeType;s[n]={changeHandler:e.changeHandler}};a.getAnnotationChangeHandler=function(e){const n=s[e.changeType]||s[c];if(!n){throw Error("No Annotation Change handler registered for the Change type and Model type")}return g(n)};return a});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/Applier", ["sap/base/Log","sap/base/strings/formatMessage","sap/ui/core/Element","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/apply/_internal/flexState/FlexObjectState","sap/ui/fl/Utils"],function(e,n,t,o,r,a,i,s,c){"use strict";let l=c.FakePromise?new c.FakePromise:Promise.resolve();const p={};const d={};function g(t,o,r,a){const i=n(o.join(" "),r);e[t](i,a||"")}async function f(e,n){const t=e.getSelector&&e.getSelector();if(!t||!t.id&&!t.name){throw Error("No selector in change found or no selector ID.")}function o(e){if(c.indexOfObject(n.failedSelectors,e)>-1){throw Error("A change depending on that control already failed, so the current change is skipped")}}const r=await n.modifier.bySelectorTypeIndependent(t,n.appComponent,n.view);if(!r){throw Error("A flexibility change tries to change a nonexistent control.")}o(t);const a=e.getDependentControlSelectorList();a.forEach(e=>{const t=n.modifier.bySelector(e,n.appComponent,n.view);if(!t){throw new Error("A dependent selector control of the flexibility change is not available.")}o(e)});return r}function u(e){return e.modifier.targets==="xmlTree"}function h(e,n,t,o){const i=a.getControlIfTemplateAffected(n,e,t).control;const c=t.modifier;const l=i&&!!r.getAppliedCustomDataValue(i,n,c);const p=i&&r.hasChangeApplyFinishedCustomData(i,n,c);const d=n.isApplyProcessFinished();if(d&&!p){if(!o){s.copyDependenciesFromCompleteDependencyMap(n,t.appComponent)}n.setInitialApplyState()}else if(!d&&p){if(l){n.setRevertData(r.getParsedRevertDataFromCustomData(i,n,c));n.markSuccessful()}else{n.markFailed()}}else if(d&&p){n.markSuccessful()}}function y(e,n){if(u(n)&&e.getJsOnly()){const n="Change cannot be applied in XML. Retrying in JS.";e.setInitialApplyState();throw Error(n)}}async function m(e,n,o,a){if(o instanceof t){n.control=o}if(n.control){await a.modifier.updateAggregation(n.originalControl,e.getContent().boundAggregation)}await r.addAppliedCustomData(n.control,e,a,u(a));const i={success:true};e.markSuccessful(i);return i}async function C(e,n,t,o){const a=u(o);const i={success:false,error:e};const s=n.getId();const c="Change ''{0}'' could not be applied.";const l=e instanceof Error;const p=r.getCustomDataIdentifier(false,l,a);switch(p){case r.notApplicableChangesCustomDataKey:g("info",[c,e.message],[s]);break;case r.failedChangesCustomDataKeyXml:g("warning",[c,"Merge error detected while processing the XML tree."],[s],e.stack);break;case r.failedChangesCustomDataKeyJs:g("error",[c,"Merge error detected while processing the JS control tree."],[s],e.stack);break;default:}await r.addFailedCustomData(t.control,n,o,p);if(a){n.setInitialApplyState()}else{n.markFailed(i)}return i}function A(n,t){const o=t.getChangeType();const r=t.getSelector().id;const a=`${t.getNamespace()+t.getId()}.${t.getFileType()}`;let i="A flexibility change could not be applied.";i+="\nThe displayed UI might not be displayed as intended.";if(n.message){i+=`\n   occurred error message: '${n.message}'`}i+=`\n   type of change: '${o}'`;i+=`\n   LRep location of the change: ${a}`;i+=`\n   id of targeted control: '${r}'.`;e.warning(i,undefined,"sap.ui.fl.apply._internal.changes.Applier")}function w(e,n,t){const r={appComponent:t,modifier:o};const a=o.bySelector(e.originalSelectorToBeAdjusted,t);let i=n.getBindingInfo(e.getContent().boundAggregation).template;if(a.getParent()){const e=[];let n=a;do{e.push({aggregation:n.sParentAggregationName,index:n.getParent().getAggregation(n.sParentAggregationName).indexOf(n)});n=n.getParent()}while(n.getParent());e.reverse();e.forEach(e=>{i=i.getAggregation(e.aggregation)[e.index]})}e.addDependentControl(i,"originalSelector",r)}function S(e,n,t){let o=e.findIndex(e=>e.handler===n);if(o<0){o=e.length;e.push({handler:n,controls:[]})}if(!e[o].controls.includes(t)){e[o].controls.push(t)}}async function b(e,n,t,o){const r=[];const a=e.getId();const s=t.mChanges[a]||[];let l;if(t.mControlsWithDependencies[a]){i.removeControlsDependencies(t,a);l=true}s.forEach(s=>{if(s.originalSelectorToBeAdjusted){w(s,e,o);delete s.originalSelectorToBeAdjusted}if(s._ignoreOnce){delete s._ignoreOnce}else if(s.isApplyProcessFinished()){i.resolveDependenciesForChange(t,s.getId(),a)}else if(!t.mDependencies[s.getId()]){r.push(async()=>{await d.applyChangeOnControl(s,e,n);i.resolveDependenciesForChange(t,s.getId(),a)})}else{const o=d.applyChangeOnControl.bind(d,s,e,n);i.addChangeApplyCallbackToDependency(t,s.getId(),o)}});if(s.length||l){await c.execPromiseQueueSequentially(r);await i.processDependentQueue(t,o,a)}p[a].shift().resolveFunction()}d.addPreConditionForInitialChangeApplying=function(e){l=l.then(()=>e)};d.applyChangeOnControl=async function(e,n,t){const o=a.getControlIfTemplateAffected(e,n,t);try{let n;try{n=t.changeHandler||await a.getChangeHandler({flexObject:e,control:o.control,controlType:o.controlType,modifier:t.modifier})}catch(n){return C(n,e,o,t)}y(e,t);if(e.hasApplyProcessStarted()){const n=await e.addPromiseForApplyProcessing();e.markSuccessful();return n}if(!e.isApplyProcessFinished()){e.startApplying();try{const r=await n.applyChange(e,o.control,t);return m(e,o,r,t)}catch(n){return C(n,e,o,t)}}const r={success:true};e.markSuccessful(r);return r}catch(e){return{success:false,error:e}}};d.applyMultipleChanges=async function(e,n){n.modifier=o;for(const t of e){const e=o.bySelector(t.getSelector(),n.appComponent);const r=s.getLiveDependencyMap(n.reference);if(e){h(e,t,n,true);if(!t.isApplyProcessFinished()&&!n.skipSetQueued){t.setQueuedForApply()}let o;try{o=await d.applyChangeOnControl(t,e,n)}catch(e){o={success:false}}if(o.success&&!n.skipSetQueued){i.addRuntimeChangeToMap(t,n.appComponent,r)}}else{i.addChangeAndUpdateDependencies(t,n.appComponent.getId(),r)}}};d.applyAllChangesForControl=async function(e,n,t){const r=s.getLiveDependencyMap(n);const a=t.getId();const i=r.mChanges[a]||[];const d={modifier:o,appComponent:e,view:c.getViewForControl(t)};if(p[a]?.length){await p[a][p[a].length-1].promise}i.forEach(e=>{h(t,e,d);if(!e.isApplyProcessFinished()&&!e._ignoreOnce){e.setQueuedForApply()}});p[a]||=[];const g={};g.promise=new Promise(e=>{g.resolveFunction=e});p[a].push(g);l=l.then(b.bind(undefined,t,d,r,e));return l};d.applyAllChangesForXMLView=async function(n,t){if(!Array.isArray(t)){const o=`No list of changes was passed for processing the flexibility on view: ${n.view}.`;e.error(o,undefined,"sap.ui.fl.apply._internal.changes.Applier");t=[]}const o=[];n.failedSelectors=[];for(const e of t){try{const t=await f(e,n);const r=a.getControlIfTemplateAffected(e,t,n);n.changeHandler=await a.getChangeHandler({flexObject:e,control:r.control,controlType:r.controlType,modifier:n.modifier});e.setQueuedForApply();h(t,e,n,true);if(!e.isApplyProcessFinished()){if(typeof n.changeHandler.onAfterXMLChangeProcessing==="function"){S(o,n.changeHandler,t)}const r=await d.applyChangeOnControl(e,t,n);if(!r.success){throw Error(r.error)}}}catch(t){e.getDependentSelectorList().forEach(e=>{if(c.indexOfObject(n.failedSelectors,e)===-1){n.failedSelectors.push(e)}});A(t,e)}}delete n.failedSelectors;o.forEach(t=>{t.controls.forEach(o=>{try{t.handler.onAfterXMLChangeProcessing(o,n)}catch(n){e.error("Error during onAfterXMLChangeProcessing",n)}})});return n.view};return d});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/FlexCustomData", ["sap/base/Log","sap/ui/core/CustomData"],function(t){"use strict";const a={};a.appliedChangesCustomDataKey="sap.ui.fl.appliedChanges";a.failedChangesCustomDataKeyJs="sap.ui.fl.failedChanges.js";a.failedChangesCustomDataKeyXml="sap.ui.fl.failedChanges.xml";a.notApplicableChangesCustomDataKey="sap.ui.fl.notApplicableChanges";function e(t,a,e,s){const o=s.modifier.getCustomDataInfo(t,a);if(!o.customData){return s.modifier.createAndAddCustomData(t,a,e,s.appComponent)}return Promise.resolve(s.modifier.setProperty(o.customData,"value",e))}function s(t,a){const e=a.getRevertData();if(t&&e!==undefined){return JSON.stringify(e)}return"true"}a.getAppliedCustomDataValue=function(t,e,s){const o=s.getCustomDataInfo(t,a._getCustomDataKey(e,a.appliedChangesCustomDataKey));return o.customDataValue};a.getParsedRevertDataFromCustomData=function(e,s,o){const u=a.getAppliedCustomDataValue(e,s,o);try{return u&&JSON.parse(u)}catch(a){t.error("Could not parse revert data from custom data",u);return undefined}};a.hasChangeApplyFinishedCustomData=function(t,e,s){const o=s.getCustomDataInfo(t,a._getCustomDataKey(e,a.appliedChangesCustomDataKey));if(o.customData){return true}const u=s.getCustomDataInfo(t,a._getCustomDataKey(e,a.failedChangesCustomDataKeyJs));if(u.customData){return true}const n=s.getCustomDataInfo(t,a._getCustomDataKey(e,a.notApplicableChangesCustomDataKey));if(n.customData){return true}return false};a.addAppliedCustomData=function(t,o,u,n){const r=s(n,o);const i=a._getCustomDataKey(o,a.appliedChangesCustomDataKey);return e(t,i,r,u)};a.addFailedCustomData=function(t,s,o,u){const n=a._getCustomDataKey(s,u);return e(t,n,"true",o)};a.destroyAppliedCustomData=function(t,e,s){const o=a._getCustomDataKey(e,a.appliedChangesCustomDataKey);const u=s.getCustomDataInfo(t,o);if(u.customData){s.destroy(u.customData)}};a.getCustomDataIdentifier=function(t,e,s){if(t){return a.appliedChangesCustomDataKey}if(!e){return a.notApplicableChangesCustomDataKey}if(s){return a.failedChangesCustomDataKeyXml}return a.failedChangesCustomDataKeyJs};a._getCustomDataKey=function(t,a){return`${a}.${t.getId()}`};return a});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/Reverter", ["sap/base/Log","sap/ui/fl/apply/_internal/changes/Applier","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/apply/_internal/flexState/FlexObjectState","sap/ui/fl/Utils"],function(e,t,r,n,o,i,a){"use strict";const s={};async function l(e){if(!e.isApplyProcessFinished()&&e.hasApplyProcessStarted()){const t=await e.addPromiseForApplyProcessing();if(t&&t.error){e.markRevertFinished(t.error);throw Error(t.error)}}}function c(e,t){const r=e.getId();const n=i.getLiveDependencyMap(t);o.removeChangeFromMap(n,r);o.removeChangeFromDependencies(n,r)}async function p(e,t,n,o){const i=await s.revertChangeOnControl(e,t,n);r.destroyAppliedCustomData(i||t,e,o.modifier);if(i){c(e,o.reference)}}s.revertChangeOnControl=async function(t,r,o){const i=n.getControlIfTemplateAffected(t,r,o);try{const e=await n.getChangeHandler({flexObject:t,control:i.control,controlType:i.controlType,modifier:o.modifier});await l(t);if(t.isSuccessfullyApplied()){t.startReverting()}else{throw Error("Change was never applied")}await e.revertChange(t,i.control,o);i.control=o.modifier.bySelector(t.getSelector(),o.appComponent,o.view);if(i.bTemplateAffected){await o.modifier.updateAggregation(i.control,t.getContent().boundAggregation)}t.markRevertFinished();return i.control}catch(r){const n=`Change could not be reverted: ${r.message}`;e.error(n);t.markRevertFinished(n);return false}};s.revertMultipleChanges=function(e,r){const n=[];e.forEach(e=>{if(!r.skipSetQueued){e.setQueuedForRevert()}n.push(()=>{const t=e.getSelector&&e.getSelector();const n=r.modifier.bySelector(t,r.appComponent);if(!n){c(e,r.reference);return a.FakePromise?new a.FakePromise:Promise.resolve()}const o={modifier:r.modifier,appComponent:r.appComponent,view:a.getViewForControl(n)};return p(e,n,o,r)})});const o=a.execPromiseQueueSequentially(n);t.addPreConditionForInitialChangeApplying(o);return o};return s});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/Utils", ["sap/ui/fl/apply/_internal/changeHandlers/ChangeHandlerRegistration","sap/ui/fl/apply/_internal/changeHandlers/ChangeHandlerStorage","sap/ui/fl/apply/_internal/changes/descriptor/ApplyStrategyFactory","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/flexObjects/AnnotationChange","sap/ui/fl/apply/_internal/flexObjects/AppDescriptorChange","sap/ui/fl/apply/_internal/flexObjects/VariantChange","sap/ui/fl/apply/_internal/flexObjects/VariantManagementChange","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/Utils"],function(e,t,n,a,r,l,o,i,c,s){"use strict";function f(e,t){if(t||e.hasApplyProcessStarted()){return false}return true}function p(e){return e.flexObject instanceof o||e.flexObject instanceof i}const g={getControlIfTemplateAffected(e,t,n){const a=n.modifier;const r={originalControl:t};const l=e.getOriginalSelector();if(e.getContent().boundAggregation&&l){r.control=a.bySelector(l,n.appComponent,n.view);r.controlType=a.getControlType(r.control);r.bTemplateAffected=true}else{r.control=t;r.controlType=a.getControlType(t);r.bTemplateAffected=false}return r},async getChangeHandler(a){const o=a.changeType||a.flexObject?.getChangeType();if(a.flexObject instanceof l||a.appDescriptorChange){const e=a.strategy||await n.getRuntimeStrategy();try{const t=await e.registry();return await(t[o]?.())}catch(t){e.handleError(t)}}else if(a.flexObject instanceof r||a.annotationChange){return t.getAnnotationChangeHandler({changeType:o})}else if(p(a)){return c.getChangeInformationProvider(a.flexObject)}else if(a.control){const n=await a.modifier.getLibraryName(a.control);await e.waitForChangeHandlerRegistration(n);const r=a.layer||a.flexObject?.getLayer();return t.getChangeHandler(o,a.controlType,a.control,a.modifier,r)}return undefined},checkIfDependencyIsStillValid(e,t,n,r){const l=s.getChangeFromChangesMap(n.mChanges,r);if(!l){return false}const o=t.bySelector(l.getSelector(),e);if(!o){return true}const i=a.hasChangeApplyFinishedCustomData(o,l,t);return f(l,i)},isChangeInView(e,t){const n=e.modifier;const a=e.appComponent;const r=t.getSelector();if(!r){return false}if(r.viewSelector){const t=n.getControlIdBySelector(r.viewSelector,a);return t===e.viewId}const l=r.id;if(l){let n;if(t.getSelector().idIsLocal){if(a){n=a.getLocalId(e.viewId)}}else{n=e.viewId}let r=0;let o;do{r=l.indexOf("--",r);o=l.slice(0,r);r++}while(o!==n&&r>0);return o===n}return false}};return g});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/ApplyStrategyFactory", ["sap/ui/fl/requireAsync","sap/base/Log"],function(r,e){"use strict";function t(r,e){const n=Array.isArray(r)?[...r]:{...r};Object.entries(n).forEach(([r,s])=>{if(typeof s==="object"&&s!==null){n[r]=t(s,e)}else if(typeof s==="string"){n[r]=s.replaceAll(/{{.*?}}/g,r=>{const t=r.slice(2,-2);const n=e[t];return n||r})}});return n}var n={registry(){return r("sap/ui/fl/apply/_internal/changes/descriptor/Registration")},handleError(r){e.error(r)},processTexts(r,n){const s={};Object.entries(n).forEach(([r,{value:t}])=>{if(t[""]){s[r]=t[""];return}e.error("Text change has to contain default language")});return t(r,s)}};var s={getRuntimeStrategy(){return n}};return s});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/controlVariants/URLHandler", ["sap/base/util/deepEqual","sap/base/util/isEmptyObject","sap/base/util/merge","sap/base/util/ObjectPath","sap/base/Log","sap/ui/base/ManagedObjectObserver","sap/ui/core/Component","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagerApply","sap/ui/thirdparty/hasher"],function(e,a,t,r,n,o,i,s,l,c,p){"use strict";var m={};var d={};function u(e,a){var t=[];return e.reduce(function(e,r){var n=a.getVariantManagementReference(r).variantManagementReference;if(n){if(t.includes(n)){e.updateRequired=true;return e}t.push(n)}if(n&&a.oData[n].currentVariant!==r){e.updateRequired=true;if(a.oData[n].currentVariant!==a.oData[n].defaultVariant){e.parameters.push(a.oData[n].currentVariant)}}else{e.parameters.push(r)}return e},{updateRequired:false,parameters:[]})}function f(e,a){const t=e.getUShellService("URLParsing")?.parseShellHash(a||p.getHash());var n=r.get(["params",s.VARIANT_TECHNICAL_PARAMETER],t);if(Array.isArray(n)&&n.length===1){n=n[0].split(",")}if(n){var o=u(n,e);if(o.updateRequired){d.update({updateURL:!e._bDesignTimeMode,parameters:o.parameters,updateHashEntry:true,model:e})}}}function A(e,a){try{const t=e.getUShellService("URLParsing");if(t){f(e,a)}}catch(e){n.error(e.message)}const t=e.getUShellService("ShellNavigationInternal");return t?.NavigationFilterStatus.Continue}function R(e){const a=e.getUShellService("ShellNavigationInternal");if(!m[e.sFlexReference]){m[e.sFlexReference]=A.bind(null,e);if(a){a.registerNavigationFilter(m[e.sFlexReference])}}}function h(e){const a=e.getUShellService("ShellNavigationInternal");if(a){a.unregisterNavigationFilter(m[e.sFlexReference]);delete m[e.sFlexReference]}}function v(a){const t=a.model;const r=t.getUShellService("URLParsing");const o=t.getUShellService("Navigation");const i=r?.parseShellHash(p.getHash());if(i?.params){const l={...i.params};const c=t.oAppComponent?.getComponentData?.()?.technicalParameters;if(!c){n.warning("Component instance not provided, so technical parameters in component data and browser history remain unchanged")}if(a.parameters.length===0){delete i.params[s.VARIANT_TECHNICAL_PARAMETER];if(c){delete c[s.VARIANT_TECHNICAL_PARAMETER]}}else{i.params[s.VARIANT_TECHNICAL_PARAMETER]=[a.parameters.toString()];if(c){c[s.VARIANT_TECHNICAL_PARAMETER]=[a.parameters.toString()]}}if(a.silent){p.changed.active=false;p.replaceHash(r.constructShellHash(i));p.changed.active=true}else if(!e(l,i.params)){o.navigate({target:{semanticObject:i.semanticObject,action:i.action,context:i.contextRaw},params:i.params,appSpecificRoute:i.appSpecificRoute,writeHistory:false})}}}function g(e){var r={index:-1};var n=e.model;var o=n.getUShellService("URLParsing");var i=o?.parseShellHash(p.getHash()).params;if(i){r.parameters=[];if(n._bDesignTimeMode){i[s.VARIANT_TECHNICAL_PARAMETER]=d.getStoredHashParams(e)}if(Array.isArray(i[s.VARIANT_TECHNICAL_PARAMETER])){if(i[s.VARIANT_TECHNICAL_PARAMETER].length>1){i[s.VARIANT_TECHNICAL_PARAMETER]=i[s.VARIANT_TECHNICAL_PARAMETER].map(decodeURIComponent)}else if(i[s.VARIANT_TECHNICAL_PARAMETER].length===1){const e=i[s.VARIANT_TECHNICAL_PARAMETER][0];const a=e&&decodeURIComponent(e);i[s.VARIANT_TECHNICAL_PARAMETER]=a?a.split(","):[]}i[s.VARIANT_TECHNICAL_PARAMETER].some(function(t,o){if(!a(n.getVariant(t,e.vmReference))){r.index=o;return true}return false})}}return t(r,i&&i[s.VARIANT_TECHNICAL_PARAMETER]&&{parameters:i[s.VARIANT_TECHNICAL_PARAMETER]})}function C(e){var a=e.getUShellService("URLParsing");var t=a?.parseShellHash(p.getHash());return t?.params&&t.params[s.VARIANT_TECHNICAL_PARAMETER]}d.variantTechnicalParameterName="sap-ui-fl-control-variant-id";d.initialize=function(e){var a=e.model;d.attachHandlers(e);a._oHashData={hashParams:[],controlPropertyObservers:[],variantControlIds:[]};f(a)};d.updateVariantInURL=function(e){var a=d.removeURLParameterForVariantManagement(e);if(!a.parameters){return}var t=a.parameters||[];var r=a.index;var n=e.newVReference===e.model.oData[e.vmReference].defaultVariant;if(!n){if(r===-1){t=t.concat([e.newVReference])}else{t=t.slice(0,r).concat([e.newVReference],t.slice(r))}}if(!n||r>-1){d.update({parameters:t,updateURL:!e.model._bDesignTimeMode,updateHashEntry:true,model:e.model})}};d.removeURLParameterForVariantManagement=function(e){var a=g(e);if(a.index>-1){a.parameters.splice(a.index,1)}return a};d.attachHandlers=function(e){async function a(){await l.waitForAllVariantSwitches(e.model.sFlexReference);e.model._oHashData.controlPropertyObservers.forEach(function(e){e.destroy()});h(e.model);e.model.destroy();e.model.oComponentDestroyObserver.unobserve(e.model.oAppComponent,{destroy:true});e.model.oComponentDestroyObserver.destroy()}R(e.model);if(!e.model.oComponentDestroyObserver&&e.model.oAppComponent instanceof i){e.model.oComponentDestroyObserver=new o(a.bind(null));e.model.oComponentDestroyObserver.observe(e.model.oAppComponent,{destroy:true})}};d.registerControl=function(e){if(e.updateURL){e.model._oHashData.variantControlIds.push(e.vmReference)}};d.update=function(e){if(!Array.isArray(e.parameters)){n.info("Variant URL parameters could not be updated since invalid parameters were received");return}if(e.updateURL){v(e)}if(e.updateHashEntry){e.model._oHashData.hashParams=e.parameters}};d.getStoredHashParams=function(e){return Array.prototype.slice.call(e.model._oHashData.hashParams)};d.handleModelContextChange=function(e){var a="modelContextChange";function t(a,t){var r=a.getSource().getVariantManagementReference();var n=t.model._oHashData.variantControlIds;var o=n.indexOf(r);if(o>-1){n.slice(o).forEach(function(a){if(g({vmReference:a,model:e.model}).index===-1){const t=s.getVariantManagementControlByVMReference(a,e.appComponent);c.updateCurrentVariant({newVariantReference:t.getDefaultVariantKey(),vmControl:t,appComponent:e.appComponent})}})}}var r=new o(function(r){if(r.current===true&&r.old===false){r.object.attachEvent(a,{model:e.model},t)}else if(r.current===false&&r.old===true){r.object.detachEvent(a,t)}});r.observe(e.vmControl,{properties:["resetOnContextChange"]});e.model._oHashData.controlPropertyObservers.push(r);if(e.vmControl.getResetOnContextChange()!==false){e.vmControl.attachEvent(a,{model:e.model},t)}};d.clearAllVariantURLParameters=function(e){if(C(e.model)){d.update({updateURL:true,parameters:[],updateHashEntry:false,model:e.model})}};return d});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/controlVariants/Utils", ["sap/ui/core/Element","sap/ui/core/StaticArea","sap/ui/fl/Utils"],function(e,t,r){"use strict";function n(e,t){if(!t){return undefined}if(e.indexOf(t.getId())>-1){return t.getId()}return n(e,t.getParent())}function a(e,n){var a=r.getAppComponentForControl(e);var o=a.getRootControl();var i=[];if(!n&&o.getDomRef()){i=Array.from(o.getDomRef().querySelectorAll(".sapUiFlVarMngmt"))}if(n||i.length===0){i=Array.from(t.getDomRef().querySelectorAll(".sapUiFlVarMngmt"))}return i.map(function(e){return e.id})}var o={DEFAULT_AUTHOR:"SAP",VARIANT_TECHNICAL_PARAMETER:"sap-ui-fl-control-variant-id",compareVariants(e,t){if(e.getName().toLowerCase()<t.getName().toLowerCase()){return-1}else if(e.getName().toLowerCase()>t.getName().toLowerCase()){return 1}return 0},getIndexToSortVariant(e,t){var r=e.length;e.some(function(e,n){if(o.compareVariants(t.instance,e.instance)<0){r=n;return true}});return r},getRelevantVariantManagementControlId(t,r,o){var i={};if(!r||!r.length){r=a(t,o)}var u=r.reduce(function(t,r){var n=e.getElementById(r);if(n){var a=n.getFor();a.forEach(function(e){i[e]=r});t=t.concat(a)}return t},[]);var g=n(u,t);return i[g]},belongsToVariantManagement(e){var t=a(e);return!!o.getRelevantVariantManagementControlId(e,t)},getAllVariantManagementControlIds(e){return a(e)},getVariantManagementControlByVMReference(t,r){const n=r.byId(t)?r.createId(t):t;return e.getElementById(n)}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/extensionPoint/Registry", ["sap/ui/base/ManagedObjectObserver","sap/ui/fl/Utils"],function(e,t){"use strict";var n={};var r={};var a={};var o={};var i={};function g(e){var t=e.object.getId();a[t].forEach(function(e){o[e.view.getId()][e.name].bParentIsDestroyed=true})}function s(e){var n=e.object.getId();a[n].forEach(function(n){var r=n.aggregationName;if(r===e.name){var a=t.getAggregation(e.object,r);var o=[].concat(a||[]).map(function(e){return e.getId()});if(e.mutation==="insert"){if(o.indexOf(e.child.getId())<n.index){n.index++}}else{if(Array.isArray(n.defaultContent)){n.defaultContent=n.defaultContent.filter(function(t){return t.getId()!==e.child.getId()})}if(Array.isArray(n.createdControls)){n.createdControls=n.createdControls.filter(function(t){return t!==e.child.getId()})}if(n.aggregation.indexOf(e.child.getId())<n.index){n.index--}}n.aggregation=o}})}function d(e){if(e.type==="destroy"){g(e)}else{s(e)}}function c(t,n){var a=t.getId();if(!r[a]){var o=new e(d.bind(this));o.observe(t,{aggregations:[n],destroy:true});r[a]={observer:o,aggregations:[n]}}else{var i=r[a].observer.isObserved(t,{aggregations:[n]});if(!i){r[a].aggregations.push(n);r[a].observer.observe(t,{aggregations:r[a].aggregations,destroy:true})}}}function f(e,n,r){var g=r.view.getId();var s=t.getAggregation(e,n);var d=[].concat(s||[]).map(function(e){return e.getId()});var c=e.getId();a[c]||=[];o[g]||={};r.aggregation=d;if(i[g]&&i[g][r.name]){r.createdControls=i[g][r.name];delete i[g][r.name]}a[c].push(r);o[g][r.name]=r}n.registerExtensionPoint=function(e){var t=e.targetControl;var n=e.aggregationName;c(t,n);f(t,n,e)};n.getExtensionPointInfo=function(e,t){return o[t.getId()]&&o[t.getId()][e]};n.getExtensionPointInfoByViewId=function(e){return o[e]||{}};n.getExtensionPointInfoByParentId=function(e){return a[e]||[]};n.clear=function(){Object.keys(r).forEach(function(e){r[e].observer.disconnect();r[e].observer.destroy()});r={};a={};o={}};n.addCreatedControls=function(e,t,n){var r;if(o[t]&&o[t][e]){r=o[t][e].createdControls||[];o[t][e].createdControls=r.concat(n)}else{i[t]||={};r=i[t][e]||[];i[t][e]=r.concat(n)}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/AnnotationChange", ["sap/ui/fl/apply/_internal/flexObjects/FlexObject"],function(t){"use strict";var e=t.extend("sap.ui.fl.apply._internal.flexObjects.AnnotationChange",{metadata:{properties:{serviceUrl:{type:"string",defaultValue:""}}},constructor:function(...e){t.apply(this,e);this.setFileType("annotation_change")}});e.getMappingInfo=function(){return{...t.getMappingInfo(),serviceUrl:"selector.serviceUrl"}};e.prototype.getMappingInfo=function(){return e.getMappingInfo()};e.prototype.getValue=function(){return this.getText("annotationText")?this.getText("annotationText"):this.getContent().value};e.prototype.getIdForCondensing=function(){return this.getServiceUrl()};e.prototype.canBeCondensed=function(){return true};return e});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/AppDescriptorChange", ["sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes","sap/ui/fl/apply/_internal/flexObjects/FlexObject"],function(e,t){"use strict";var n=t.extend("sap.ui.fl.apply._internal.flexObjects.AppDescriptorChange",{metadata:{properties:{appDescriptorChange:{type:"boolean",defaultValue:true}}}});n.getMappingInfo=function(){return{...t.getMappingInfo(),appDescriptorChange:"appDescriptorChange"}};n.prototype.getMappingInfo=function(){return n.getMappingInfo()};n.prototype.getIdForCondensing=function(){return`appDescriptor_${this.getFlexObjectMetadata().reference}`};n.prototype.canBeCondensed=function(){return e.getCondensableChangeTypes().includes(this.getChangeType())};n.prototype.getSelector=function(){return{}};n.prototype.isValidForDependencyMap=function(){return false};n.prototype.getVariantReference=function(){return undefined};return n});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/CompVariant", ["sap/base/util/restricted/_pick","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexObjects/Variant","sap/ui/fl/initial/_internal/Settings","sap/ui/fl/LayerUtils","sap/ui/fl/Layer","sap/ui/fl/Utils"],function(t,e,n,i,r,a,s){"use strict";var o=n.extend("sap.ui.fl.apply._internal.flexObjects.CompVariant",{metadata:{properties:{persisted:{type:"boolean",defaultValue:true},persistencyKey:{type:"string"}},aggregations:{revertData:{type:"sap.ui.base.ManagedObject",multiple:true,singularName:"revertData",defaultValue:[]}}},constructor:function(...t){const[e]=t;n.apply(this,t);this.setFileType("variant");if(!e.executeOnSelection){this.setExecuteOnSelection(!!(e.content?.executeOnSelect||e.content?.executeOnSelection))}const i=this.getVariantId()===o.STANDARD_VARIANT_ID||!!this.getContent()?.standardvariant;if(i){this.setFavorite(true);this.setStandardVariant(true)}else if(e.favorite!==undefined){this.setFavorite(!!e.favorite)}else if(e.layer===a.VENDOR||e.layer===a.CUSTOMER_BASE){this.setFavorite(true)}}});o.STANDARD_VARIANT_ID="*standard*";o.getMappingInfo=function(){return{...n.getMappingInfo(),persistencyKey:"selector.persistencyKey",standardVariant:"standardVariant",variantId:"variantId"}};o.prototype.getMappingInfo=function(){return o.getMappingInfo()};function p(t){var e=i.getInstanceOrUndef();var n=e?.getUserId();return!n||!t||n.toUpperCase()===t.toUpperCase()}function u(t,e,n){if(e){return t===e}else if(t===a.USER){return true}const s=i.getInstanceOrUndef();if(r.isSapUiLayerParameterProvided()){e=r.getCurrentLayer()}else{e||=s.getIsPublicLayerAvailable()?a.PUBLIC:a.CUSTOMER}const o=e!==a.PUBLIC||s.getIsVariantSharingEnabled();const u=t===e;const c=s.getIsKeyUser()||p(n)&&o;return u&&c}function c(t){return!t||s.getCurrentLanguage()===t}function l(t,e){var n=i.getInstanceOrUndef();if(!n){return true}if(!t||!e){return true}var r=n.getSystem();var a=n.getClient();return r===t&&e===a}o.prototype.getPackage=function(){return this.getFlexObjectMetadata().packageName};o.prototype.isVariant=function(){return true};o.prototype.isRenameEnabled=function(t){return!this.getStandardVariant()&&this.isEditEnabled(t)&&(!this.isTranslationEnabled()||c(this.getSupportInformation().originalLanguage))};o.prototype.isEditEnabled=function(t){var e=t&&r.isDeveloperLayer(t);var n=l(this.getSupportInformation().sourceSystem,this.getSupportInformation().sourceClient);var i=u(this.getLayer(),t,this.getOwnerId());return e||n&&i};o.prototype.isDeleteEnabled=function(t){var e=l(this.getSupportInformation().sourceSystem,this.getSupportInformation().sourceClient);return e&&u(this.getLayer(),t,this.getOwnerId())&&!this.getStandardVariant()};o.prototype.isTranslationEnabled=function(){return!r.isOverLayer(this.getLayer(),a.CUSTOMER)};o.prototype.storeFavorite=function(t){if(t!==this.getFavorite()){this.setState(e.LifecycleState.UPDATED);this.setFavorite(t)}};o.prototype.storeVisible=function(t){if(t!==this.getVisible()){this.setState(e.LifecycleState.UPDATED);this.setVisible(t)}};o.prototype.getOwnerId=function(){return this.getSupportInformation().user||""};o.prototype.storeContent=function(t){this.setContent(t)};o.prototype.storeExecuteOnSelection=function(t){if(t!==this.getExecuteOnSelection()){this.setState(e.LifecycleState.UPDATED);this.setExecuteOnSelection(t)}};o.prototype.storeName=function(t){this.setName(t)};o.prototype.storeContexts=function(t){this.setContexts(t);this.setState(e.LifecycleState.UPDATED)};o.prototype.cloneFileContentWithNewId=function(...t){var e=n.prototype.cloneFileContentWithNewId.apply(this,t);e.variantId=e.fileName;return e};return o});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/ControllerExtensionChange", ["sap/ui/fl/apply/_internal/flexObjects/FlexObject"],function(e){"use strict";var t=e.extend("sap.ui.fl.apply._internal.flexObjects.ControllerExtensionChange",{metadata:{properties:{controllerName:{type:"string"}}}});t.getMappingInfo=function(){return{...e.getMappingInfo(),controllerName:"selector.controllerName"}};t.prototype.getMappingInfo=function(){return t.getMappingInfo()};t.prototype.getSelector=function(){return{controllerName:this.getControllerName()}};t.prototype.getVariantReference=function(){return undefined};t.prototype.isValidForDependencyMap=function(){return false};t.prototype.setInitialApplyState=function(){};t.prototype.getModuleName=function(){return this.getFlexObjectMetadata().moduleName};return t});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/FlVariant", ["sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexObjects/Variant"],function(e,t){"use strict";var n=t.extend("sap.ui.fl.apply._internal.flexObjects.FlVariant",{metadata:{properties:{variantReference:{type:"string"},variantManagementReference:{type:"string"}}},constructor:function(...n){let[i,a]=n;if(typeof i!=="string"&&i!==undefined){a=i;i=a&&a.id}a.fileType="ctrl_variant";if(a.favorite===undefined){a.favorite=true}t.apply(this,n);if(!this.getName()&&a.content&&a.content.title){this.setName(a.content.title)}var r=this.getSupportInformation();if(this.getId()===this.getVariantManagementReference()){this.setStandardVariant(true);if(!r.user){r.user=e.DEFAULT_AUTHOR;this.setSupportInformation(r)}}}});n.getMappingInfo=function(){return{...t.getMappingInfo(),variantReference:"variantReference",variantManagementReference:"variantManagementReference"}};n.prototype.getMappingInfo=function(){return n.getMappingInfo()};n.prototype.cloneFileContentWithNewId=function(...e){var n=t.prototype.cloneFileContentWithNewId.apply(this,e);return n};return n});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/FlexObject", ["sap/base/util/deepClone","sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/restricted/_omit","sap/ui/base/ManagedObject","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/initial/_internal/Settings","sap/ui/fl/Layer","sap/ui/fl/Utils"],function(t,e,n,a,r,o,i,s,p,u){"use strict";var c=o.extend("sap.ui.fl.apply._internal.flexObjects.FlexObject",{metadata:{properties:{adaptationId:{type:"string"},state:{type:"string",defaultValue:i.LifecycleState.NEW},fileType:{type:"string",defaultValue:"change"},layer:{type:"string"},flexObjectMetadata:{type:"object",defaultValue:{}},supportInformation:{type:"object",defaultValue:{}},content:{type:"any",defaultValue:{}},texts:{type:"object",defaultValue:{}}}},constructor:function(...t){o.apply(this,t);var e=this.getFlexObjectMetadata();var n=e.reference;if(n){e.reference=n.endsWith(".Component")?n.replace(/\.Component(?!.*\.Component)/,""):n;e.namespace||=u.createNamespace({reference:n},this.getFileType());e.projectId||=n}this.setFlexObjectMetadata(e);var a=this.getSupportInformation();a.originalLanguage||=u.getCurrentLanguage();this.setSupportInformation(a)}});c.getMappingInfo=function(){return{"flexObjectMetadata.changeType":"changeType","flexObjectMetadata.reference":"reference","flexObjectMetadata.namespace":"namespace","flexObjectMetadata.creation":"creation","flexObjectMetadata.projectId":"projectId","flexObjectMetadata.packageName":"packageName","flexObjectMetadata.moduleName":"moduleName","supportInformation.generator":"support.generator","supportInformation.clonedFrom":"support.clonedFrom","supportInformation.service":"support.service","supportInformation.sourceSystem":"sourceSystem","supportInformation.sourceClient":"sourceClient","supportInformation.user":"support.user","supportInformation.sapui5Version":"support.sapui5Version","supportInformation.sourceChangeFileName":"support.sourceChangeFileName","supportInformation.compositeCommand":"support.compositeCommand","supportInformation.command":"support.command","supportInformation.oDataInformation":"oDataInformation","supportInformation.originalLanguage":"originalLanguage",adaptationId:"adaptationId",layer:"layer",fileType:"fileType",id:"fileName",content:"content",texts:"texts"}};c.prototype.getMappingInfo=function(){return c.getMappingInfo()};c.prototype.setContent=function(t,e){this.setProperty("content",t);if(!e){this.setState(i.LifecycleState.UPDATED)}return this};c.prototype.getFlexObjectMetadata=function(){return{...this.getProperty("flexObjectMetadata")}};c.prototype.getSupportInformation=function(){return{...this.getProperty("supportInformation")}};function f(t,e){if(!Object.values(i.LifecycleState).includes(t)){return false}if(e===i.LifecycleState.NEW&&t===i.LifecycleState.UPDATED){return false}return true}c.prototype.setState=function(t){var e=this.getState();if(e!==t&&f(t,e)){this._sPreviousState=e;this.setProperty("state",t)}return this};c.prototype.isPersisted=function(){return this.getState()===i.LifecycleState.PERSISTED};c.prototype.markForDeletion=function(){this.setState(i.LifecycleState.DELETED)};c.prototype.restorePreviousState=function(){if(this._sPreviousState){this.setState(this._sPreviousState);delete this._sPreviousState}};c.prototype.isChangeFromOtherSystem=function(){var t=this.getSupportInformation().sourceSystem;var e=this.getSupportInformation().sourceClient;if(!t||!e){return false}var n=s.getInstanceOrUndef();if(!n){return true}var a=n.getSystem();var r=n.getClient();if(!a||!r){return false}return t!==a||e!==r};c.prototype.isValidForDependencyMap=function(){return false};c.prototype.getNamespace=function(){return this.getFlexObjectMetadata().namespace};c.prototype.getChangeType=function(){return this.getFlexObjectMetadata().changeType};c.prototype.isUserDependent=function(){return this.getLayer()===p.USER};c.prototype.getText=function(t){var e=this.getTexts()[t]||{};return e.value||""};c.prototype.setText=function(t,e,n,a){const r={...this.getTexts()};const o={value:e};if(n){o.type=n}r[t]={...r[t],...o};this.setTexts(r);if(!a){this.setState(i.LifecycleState.UPDATED)}return this};c.prototype.setRequest=function(t){this._sRequest=t};c.prototype.getRequest=function(){return this._sRequest||""};c.prototype.getDefinition=function(){return this.convertToFileContent()};c.prototype.getCreation=function(){return this.getFlexObjectMetadata().creation};c.prototype.setCreation=function(t){var e=this.getFlexObjectMetadata();e.creation=t;this.setFlexObjectMetadata(e)};function l(t){return t.length?t.charAt(0).toUpperCase()+t.slice(1):t}function g(t){return typeof this[t]==="function"?this[t].bind(this):function(){throw new Error(`${t} is not a valid mutator`)}}function h(e){var n=e.split(".");n[0]=l(n[0]);var r=n.shift();var o=g.call(this,`get${r}`);var i=g.call(this,`set${r}`);return{getValue(){var e=t(o());if(n.length>0){return a.get(n,e)}return e},setValue:function(e){var r=t(o());if(n.length>0){a.set(n,e,r)}else{r=e}i(r);return this}.bind(this)}}c.prototype.convertToFileContent=function(){var t={};Object.entries(this.getMappingInfo()).forEach(function(e){var n=h.call(this,e[0]).getValue();if(n!==undefined){a.set(e[1],n,t)}}.bind(this));return t};function d(t,e){var n=h.call(this,t);var a=n.getValue();if(a!==e){n.setValue(e)}}c.mapFileContent=function(e,a){var r=Object.values(a);var o={};var i=function(t,e,s){var p=s?`${s}.${t}`:t;var u=r.indexOf(p);if(u>=0){var c=Object.keys(a)[u];o[c]=e}else if(n(e)){Object.entries(e).forEach(function(t){i(t[0],t[1],p)})}};Object.entries(t(e,15)).forEach(function(t){i(t[0],t[1])});return o};c.prototype.update=function(t){var e=r(t,["fileName"]);var n=c.mapFileContent(e,this.getMappingInfo());Object.entries(n).forEach(function(t){d.call(this,t[0],t[1])}.bind(this))};c.prototype.setResponse=function(t){if(!t||e(t)){return}this.update(t);this.setState(i.LifecycleState.PERSISTED)};c.prototype.cloneFileContentWithNewId=function(){var t=this.convertToFileContent();t.fileName=u.createDefaultFileName(t.fileName.split("_").pop());t.support.clonedFrom=this.getId();return t};c.prototype.getIdForCondensing=function(){throw new Error("Method getIdForCondensing must be implemented")};c.prototype.canBeCondensed=function(){return false};c.prototype.canBeVisualized=function(){return false};return c});
/* !
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory", ["sap/base/util/restricted/_pick","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexObjects/AnnotationChange","sap/ui/fl/apply/_internal/flexObjects/AppDescriptorChange","sap/ui/fl/apply/_internal/flexObjects/CompVariant","sap/ui/fl/apply/_internal/flexObjects/ControllerExtensionChange","sap/ui/fl/apply/_internal/flexObjects/FlexObject","sap/ui/fl/apply/_internal/flexObjects/FlVariant","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexObjects/UIChange","sap/ui/fl/apply/_internal/flexObjects/UpdatableChange","sap/ui/fl/apply/_internal/flexObjects/VariantChange","sap/ui/fl/apply/_internal/flexObjects/VariantManagementChange","sap/ui/fl/initial/_internal/Settings","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/ui/fl/Utils"],function(e,t,n,a,r,i,c,o,l,s,p,f,u,g,y,m,C,O,N){"use strict";const d={COMP_VARIANT_OBJECT:c,FL_VARIANT_OBJECT:s,CONTROLLER_EXTENSION:o,APP_DESCRIPTOR_CHANGE:i,ANNOTATION_CHANGE:r,UI_CHANGE:f,UPDATABLE_CHANGE:u,VARIANT_CHANGE:g,VARIANT_MANAGEMENT_CHANGE:y,FLEX_OBJECT:l};function _(e){return t(e)?{...e}:e}function T(e){if(e.fileType==="variant"){return d.COMP_VARIANT_OBJECT}else if(e.fileType==="ctrl_variant"){return d.FL_VARIANT_OBJECT}else if(e.changeType==="codeExt"){return d.CONTROLLER_EXTENSION}else if(e.appDescriptorChange){return d.APP_DESCRIPTOR_CHANGE}else if(e.fileType==="annotation_change"){return d.ANNOTATION_CHANGE}else if(e.fileType==="change"&&e.changeType==="defaultVariant"){return d.UPDATABLE_CHANGE}else if(e.fileType==="ctrl_variant_change"){return d.VARIANT_CHANGE}else if(e.fileType==="ctrl_variant_management_change"){return d.VARIANT_MANAGEMENT_CHANGE}else if(e.changeType==="deactivateChanges"){return d.FLEX_OBJECT}return d.UI_CHANGE}function A(e){const t=_(e);const n=t.type||t.changeType;let a=t.fileName||t.id;if(!a){a=N.createDefaultFileName(n);if(a.length>64){throw Error(`File name '${a}' must not exceed 64 characters`)}}const r=t.user||(!O.isDeveloperLayer(t.layer)?m.getInstanceOrUndef()?.getUserId():undefined);return{id:a,adaptationId:t.adaptationId,layer:t.layer,content:_(t.content),texts:_(t.texts),supportInformation:{service:t.ODataService,oDataInformation:_(t.oDataInformation),command:t.command,compositeCommand:t.compositeCommand,generator:t.generator,sourceChangeFileName:t.support&&t.support.sourceChangeFileName,sourceSystem:t.sourceSystem,sourceClient:t.sourceClient,originalLanguage:t.originalLanguage,user:r},flexObjectMetadata:{changeType:n,reference:t.reference,packageName:t.packageName,projectId:t.projectId}}}const E={};E.createFromFileContent=function(e,t,a){const r={...e};var i=t||T(r);if(!i){throw new Error("Unknown file type")}r.support={generator:"FlexObjectFactory.createFromFileContent",...r.support||{}};const c=i.getMappingInfo();const o=l.mapFileContent(r,c);const s=Object.entries(o).reduce(function(e,t){n.set(t[0].split("."),t[1],e);return e},{});const f=new i(s);if(a){f.setProperty("state",p.LifecycleState.PERSISTED)}return f};E.createFlexObject=function(e){const t=A({...e,...{packageName:e.packageName||"$TMP"}});return new l(t)};E.createUIChange=function(e){e.packageName||="$TMP";const t=A(e);t.layer||=e.isUserDependent?C.USER:O.getCurrentLayer();t.selector=e.selector;t.jsOnly=e.jsOnly;t.variantReference=e.variantReference;t.isChangeOnStandardVariant=e.isChangeOnStandardVariant;t.fileType=e.fileType||"change";return new f(t)};E.createVariantChange=function(e){e.packageName||="$TMP";const t=A(e);t.variantId=e.variantId||e.selector?.id;t.fileType=e.fileType||"ctrl_variant_change";return new g(t)};E.createVariantManagementChange=function(e){e.packageName||="$TMP";const t=A(e);t.selector=e.selector;t.fileType=e.fileType||"ctrl_variant_management_change";return new y(t)};E.createAppDescriptorChange=function(e){e.compositeCommand||=e.support&&e.support.compositeCommand;if(!(e.fileName||e.id)){const t=e.type||e.changeType;e.fileName=N.createDefaultFileName(t).substring(0,64)}const t=A(e);return new i(t)};E.createAnnotationChange=function(e){e.compositeCommand||=e.support&&e.support.compositeCommand;const t=A(e);t.serviceUrl=e.serviceUrl;return new r(t)};E.createControllerExtensionChange=function(e){e.generator||="FlexObjectFactory.createControllerExtensionChange";e.changeType="codeExt";e.content={codeRef:e.codeRef};if(e.viewId){e.content.viewId=e.viewId}const t=A(e);t.flexObjectMetadata.moduleName=e.moduleName;t.controllerName=e.controllerName;return new o(t)};E.createFlVariant=function(e){const t=_(e);t.generator||="FlexObjectFactory.createFlVariant";if(t.layer===C.VENDOR){t.user=a.DEFAULT_AUTHOR}const n=A(t);n.variantManagementReference=t.variantManagementReference;n.variantReference=t.variantReference;n.contexts=t.contexts;n.executeOnSelection=t.executeOnSelection;n.texts={variantName:{value:t.variantName,type:"XFLD"}};return new s(n)};E.createCompVariant=function(e){const t=_(e);t.generator||="FlexObjectFactory.createCompVariant";t.user=n.get("support.user",t);const a=A(t);a.variantId=t.variantId||a.id;a.contexts=t.contexts;a.favorite=t.favorite;a.persisted=t.persisted;if(t.persistencyKey!==undefined){a.persistencyKey=t.persistencyKey}else{a.persistencyKey=n.get("selector.persistencyKey",t)}if(t.layer===C.VENDOR||t.layer===C.CUSTOMER_BASE){a.favorite=true}if(t.executeOnSelection!==undefined){a.executeOnSelection=t.executeOnSelection}else{a.executeOnSelection=a.content&&(a.content.executeOnSelect||a.content.executeOnSelection)}return new c(a)};return E});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/States", [],function(){"use strict";return{LifecycleState:{NEW:"NEW",PERSISTED:"PERSISTED",DELETED:"DELETED",DIRTY:"UPDATED",UPDATED:"UPDATED"},ApplyState:{INITIAL:"initial",APPLYING:"applying",REVERTING:"reverting",REVERT_FINISHED:"revert finished",APPLY_SUCCESSFUL:"apply successful",APPLY_FAILED:"apply failed"},Operations:{APPLY:"apply",REVERT:"revert"}}});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/UIChange", ["sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/flexObjects/FlexObject","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/Utils"],function(e,t,s,r,o,n){"use strict";var i=r.extend("sap.ui.fl.apply._internal.flexObjects.UIChange",{metadata:{properties:{selector:{type:"object",defaultValue:{}},dependentSelectors:{type:"object",defaultValue:{}},applyState:{type:"string",defaultValue:o.ApplyState.NEW},jsOnly:{type:"boolean"},variantReference:{type:"string"},isChangeOnStandardVariant:{type:"boolean"},savedToVariant:{type:"boolean"},revertData:{type:"any",defaultValue:null}},aggregations:{},associations:{},events:{}},constructor:function(...e){r.apply(this,e);this._oChangeProcessingPromises={};this.setInitialApplyState()}});i.getMappingInfo=function(){return{...r.getMappingInfo(),selector:"selector",dependentSelectors:"dependentSelector",jsOnly:"jsOnly",variantReference:"variantReference",isChangeOnStandardVariant:"isChangeOnStandardVariant"}};i.prototype.getMappingInfo=function(){return i.getMappingInfo()};i.prototype.setQueuedForRevert=function(){if(this._aQueuedProcesses[this._aQueuedProcesses.length-1]!==o.Operations.REVERT){this._aQueuedProcesses.unshift(o.Operations.REVERT)}};i.prototype.isQueuedForRevert=function(){return this._aQueuedProcesses.indexOf(o.Operations.REVERT)>-1};i.prototype.setQueuedForApply=function(){if(this._aQueuedProcesses[this._aQueuedProcesses.length-1]!==o.Operations.APPLY){this._aQueuedProcesses.unshift(o.Operations.APPLY)}};i.prototype.isQueuedForApply=function(){return this._aQueuedProcesses.indexOf(o.Operations.APPLY)>-1};i.prototype.setInitialApplyState=function(){this._aQueuedProcesses=[];delete this._ignoreOnce;this.setApplyState(o.ApplyState.INITIAL);this._oChangeProcessedPromise={};this._oChangeProcessedPromise.promise=new Promise(function(e){this._oChangeProcessedPromise.resolveFunction={resolve:e}}.bind(this))};i.prototype.isInInitialState=function(){return this._aQueuedProcesses.length===0&&this.getApplyState()===o.ApplyState.INITIAL};i.prototype.isValidForDependencyMap=function(){return!!this.getSelector().id};i.prototype.startApplying=function(){this.setApplyState(o.ApplyState.APPLYING)};i.prototype.markFinished=function(e,t){this._aQueuedProcesses.pop();this._resolveChangeProcessingPromiseWithError(o.Operations.APPLY,e);var s=t!==false?o.ApplyState.APPLY_SUCCESSFUL:o.ApplyState.APPLY_FAILED;this.setApplyState(s)};i.prototype.markSuccessful=function(e){this.markFinished(e,true)};i.prototype.markFailed=function(e){this.markFinished(e,false)};i.prototype.startReverting=function(){this.setApplyState(o.ApplyState.REVERTING)};i.prototype.markRevertFinished=function(e){this._aQueuedProcesses.pop();this._resolveChangeProcessingPromiseWithError(o.Operations.REVERT,e);this.setApplyState(o.ApplyState.REVERT_FINISHED)};i.prototype.hasApplyProcessStarted=function(){return this.getApplyState()===o.ApplyState.APPLYING};i.prototype.isSuccessfullyApplied=function(){return this.getApplyState()===o.ApplyState.APPLY_SUCCESSFUL};i.prototype.hasApplyProcessFailed=function(){return this.getApplyState()===o.ApplyState.APPLY_FAILED};i.prototype.isApplyProcessFinished=function(){return this.isSuccessfullyApplied()||this.hasApplyProcessFailed()};i.prototype.hasRevertProcessStarted=function(){return this.getApplyState()===o.ApplyState.REVERTING};i.prototype.isRevertProcessFinished=function(){return this.getApplyState()===o.ApplyState.REVERT_FINISHED};i.prototype.isCurrentProcessFinished=function(){return this._aQueuedProcesses.length===0&&this.getApplyState()!==o.ApplyState.INITIAL};i.prototype.addChangeProcessingPromise=function(e){if(!this._oChangeProcessingPromises[e]){this._oChangeProcessingPromises[e]={};this._oChangeProcessingPromises[e].promise=new Promise(function(t){this._oChangeProcessingPromises[e].resolveFunction={resolve:t}}.bind(this))}return this._oChangeProcessingPromises[e].promise};i.prototype.addChangeProcessingPromises=function(){var e=[];if(this.getApplyState()===o.ApplyState.INITIAL&&this._oChangeProcessedPromise){e.push(this._oChangeProcessedPromise.promise)}this._aQueuedProcesses.forEach(function(t){e.push(this.addChangeProcessingPromise(t))},this);return e};i.prototype.addPromiseForApplyProcessing=function(){return this.addChangeProcessingPromise(o.Operations.APPLY)};i.prototype._resolveChangeProcessingPromiseWithError=function(e,t){if(this._oChangeProcessingPromises[e]){this._oChangeProcessingPromises[e].resolveFunction.resolve(t);delete this._oChangeProcessingPromises[e]}if(this._oChangeProcessedPromise){this._oChangeProcessedPromise.resolveFunction.resolve(t);this._oChangeProcessedPromise=null}};i.prototype.hasRevertData=function(){return this.getRevertData()!==null};i.prototype.resetRevertData=function(){this.setRevertData(null)};i.prototype.setDependentSelectors=function(e){this.setProperty("dependentSelectors",e);delete this._aDependentSelectorList};i.prototype.addDependentControl=function(t,s,r,o){if(!t){throw new Error("Parameter vControl is mandatory")}if(!s){throw new Error("Parameter sAlias is mandatory")}if(!r||e(r)){throw new Error("Parameter mPropertyBag is mandatory")}var n={...this.getDependentSelectors()};if(n[s]){throw new Error(`Alias '${s}' already exists in the change.`)}var i=r.modifier;var a=r.appComponent;if(Array.isArray(t)){var p=[];t.forEach(function(e){p.push(i.getSelector(e,a,o))});n[s]=p}else{n[s]=i.getSelector(t,a,o)}this.setDependentSelectors(n);delete this._aDependentSelectorList};i.prototype.getDependentControl=function(e,t){var s=[];if(!e){throw new Error("Parameter sAlias is mandatory")}if(!t){throw new Error("Parameter mPropertyBag is mandatory")}var r=t.modifier;var o=t.appComponent;var n=this.getDependentSelectors()[e];if(Array.isArray(n)){n.forEach(function(e){s.push(r.bySelector(e,o,t.view))});return s}return r.bySelector(n,o,t.view)};i.prototype.getDependentSelectorList=function(){var e=[this.getSelector()];if(!this._aDependentSelectorList){if(!this.getOriginalSelector()){Object.entries(this.getDependentSelectors()).some(function(t){var s=t[1];if(!Array.isArray(s)){s=[s]}s.forEach(function(t){if(t&&n.indexOfObject(e,t)===-1){e.push(t)}})})}this._aDependentSelectorList=e}return this._aDependentSelectorList};i.prototype.getDependentControlSelectorList=function(){var e=this.getDependentSelectorList().concat();if(e.length>0){var t=this.getSelector();var s=n.indexOfObject(e,t);if(s>-1){e.splice(s,1)}}return e};i.prototype.getOriginalSelector=function(){return this.getDependentSelectors().originalSelector};i.prototype.setExtensionPointInfo=function(e){this._oExtensionPointInfo=e};i.prototype.getExtensionPointInfo=function(){if(t(this._oExtensionPointInfo)){return{...this._oExtensionPointInfo}}return this._oExtensionPointInfo};i.prototype.getIdForCondensing=function(e,t){return e!==undefined?e.affectedControl:s.getControlIdBySelector(this.getSelector(),t)};i.prototype.canBeCondensed=function(){return this.isSuccessfullyApplied()};i.prototype.canBeVisualized=function(){return this.getSelector()&&!e(this.getSelector())};return i});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/UpdatableChange", ["sap/ui/fl/apply/_internal/flexObjects/UIChange"],function(e){"use strict";var t=e.extend("sap.ui.fl.apply._internal.flexObjects.UpdatableChange",{metadata:{aggregations:{revertInfo:{type:"sap.ui.base.ManagedObject",multiple:true,singularName:"revertInfo"}}}});t.getMappingInfo=function(){return{...e.getMappingInfo()}};t.prototype.popLatestRevertInfo=function(){var e=this.getRevertInfo().pop();this.removeRevertInfo(e);return e};t.prototype.canBeCondensed=function(){return false};return t});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/Variant", ["sap/ui/fl/apply/_internal/flexObjects/getVariantAuthor","sap/ui/fl/apply/_internal/flexObjects/FlexObject"],function(t,e){"use strict";var n=e.extend("sap.ui.fl.apply._internal.flexObjects.Variant",{metadata:{properties:{favorite:{type:"boolean",defaultValue:false},visible:{type:"boolean",defaultValue:true},executeOnSelection:{type:"boolean",defaultValue:false},standardVariant:{type:"boolean",defaultValue:false},contexts:{type:"object",defaultValue:{}},variantId:{type:"string"},author:{type:"string"}}},constructor:function(...n){e.apply(this,n);if(!this.getVariantId()){this.setVariantId(this.getId())}if(!this.getAuthor()){this.setAuthor(t(this.getSupportInformation().user,this.getLayer(),this.getFlexObjectMetadata().reference))}}});n.getMappingInfo=function(){return{...e.getMappingInfo(),favorite:"favorite",executeOnSelection:"executeOnSelection",contexts:"contexts"}};n.prototype.getMappingInfo=function(){return n.getMappingInfo()};n.prototype.getName=function(){return this.getText("variantName")};n.prototype.setName=function(t,e){this.setText("variantName",t,"XFLD",e)};n.prototype.hasContexts=function(){var t=this.getContexts();var e=Object.keys(t);return e.some(function(e){return t[e].length>0})};n.prototype.canBeCondensed=function(){return false};return n});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/VariantChange", ["sap/ui/fl/apply/_internal/flexObjects/FlexObject"],function(t){"use strict";const n=t.extend("sap.ui.fl.apply._internal.flexObjects.VariantChange",{metadata:{properties:{variantId:{type:"string"}}},constructor:function(...n){t.apply(this,n);this.setFileType("ctrl_variant_change")}});n.getMappingInfo=function(){return{...t.getMappingInfo(),variantId:"selector.id"}};n.prototype.getMappingInfo=function(){return n.getMappingInfo()};n.prototype.getIdForCondensing=function(){return this.getVariantId()};n.prototype.canBeCondensed=function(){return true};return n});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/VariantManagementChange", ["sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/flexObjects/FlexObject"],function(e,t){"use strict";const n=t.extend("sap.ui.fl.apply._internal.flexObjects.VariantManagementChange",{metadata:{properties:{selector:{type:"object",defaultValue:{}}}},constructor:function(...e){t.apply(this,e);this.setFileType("ctrl_variant_management_change")}});n.getMappingInfo=function(){return{...t.getMappingInfo(),selector:"selector"}};n.prototype.getMappingInfo=function(){return n.getMappingInfo()};n.prototype.getIdForCondensing=function(t,n){return e.getControlIdBySelector(this.getSelector(),n)};n.prototype.canBeCondensed=function(){return true};return n});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/getVariantAuthor", ["sap/ui/core/Lib","sap/ui/fl/initial/_internal/Loader","sap/ui/fl/initial/_internal/Settings","sap/ui/fl/Layer"],function(e,t,i,n){"use strict";return(r,a,s)=>{const u=r||"";const l=i.getInstanceOrUndef();const c=t.getCachedFlexData(s).authors||{};if(a===n.USER||u===l?.getUserId()){return e.getResourceBundleFor("sap.ui.fl").getText("VARIANT_SELF_OWNER_NAME")}if(![n.PUBLIC,n.CUSTOMER].includes(a)){return u}return c?.[u]||u}});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/DataSelector", ["sap/base/util/merge","sap/base/util/ObjectPath","sap/ui/base/ManagedObject"],function(e,t,i){"use strict";var a=i.extend("sap.ui.fl.apply._internal.flexState.DataSelector",{metadata:{properties:{parentDataSelector:{type:"object"},cachedResult:{type:"any"},parameterKey:{type:"string"},initFunction:{type:"function"},executeFunction:{type:"function"},updateListeners:{type:"function[]",defaultValue:[]},checkInvalidation:{type:"function",defaultValue(){return true}}}},constructor:function(...e){i.apply(this,e);this._mInitialized={};if(this.getParameterKey()){this.setCachedResult({})}var t=this.getParentDataSelector();if(t){this.onParentSelectorUpdate=this.checkUpdate.bind(this);t.addUpdateListener(this.onParentSelectorUpdate)}}});const n="DataSelector_no_parameter";function r(e,t){const i=[];function a(e){const i=e.getParameterKey();if(!i){return n}return t?.[i]}let r=e;do{const t=a(r);if(t!==undefined||r!==e){if(t===undefined){throw new Error(`Parameter '${r.getParameterKey()}' is missing`)}i.unshift(t)}r=r.getParentDataSelector()}while(r);return i}a.prototype.addUpdateListener=function(e){var t=this.getUpdateListeners();if(!t.includes(e)){this.setUpdateListeners([].concat(t,e))}};a.prototype.removeUpdateListener=function(e){var t=this.getUpdateListeners();this.setUpdateListeners(t.filter(function(t){return t!==e}))};a.prototype.exit=function(){var e=this.getParentDataSelector();if(e){e.removeUpdateListener(this.onParentSelectorUpdate)}};a.prototype._getParameterizedCachedResult=function(e){const i=r(this,e);if(i.length===0){return this.getCachedResult()}return t.get(i,this.getCachedResult())};a.prototype._setParameterizedCachedResult=function(i,a){const n=r(this,i);const s={};if(n.length===0){Object.assign(s,a)}else{t.set(n,a,s)}return this.setCachedResult(e({},this.getCachedResult(),s))};a.prototype._clearCache=function(e,t){const i=[];const a=this.getParameterKey();if(!a){this.setCachedResult(null);i.push(e)}else if(Object.keys(e||{}).includes(a)){if(this._getParameterizedCachedResult(e)!==undefined){this._setParameterizedCachedResult(e,null);i.push(e)}}else{const t=this._getParameterizedCachedResult(e);Object.keys(t||{}).forEach(t=>{i.push({...e,[a]:t})});this.setCachedResult({})}this.getUpdateListeners().forEach(function(e){i.forEach(i=>{e(i,t)})})};a.prototype.clearCachedResult=function(e){this._clearCache(e)};a.prototype.get=function(e){var t=this.getParameterKey();if(t&&e?.[t]===undefined){throw new Error(`Parameter '${t}' is missing`)}var i=this._getParameterizedCachedResult(e);if(i!==null&&i!==undefined){return i}var a=this.getParentDataSelector();var n=a?.get(e);var r=(e||{})[t];if(!this._mInitialized[r]&&this.getInitFunction()){this.getInitFunction()(n,r);this._mInitialized[r]=true}var s=this.getExecuteFunction()(n,e);this._setParameterizedCachedResult(e,s);return s};function s(e,t,i){if(i){return i.some(i=>e(t,i))}return true}a.prototype.checkUpdate=function(e,t){const i=this.getParameterKey();if(i!==undefined&&!Object.keys(e||{}).includes(i)){const a=this._getParameterizedCachedResult(e);const n=Object.keys(a&&typeof a==="object"?a:{});n.forEach(a=>{const n={...e,[i]:a};const r=s(this.getCheckInvalidation(),n,t);if(r){this._clearCache(n,t)}return!r})}else{const i=s(this.getCheckInvalidation(),e,t);if(i){this._clearCache(e,t)}}};return a});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/FlexObjectState", ["sap/base/util/merge","sap/base/util/restricted/_omit","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/Element","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/apply/_internal/flexState/changes/UIChangesState","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/flexState/DataSelector","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/fl/Utils"],function(e,n,t,c,a,s,o,i,r,l,p,g,d){"use strict";const f={};const u=new l({id:"allDirtyFlexObjects",parentDataSelector:p.getFlexObjectsDataSelector(),executeFunction(e){return e.filter(e=>e.getState()!==s.LifecycleState.PERSISTED)}});function h(e,n){const t=f.getCompleteDependencyMap(n).mDependencies;return t[e.getId()]&&{...t[e.getId()]}}function D(e,n,c,a,s){const o=[];const i=f.getLiveDependencyMap(s);const r={...e};e.controlsDependencies.forEach(e=>{if(!t.bySelector(e,c)){const n=t.getControlIdBySelector(e,c);o.push(e);i.mControlsWithDependencies[n]||=[];if(!i.mControlsWithDependencies[n].includes(a.getId())){i.mControlsWithDependencies[n].push(a.getId())}}});r.dependencies=n;r.controlsDependencies=o;if(n.length||o.length){i.mDependencies[a.getId()]=r}return r}function y(e,n){const c=e.getDependentControlSelectorList();c.push(e.getSelector());return!c.some(e=>!t.bySelector(e,n))}function C(e,n,t,c,a){let s=y(e,c);if(!s){return[]}a.push(e);const o=e.getId();const i=n[o]&&n[o].dependencies||[];for(let e=0,r=i.length;e<r;e++){const r=d.getChangeFromChangesMap(t,i[e]);s=C(r,n,t,c,a);if(s.length===0){a=[];break}delete n[o]}return a}f.getAllApplicableUIChanges=function(e){const n=i.getVariantIndependentUIChanges(e);return n.concat(r.getInitialUIChanges({reference:e}))};f.getCompleteDependencyMap=function(n){const t=i.getVMIndependentCompleteDependencyMap(n);const c=r.getDependencyMap(n);const a=e({},t);e(a.mDependencies,c.mDependencies);e(a.mDependentChangesOnMe,c.mDependentChangesOnMe);a.aChanges=a.aChanges.concat(c.aChanges);["mChanges","mControlsWithDependencies"].forEach(e=>{Object.entries(c[e]).forEach(([n,t])=>{if(Object.keys(a[e]).includes(n)){a[e][n]=a[e][n].concat(t)}else{a[e][n]=t}})});return a};f.getLiveDependencyMap=function(e){return p.getRuntimeOnlyData(e)?.liveDependencyMap||o.createEmptyDependencyMap()};f.getOpenDependentChangesForControl=function(e,n){const c=g.getFlexReferenceForControl(n);return o.getOpenDependentChangesForControl(f.getLiveDependencyMap(c),t.getControlIdBySelector(e,n),n)};f.copyDependenciesFromCompleteDependencyMap=function(e,n){const c=g.getFlexReferenceForControl(n);let s=h(e,c);if(s){const o=f.getLiveDependencyMap(c);const i=[];s.dependencies.forEach(function(c){if(a.checkIfDependencyIsStillValid(n,t,o,c)){o.mDependentChangesOnMe[c]||=[];o.mDependentChangesOnMe[c].push(e.getId());i.push(c)}});s=D(s,i,n,e,c)}};f.waitForFlexObjectsToBeApplied=async function(e,n){const t=n||d.getAppComponentForSelector(e[0].selector);if(!t){return}const a=g.getFlexReferenceForControl(t);await Promise.all(e.map(e=>{const n=e.selector.id&&c.getElementById(e.selector.id)||e.selector;e.changeTypes||=[];const s=f.getLiveDependencyMap(a);let o=[];const i={...s.mDependencies};const{mChanges:r}=s;const l=r[n.getId()]||[];const p=l.filter(n=>!n.isCurrentProcessFinished()&&(e.changeTypes.length===0||e.changeTypes.includes(n.getChangeType())));const g=[];p.forEach(e=>{const n=C(e,i,s.mChanges,t,[]);n.forEach(e=>{if(g.indexOf(e)===-1){g.push(e)}})});g.forEach(e=>{o=o.concat(e.addChangeProcessingPromises())});return Promise.all(o)}))};f.getDirtyFlexObjects=function(e){function n(e){return!(e.getState()===s.LifecycleState.DELETED&&e._sPreviousState===s.LifecycleState.NEW)||e.getState()===s.LifecycleState.DELETED&&e.getFileType()==="variant"}return u.get({reference:e}).filter(e=>n(e))};return f});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/FlexState", ["sap/base/util/restricted/_omit","sap/base/util/Deferred","sap/base/util/each","sap/base/util/merge","sap/base/util/ObjectPath","sap/base/Log","sap/ui/core/Component","sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/apply/_internal/flexState/DataSelector","sap/ui/fl/apply/_internal/flexState/InitialPrepareFunctions","sap/ui/fl/initial/_internal/Loader","sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/fl/initial/_internal/FlexInfoSession","sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/LayerUtils","sap/ui/fl/apply/_internal/init"],function(e,t,n,a,r,c,i,s,o,l,f,u,p,d,m,g,h){"use strict";const b="sap.ui.fl.apply._internal.flexObjects.AppDescriptorChange";const x="sap.ui.fl.apply._internal.flexObjects.AnnotationChange";const y={};const O={};const j={};const F={appDescriptorChanges:{pathInResponse:[]},annotationChanges:{pathInResponse:[]},changes:{initialPreparationFunctionName:"uiChanges",pathInResponse:["changes"]},variants:{initialPreparationFunctionName:"variants",pathInResponse:["variants","variantChanges","variantDependentControlChanges","variantManagementChanges"]},comp:{pathInResponse:["comp.changes","comp.defaultVariants","comp.standardVariants","comp.variants"]}};const R={flexObjects:{},smartVariantManagementControls:{}};function I(e,t){var n={comp(){return Object.values(t).reduce(function(e,t){return e.concat(t)},[])},variants(){return t.map(function(e){var n=e.variantReference===e.variantManagementReference||t.some(function(t){return t.variantManagementReference===e.variantManagementReference&&t.fileName===e.variantReference});if(!n){return{...e,variantReference:e.variantManagementReference}}return e})}}[e];if(n){return n()}return Array.isArray(t)?t:[]}function v(e){var t=i.getComponentById(e.componentId);e.componentData||=t&&t.getComponentData()||{};e.manifest||=e.rawManifest||t&&t.getManifestObject()||{};e.reference||=d.getFlexReference(e)}function C(e){var t=[];n(e.changes,function(e,n){I(e,n).forEach(function(e){t.push(s.createFromFileContent(e,null,true))})});return t}function D(e,t){var n=F[e].initialPreparationFunctionName;var a=u[n];if(a){return a(t)}return undefined}var S=new f({id:"flexObjects",parameterKey:"reference",executeFunction(e,t){if(!O[t.reference]){return[]}var n=O[t.reference].runtimePersistence;return n.flexObjects.concat(n.runtimeOnlyData.flexObjects||[],R.flexObjects[t.reference][O[t.reference].componentId]||[])}});const P=new f({id:"appDescriptorChanges",parentDataSelector:S,executeFunction(e){return e.filter(e=>e.isA(b))},checkInvalidation(e,t){const n=["addFlexObject","removeFlexObject"].includes(t.type);return n&&t.updatedObject?.isA(b)}});const w=new f({id:"annotationChanges",parentDataSelector:S,executeFunction(e){return e.filter(e=>e.isA(x))},checkInvalidation(e,t){const n=["addFlexObject","removeFlexObject"].includes(t.type);return n&&t.updatedObject?.isA(x)}});function E(e,t){const n=e.storageResponse;var r={flexObjects:C(n),runtimeOnlyData:{liveDependencyMap:l.createEmptyDependencyMap(),flexObjects:[]}};if(!e.componentId){return r}Object.keys(F).forEach(function(c){var i=D(c,{storageResponse:n,externalData:t,flexObjects:r.flexObjects,componentId:e.componentId});if(i){r=a(r,i)}});return r}function L(e,t,a){const r=a.flexObjects.slice();const i=r.length;const l=[];let f;n(t.changes,function(e,t){I(e,t).forEach(function(e){l.push(e)})});O[e].runtimePersistence={...a,flexObjects:l.map(function(e){let t;const n=r.find(function(n,a){t=a;return n.getId()===e.fileName});if(n){r.splice(t,1);if(n.getState()!==o.LifecycleState.PERSISTED){n.setResponse(e);f=true}return n}if(e.fileType==="ctrl_variant_change"&&e.fileName.endsWith("flVariant_contextFiltering_setVisible")){return s.createFromFileContent(e,null,true)}const a="Error updating runtime persistence: storage returned unknown flex objects";c.error(a);throw new Error(a)})};if(i!==O[e].runtimePersistence.flexObjects.length){f=true}return f}function k(e,t){var n=e.reference;var a=false;if(!O[n].componentData&&e.componentId){var c=i.getComponentById(e.componentId);O[n].componentData=c?c.getComponentData():e.componentData;a=true}if(!O[n].storageResponse){O[n].storageResponse=_(n,t);delete O[n].runtimePersistence;a=true}if(!r.get(["flexObjects",n,e.componentId],R)){r.set(["flexObjects",n,e.componentId],[],R)}if(!O[n].runtimePersistence){O[n].runtimePersistence=E(O[n],R.flexObjects[n][e.componentId]||[]);a=true}if(a){S.checkUpdate({reference:n})}}function _(e,t){const c=a({},t);c.changes={...g.getEmptyFlexDataResponse(),...c.changes};const i=c.changes;const s=m.getByReference(e);if(h.isLayerFilteringRequired(e)){n(F,function(e,t){t.pathInResponse.forEach(function(e){const t=r.get(e,i).filter(function(e){return!e.layer||!h.isOverLayer(e.layer,s.maxLayer)});r.set(e,t,i)})})}O[e].maxLayer=s.maxLayer;return c}function M(e,t){O[e.reference]=a({},{componentId:e.componentId,componentData:e.componentData,skipLoadBundle:e.skipLoadBundle,loaderCacheKey:t})}function z(e){var t=O[e.reference].componentId;return t!==e.componentId}function U(e,t){if(O[e]?.maxLayer!==m.getByReference(e).maxLayer){y.rebuildFilteredResponse(e,t)}}function V(e,n){if(!n){throw new Error(`No FlexState instance created for reference ${e} - missing component ID`)}if(O[e]?.componentId===n){return}O[e]={emptyState:true,reInitialize:true,componentId:n};const a=new t;j[e]=a;a.resolve();const r=p.initializeEmptyCache(e);k({reference:e},r)}y.getRuntimeOnlyData=function(e){return O[e]?.runtimePersistence?.runtimeOnlyData};y.addFlexObjectsToRuntimeOnlyData=function(e,t,n){V(e,t);O[e].runtimePersistence.runtimeOnlyData.flexObjects.push(...n)};y.initialize=async function(e){const n=a({},e);v(n);const r=n.reference;const c=j[r];const i=new t;j[r]=i;if(c){await c.promise}const s=await p.getFlexData(n);if(!O[n.reference]?.storageResponse||s.parameters.loaderCacheKey!==O[n.reference].loaderCacheKey||z(n)){M(n,s.parameters.loaderCacheKey)}else{U(n.reference,s.data)}k(n,s.data);i.resolve()};y.waitForInitialization=function(e){const t=j[e]?.promise;if(!t){c.error("FlexState.waitForInitialization was called before FlexState.initialize");return Promise.resolve()}return t};y.isInitialized=function(e){var t=e.reference?e.reference:d.getFlexReferenceForControl(e.control);return!!O[t]};y.lazyLoadFlVariant=async function(e){V(e.reference,e.componentId);const t=await p.loadFlVariant(e);const n=O[e.reference];n.loaderCacheKey=t.completeLoaderData.parameters.loaderCacheKey;n.storageResponse=_(e.reference,t.completeLoaderData.data);n.runtimePersistence.flexObjects=[...n.runtimePersistence.flexObjects,...C(_(e.reference,{changes:t.newData}))];S.checkUpdate({reference:e.reference})};y.reinitialize=async function(e){v(e);const n=e.reference;const a=j[n];const r=new t;j[n]=r;if(a){await a.promise}e.reInitialize=true;const c=await p.getFlexData(e);if(!O[n]){M(e,c.parameters.loaderCacheKey);k(e,c.data)}else{const t=O[n].runtimePersistence;M(e,c.parameters.loaderCacheKey);O[n].storageResponse=_(n,c.data);const a=L(n,O[n].storageResponse,t);if(a){S.checkUpdate({reference:n})}}r.resolve()};y.update=function(e,t){const n=[];g.updateStorageResponse(O[e].storageResponse,t);const a=p.updateCachedResponse(e,t);O[e].loaderCacheKey=a;t.forEach(t=>{if(t.type!=="ui2"){const a=O[e].runtimePersistence.flexObjects.findIndex(e=>e.getId()===t.flexObject.fileName);const r=O[e].runtimePersistence.flexObjects[a];switch(t.type){case"add":if(a<0){throw new Error("Flex response includes unknown flex object")}break;case"delete":if(a>=0){O[e].runtimePersistence.flexObjects.splice(a,1);n.push({type:"removeFlexObject",updatedObject:r})}break;case"update":if(r&&r.getState()!==o.LifecycleState.PERSISTED){r.setResponse(t.flexObject);n.push({type:"updateFlexObject",updatedObject:r})}break;default:}}});if(n.length){S.checkUpdate({reference:e},n)}};y.clearState=function(e){p.clearCache(e);if(e){delete O[e];delete j[e];S.clearCachedResult({reference:e})}else{Object.keys(O).forEach(e=>delete O[e]);Object.keys(j).forEach(e=>delete j[e]);S.clearCachedResult()}};y.addRuntimeSteadyObject=function(e,t,n){V(e,t);n.setState(o.LifecycleState.PERSISTED);R.flexObjects[e]||={};R.flexObjects[e][t]||=[];R.flexObjects[e][t].push(n);S.checkUpdate({reference:e},[{type:"addFlexObject",updatedObject:n}])};y.clearRuntimeSteadyObjects=function(e,t){if(R.flexObjects[e]){delete R.flexObjects[e][t];S.clearCachedResult({reference:e})}};y.rebuildFilteredResponse=function(e,t){if(O[e]){O[e].storageResponse=_(e,t);O[e].runtimePersistence=E(O[e],R.flexObjects[e][O[e].componentId]||[]);S.checkUpdate({reference:e})}};y.addDirtyFlexObjects=function(e,t,n){if(n){V(e,n)}const a=m.getByReference(e).adaptationLayer;const r=t.filter(e=>!a||!h.isOverLayer(e.getLayer(),a)).filter(t=>!O[e].runtimePersistence.flexObjects.some(e=>e.getId()===t.getId()));if(r.length>0){O[e].runtimePersistence.flexObjects=O[e].runtimePersistence.flexObjects.concat(r);S.checkUpdate({reference:e},r.map(function(e){return{type:"addFlexObject",updatedObject:e}}))}return r};y.removeDirtyFlexObjects=function(e,t){const n=[];if(t.length>0){const a=O[e].runtimePersistence.flexObjects;t.forEach(function(e){const t=a.indexOf(e);if(t>=0){n.push(e);a.splice(t,1)}});if(n.length>0){S.checkUpdate({reference:e},t.map(function(e){return{type:"removeFlexObject",updatedObject:e}}))}}return n};y.getComponentIdForReference=function(e){return O[e]?.componentId};y.getFlexObjectsDataSelector=function(){return S};y.getAppDescriptorChanges=function(e){return P.get({reference:e})};y.getAnnotationChanges=function(e){return w.get({reference:e})};y.getUI2Personalization=function(e){return a({},O[e].storageResponse.changes.ui2personalization)};y.callPrepareFunction=function(e,t){return F[e].prepareFunction(t)};y.getStorageResponse=async function(e){if(j[e]){await j[e].promise;return p.getCachedFlexData(e)}return undefined};y.getComponentData=function(e){return O[e]&&O[e].componentData};y.addSVMControl=function(e,t){R.smartVariantManagementControls[e]||=[];R.smartVariantManagementControls[e].push(t)};y.getSVMControls=function(e){return R.smartVariantManagementControls[e]||[]};return y});
/*
 * ! OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/InitialPrepareFunctions", ["sap/ui/core/Lib","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/Layer"],function(e,n,a,t,r,i){"use strict";const c={};c.variants=function(r){const c=(r.storageResponse.changes.variants||[]).map(function(e){return e.fileName}).concat(r.externalData.filter(function(e){return e.getFileType()==="ctrl_variant"}).map(function(e){return e.getId()}));var s={runtimeOnlyData:{flexObjects:[]}};var l=r.storageResponse.changes.variants;var f=r.storageResponse.changes.variantDependentControlChanges.filter(function(e){var n=e.isChangeOnStandardVariant;if(n!==undefined&&n!==null){return n}return!/id_\d{13}_\d*_flVariant/.test(e.variantReference)});var p=l.concat(f);p.forEach(function(r){var l=r.fileType==="ctrl_variant"?r.variantManagementReference:r.variantReference;if(l&&!c.includes(l)){var f=e.getResourceBundleFor("sap.ui.fl");var p=a.createFlVariant({id:l,variantManagementReference:l,variantName:f.getText("STANDARD_VARIANT_TITLE"),layer:i.BASE,user:n.DEFAULT_AUTHOR,reference:r.reference});p.setState(t.LifecycleState.PERSISTED);s.runtimeOnlyData.flexObjects.push(p);c.push(l)}});return s};c.uiChanges=function(e){const n=r.createEmptyDependencyMap();e.flexObjects.forEach(a=>{if(a.isA("sap.ui.fl.apply._internal.flexObjects.UIChange")&&!a.getVariantReference()){r.addChangeAndUpdateDependencies(a,e.componentId,n)}});return{runtimeOnlyData:{liveDependencyMap:n}}};return c});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler", ["sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/Utils"],function(e,n){"use strict";var t="sap.ui.fl:PendingChange";var d={};function i(n,t){return e.getControlIdBySelector(n,t)}function c(e){return{changeObject:e,dependencies:[],controlsDependencies:[],dependentIds:[]}}function s(e,n,t){r(t,n,e);o(t,n)}function o(e,n){if(!e.aChanges.includes(n)){e.aChanges.push(n)}}function r(e,n,t){e.mChanges[t]||=[];if(!e.mChanges[t].includes(n)){e.mChanges[t].push(n)}}function a(e,n,t){var d=e.getSelector();if(d){if(d.id){s(i(d,n),e,t)}else{o(t,e)}}return t.aChanges}function p(e,n){return e.some(function(e){return e.id===n.id&&e.idIsLocal===n.idIsLocal})}function u(e,n,t,d,c,s,o){var r=t.getDependentSelectorList();n.some(function(n){if(p(r,n)){var a=i(n,c);var u=d&&s.indexOf(e)<s.indexOf(t);if(u){l(t,e,a,o,true)}else{l(e,t,a,o)}return true}return false})}function f(e,n,t,d){if(e.isValidForDependencyMap()){var i=e.getDependentSelectorList();h(e,i,n,d);var c=t.indexOf(e);var s=c<t.length-1;var o=t.slice();o.splice(c,1);o.reverse().forEach(function(c){if(c.isValidForDependencyMap()){u(e,i,c,s,n,t,d)}})}}function h(e,n,t,d){if(n.length){var s=n.map(function(e){return i(e,t)});if(!d.mDependencies[e.getId()]){d.mDependencies[e.getId()]=c(e)}d.mDependencies[e.getId()].controlsDependencies=s;s.forEach(function(n){d.mControlsWithDependencies[n]||=[];d.mControlsWithDependencies[n].push(e.getId())})}}function l(e,n,t,d,i){if(g(e,n,t,d,i)){d.mDependencies[e.getId()].dependencies.push(n.getId());if(!d.mDependencies[e.getId()].dependentIds.includes(t)){d.mDependencies[e.getId()].dependentIds.push(t)}if(!d.mDependentChangesOnMe[n.getId()]){d.mDependentChangesOnMe[n.getId()]=[]}d.mDependentChangesOnMe[n.getId()].push(e.getId())}}function g(e,n,t,d,i){var c=!i&&d.mDependencies[e.getId()].dependentIds.includes(t);var s=false;if(d.mDependentChangesOnMe[n.getId()]){d.mDependentChangesOnMe[n.getId()].some(function(n){s=d.mDependencies[e.getId()].dependencies.includes(n);return s})}return!c&&!s}function m(e,n){const t=e.aChanges.findIndex(e=>e.getId()===n);if(t!==-1){e.aChanges.splice(t,1)}}function D(e,i){var c=[];var s=[];var o=[];if(e.dependencyRemovedInLastBatch[i]){e.dependencyRemovedInLastBatch[i].forEach(function(n){var d=e.mDependencies[n];if(d&&d.dependencies.length===0&&!(d.controlsDependencies&&d.controlsDependencies.length)){s.push(n);c.push(d.changeObject.getId());if(d[t]){o.push(function(){return d[t]()})}}})}return n.execPromiseQueueSequentially(o).then(function(n,t,i){delete e.dependencyRemovedInLastBatch[i];t.forEach(function(n){delete e.mDependencies[n]});n.forEach(function(n){d.resolveDependenciesForChange(e,n,i)});return!!n.length}.bind(undefined,c,s,i))}d.createEmptyDependencyMap=function(){return{aChanges:[],mChanges:{},mDependencies:{},mDependentChangesOnMe:{},mControlsWithDependencies:{},dependencyRemovedInLastBatch:{}}};d.addChangeAndUpdateDependencies=function(e,n,t){var d=a(e,n,t);f(e,n,d,t)};d.insertChange=function(e,n,t){var d=n&&n.aChanges&&n.aChanges.indexOf(t);if(d>-1){n.aChanges.splice(d+1,0,e)}};d.addRuntimeChangeToMap=function(e,n,t){a(e,n,t)};d.processDependentQueue=function(e,n,t){return D(e,t).then(function(t,i){if(i){return d.processDependentQueue(e,n,t)}return undefined}.bind(undefined,t))};d.addChangeApplyCallbackToDependency=function(e,n,d){e.mDependencies[n][t]=d};d.removeControlsDependencies=function(e,n){var t=e.mControlsWithDependencies[n];if(t){t.forEach(function(t){var d=e.mDependencies[t];if(d&&d.controlsDependencies&&d.controlsDependencies.length){var i=d.controlsDependencies.indexOf(n);if(i>-1){d.controlsDependencies.splice(i,1);delete e.mControlsWithDependencies[n];e.dependencyRemovedInLastBatch[n]||=[];if(!e.dependencyRemovedInLastBatch[n].includes(t)){e.dependencyRemovedInLastBatch[n].push(t)}}}});delete e.mControlsWithDependencies[n]}};d.resolveDependenciesForChange=function(e,n,t){var d=e.mDependentChangesOnMe[n];if(d){d.forEach(function(d){var i=e.mDependencies[d];var c=i?i.dependencies.indexOf(n):-1;if(c>-1){i.dependencies.splice(c,1);e.dependencyRemovedInLastBatch[t]||=[];if(!e.dependencyRemovedInLastBatch[t].includes(d)){e.dependencyRemovedInLastBatch[t].push(d)}}});delete e.mDependentChangesOnMe[n]}m(e,n)};d.removeChangeFromMap=function(e,n){Object.keys(e.mChanges).some(function(t){var d=e.mChanges[t];var i=d.map(function(e){return e.getId()}).indexOf(n);if(i!==-1){d.splice(i,1);return true}return false});m(e,n)};d.removeChangeFromDependencies=function(e,n,t){d.resolveDependenciesForChange(e,n,t);delete e.mDependencies[n]};d.getOpenDependentChangesForControl=function(n,t,d){var i=[];Object.keys(n.mDependencies).forEach(function(c){n.mDependencies[c].changeObject.getDependentSelectorList().forEach(function(s){if(e.getControlIdBySelector(s,d)===t){i.push(n.mDependencies[c].changeObject)}})});return i};return d});
/*
 * ! OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/changes/UIChangesState", ["sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/apply/_internal/flexState/DataSelector","sap/ui/fl/apply/_internal/flexState/FlexState"],(e,t,n)=>{"use strict";const a="sap.ui.fl.apply._internal.flexObjects.UIChange";const c={};const r=new t({id:"allUIChanges",parentDataSelector:n.getFlexObjectsDataSelector(),executeFunction(e){return e.filter(e=>e.isA(a))},checkInvalidation(e,t){const n=["addFlexObject","removeFlexObject"].includes(t.type);return n&&t.updatedObject?.isA(a)}});const l=new t({id:"vmIndependentUIChanges",parentDataSelector:r,executeFunction(e){return e.filter(e=>!e.getVariantReference()&&!e.getSelector().persistencyKey&&e.getFileType()!=="ctrl_variant_management_change"&&e.getFileType()!=="ctrl_variant_change")},checkInvalidation(e,t){const n=["addFlexObject","removeFlexObject"].includes(t.type);return n&&t.updatedObject?.isA(a)&&!t.updatedObject.getVariantReference()&&!t.updatedObject.getSelector().persistencyKey&&t.updatedObject.getFileType()!=="ctrl_variant_management_change"&&t.updatedObject.getFileType()!=="ctrl_variant_change"}});const p=new t({id:"vmIndependentCompleteDependencyMap",parentDataSelector:l,executeFunction(t,a){const c=e.createEmptyDependencyMap();const r=n.getComponentIdForReference(a.reference);t.forEach(t=>{e.addChangeAndUpdateDependencies(t,r,c)});return c}});c.getVMIndependentCompleteDependencyMap=function(e){return p.get({reference:e})};c.getVariantIndependentUIChanges=function(e){return l.get({reference:e})};c.getAllUIChanges=function(e){return r.get({reference:e})};return c});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/communication/FLPAboutInfo", ["sap/ui/core/Lib","sap/ui/fl/initial/_internal/FlexInfoSession","sap/ui/fl/initial/_internal/Loader","sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/fl/Utils"],function(e,t,a,n,i){"use strict";let o={};function s(e,t,a,n){const i={info:{customProperties:{[n]:{label:t,value:a,showInAbout:true}}}};e.setAppInfo(i)}function r(e){if(e.homePage||e.applicationType!=="UI5"){return false}return true}async function c(i,o){if(r(o)){const r=o.componentInstance;const c=n.getFlexReference({componentData:r.getComponentData(),manifest:r.getManifest()});const p={reference:c,componentId:r.getId(),manifest:r.getManifestObject(),componentData:r.getComponentData(),asyncHints:r._componentConfig.asyncHints};await a.getFlexData(p);const f=t.getByReference(c)?.adaptationId;if(f==="DEFAULT"||!f){return}const u=t.getByReference(c)?.adaptationTitle;const l=e.getResourceBundleFor("sap.ui.fl").getText("CBA_ABOUT_INFO_DIALOG_LABEL");const d=`${u} (${f})`;s(i,l,d,"ui5.flex.adaptation")}}async function p(){const e=await i.getUShellService("AppLifeCycle");const t=e.getCurrentApplication();if(t){await c(e,t)}e.attachAppLoaded(e,o.onAppLoadedListener)}function f(){return new Promise(e=>{sap.ui.require(["sap/ushell/api/BootstrapObserver"],async function(t){await t.ready();e()})})}function u(){return new Promise(t=>{e.attachLibraryChanged(e=>{if(e.getParameter("operation")==="add"&&e.getParameter("metadata").sName==="sap.ushell"){t()}})})}async function l(){if(!e.isLoaded("sap.ushell")){await u()}await f()}o={async initialize(){await l();await p()},async onAppLoadedListener(e,t){const a=e.getParameters();await c(t,a)}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState", ["sap/base/util/restricted/_omit","sap/base/util/restricted/_pick","sap/base/util/ObjectPath","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/apply/_internal/flexState/DataSelector","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/changeHandler/condenser/Classification","sap/ui/fl/LayerUtils"],function(e,t,n,a,r,c,i,s,f,o){"use strict";const u={ctrl_variant_change:{getCondenserInfo(e){return{classification:f.LastOneWins,uniqueKey:e.getVariantId()+e.getChangeType()}}},ctrl_variant_management_change:{getCondenserInfo(e,t){return{classification:f.LastOneWins,uniqueKey:t.modifier.getControlIdBySelector(e.getSelector(),t.appComponent)}}}};var l={};const g={};const v={};function d(e,t,r){var c=s.getComponentData(e);var i=n.get(["technicalParameters",a.VARIANT_TECHNICAL_PARAMETER],c)||[];var f=r.filter(e=>e.visible).map(e=>e.key);if(i.length===1){i=i[0].split(",")}var o=f.find(e=>i.includes(e));if(o){return o}return t.slice().reverse().map(e=>e.getContent().defaultVariant).find(e=>f.includes(e))}function p(e,t,n){var a=(g[t]||{})[n];return{defaultVariant:n,currentVariant:a,variants:[],variantManagementChanges:e.filter(function(e){return e.getSelector().id===n})}}function h(e,t){return e.find(e=>e.getId()===t)}function m(e,t){const n=[];let a=t;let r;do{r=h(e,a.getVariantReference());if(r){n.push(r);a=r}}while(r);return n.map(e=>e.getId())}function V(e,t){const n=m(e.variants,t);return{instance:t,variantChanges:e.variantChanges.filter(function(e){return e.getVariantId()===t.getId()}),controlChanges:e.changes.filter(function(e){var a=e.isA("sap.ui.fl.apply._internal.flexObjects.UIChange");if(!a){return false}var r=e.getVariantReference()===t.getId();var c=n.indexOf(e.getVariantReference())>-1;var i=o.compareAgainstCurrentLayer(e.getLayer(),t.getLayer())===-1;return r||c&&i}),key:t.getId(),title:t.getName(),layer:t.getLayer(),favorite:t.getFavorite(),executeOnSelect:t.getExecuteOnSelection(),visible:t.getVisible(),author:t.getAuthor(),contexts:t.getContexts(),isStandardVariant:t.getStandardVariant()}}function C(e,t){switch(t.getChangeType()){case"setTitle":e.title=t.getText("title");break;case"setFavorite":e.favorite=t.getContent().favorite;break;case"setExecuteOnSelect":e.executeOnSelect=t.getContent().executeOnSelect;break;case"setVisible":e.visible=t.getContent().visible;break;case"setContexts":e.contexts=t.getContent().contexts;break;default:throw Error("Unknown ctrl_variant_change type")}}function R(e,t){var n=t.getContent().defaultVariant;e.variants.forEach(t=>{if(t.key===n&&t.visible){e.defaultVariant=n}})}function y(e){const t={variants:[],variantManagementChanges:[],changes:[],variantChanges:[]};e.forEach(e=>{switch(e.getFileType()){case"ctrl_variant":t.variants.push(e);break;case"ctrl_variant_management_change":t.variantManagementChanges.push(e);break;case"change":t.changes.push(e);break;case"ctrl_variant_change":t.variantChanges.push(e);break;default:break}});return t}function b(e,t){const a=y(e);const r=t.reference;const c={};a.variants.forEach(e=>{var t=e.getVariantManagementReference();c[t]||=p(a.variantManagementChanges,r,t);c[t].variants.push(V(a,e))});a.variantChanges.forEach(e=>{const t=O(c,e);if(t){C(t,e,r,c)}});a.variantManagementChanges.forEach(e=>{const t=c[e.getSelector().id];if(t){R(t,e)}});Object.keys(c).forEach(e=>{const t=c[e];if(!t.currentVariant||!t.variants.some(e=>e.key===t.currentVariant)){const c=d(r,a.variantManagementChanges,t.variants)||e;t.currentVariant=c;n.set([r,e],c,g)}t.variants.sort((e,t)=>{if(e.isStandardVariant){return-1}if(t.isStandardVariant){return 1}return e.title.toLowerCase()<t.title.toLowerCase()?-1:1});var i=t.variants.find(e=>e.key===t.currentVariant).controlChanges;t.modified=i.some(e=>!e.isPersisted()&&!e.getSavedToVariant());t.variants.some(e=>{if(!e.favorite&&e.key===t.defaultVariant){e.favorite=true;return true}return false})});return c}function O(e,t){var n;Object.values(e).some(function(e){return e.variants.some(function(e){if(t.getVariantId()===e.key){n=e;return true}return false})});return n}var j=new i({id:"variantManagementMap",parentDataSelector:s.getFlexObjectsDataSelector(),executeFunction:b,checkInvalidation(e,t){if(t.type==="switchVariant"){return true}const n=["addFlexObject","updateFlexObject","removeFlexObject"];const a=n.includes(t.type);const r=["ctrl_variant","ctrl_variant_change","ctrl_variant_management_change"];const c=r.includes(t.updatedObject?.getFileType?.());const i=t.updatedObject?.getVariantReference?.();return a&&(c||i)}});var x=new i({id:"variantManagements",parameterKey:"variantManagementReference",parentDataSelector:j,executeFunction(e,t){return e[t.variantManagementReference]}});var F=new i({id:"variants",parameterKey:"variantReference",parentDataSelector:x,executeFunction(e,t){return e.variants.find(e=>e.instance.getId()===t.variantReference)}});const S=new i({id:"vmDependentDependencyMap",parentDataSelector:j,executeFunction(e,t){let n=[];Object.entries(e).forEach(([e,a])=>{n=n.concat(l.getControlChangesForVariant({vmReference:e,vReference:a.currentVariant,reference:t.reference}))});const a=c.createEmptyDependencyMap();const r=s.getComponentIdForReference(t.reference);n.forEach(e=>{c.addChangeAndUpdateDependencies(e,r,a)});return a},checkInvalidation(e,t){if(t.type==="switchVariant"){return true}const n=["addFlexObject","removeFlexObject"].includes(t.type);const a=t.updatedObject.getFileType()==="change";const r=Object.values(g[e.reference]||{});return a&&n&&r.includes(t.updatedObject.getVariantReference())}});var _=new i({id:"variantDependentFlexObjects",parentDataSelector:s.getFlexObjectsDataSelector(),executeFunction(e){return e.filter(function(e){const t=e.getVariantReference?.();const n=["ctrl_variant","ctrl_variant_change","ctrl_variant_management_change"].indexOf(e.getFileType())>-1;return n||t})}});l.getDependencyMap=function(e){return S.get({reference:e})};l.getVariantDependentFlexObjects=function(e){return _.get({reference:e})};l.getChangeInformationProvider=function(e){return u[e.getFileType()]};l.resetCurrentVariantReference=function(e){delete g[e];j.checkUpdate({reference:e})};l.getVariantManagementMap=function(){return j};l.addRuntimeSteadyObject=function(e,t,n){s.addRuntimeSteadyObject(e,t,n)};l.clearRuntimeSteadyObjects=function(e,t){s.clearRuntimeSteadyObjects(e,t)};l.addRuntimeOnlyFlexObjects=function(e,t,n){s.addFlexObjectsToRuntimeOnlyData(e,t,n);s.getFlexObjectsDataSelector().clearCachedResult({reference:e})};l.loadVariant=async function(e){await s.lazyLoadFlVariant({variantReference:e.variantReference,reference:e.reference,componentId:e.componentId})};l.getControlChangesForVariant=function(e){const t=l.getVariant(e);if(t){return t.controlChanges.filter(function(t){const n=t.getState()!==r.LifecycleState.PERSISTED;const a=t.getVariantReference()!==e.vReference;return(e.includeDirtyChanges!==false||!n)&&(e.includeReferencedChanges!==false||!a)})}return[]};l.getVariantChangesForVariant=function(e){var t=l.getVariant(e);return t?.variantChanges||[]};l.getVariant=function(e){var t=e.vReference||x.get({variantManagementReference:e.vmReference,reference:e.reference}).defaultVariant;return F.get({variantManagementReference:e.vmReference,variantReference:t,reference:e.reference})};l.updateVariant=function(e){j.checkUpdate({reference:e.reference},[{type:"updateFlexObject",updatedObject:e.variant}])};l.getCurrentVariantReference=function(e){var t=x.get({variantManagementReference:e.vmReference,reference:e.reference});return t?.currentVariant};l.getDefaultVariantReference=function(e){const t=x.get({variantManagementReference:e.vmReference,reference:e.reference});return t?.defaultVariant};l.getAllCurrentVariants=function(e){const t=j.get({reference:e});return Object.entries(t).map(t=>{const n=l.getVariant({vmReference:t[0],vReference:t[1].currentVariant,reference:e}).instance;return n})};l.getVariantManagementReferences=function(e){var t=j.get({reference:e});return Object.keys(t)};l.getVariantManagementReferenceForVariant=function(e,t){const n=j.get({reference:e});return Object.entries(n).find(([,e])=>e.variants.some(e=>e.key===t))?.[0]};l.getAllVariants=function(e){var t=j.get({reference:e});return Object.keys(t).reduce(function(e,n){return e.concat(t[n].variants)},[])};l.getVariantManagementChanges=function(e){const t=j.get({reference:e.reference});const n=Object.values(t).map(e=>e.variantManagementChanges).flat();if(!e.vReference){return n}return n.filter(t=>e.vReference===t.getContent().defaultVariant)};l.getInitialUIChanges=function(e){const t=j.get({reference:e.reference});e.includeDirtyChanges=!!e.includeDirtyChanges;return Object.keys(t).reduce(function(n,a){if(e.vmReference&&e.vmReference===a||!e.vmReference){const r={...e,vmReference:a,vReference:t[a].currentVariant};return n.concat(l.getControlChangesForVariant(r))}return n},[])};l.getAllCurrentFlexObjects=function(e){const t=j.get({reference:e.reference});return Object.keys(t).reduce(function(n,a){if(e.vmReference&&e.vmReference===a||!e.vmReference){const r={...e,vmReference:a,vReference:t[a].currentVariant};const c=l.getVariant(r);return n.concat(c.variantChanges).concat(c.controlChanges).concat(t[a].variantManagementChanges).concat(t[a].variants.map(e=>e.instance))}return n},[])};l.filterHiddenFlexObjects=function(e,t){const n=j.get({reference:t});const a=[];Object.values(n).forEach(e=>{e.variants.forEach(e=>{if(e.visible===false){a.push(e.key)}})});return e.filter(e=>{const t={ctrl_variant:()=>e.getVariantId(),ctrl_variant_change:()=>e.getVariantId(),change:()=>e.getVariantReference()}[e.getFileType()]?.();return!a.includes(t)})};l.setCurrentVariant=function(e){n.set([e.reference,e.vmReference],e.newVReference,g);j.checkUpdate({reference:e.reference},[{type:"switchVariant"}])};l.setVariantSwitchPromise=function(e,t,n){v[e]||={};v[e][t]=n};l.waitForVariantSwitch=function(e,t){return v[e]?.[t]||Promise.resolve()};l.waitForAllVariantSwitches=function(e){return Promise.all(Object.values(v[e]||{}))};l.getVariantsForVariantManagement=function(e){const t=x.get({variantManagementReference:e.vmReference,reference:e.reference});return t?.variants||[]};return l});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagerApply", ["sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/changes/Applier","sap/ui/fl/apply/_internal/changes/Reverter","sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/flexState/FlexObjectState","sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/fl/requireAsync","sap/ui/fl/Utils"],function(e,n,t,r,a,i,c,o,s){"use strict";const p={};function f(e){const n=a.getControlChangesForVariant({vmReference:e.vmReference,reference:e.reference,vReference:e.currentVReference});const t=a.getControlChangesForVariant({vmReference:e.vmReference,reference:e.reference,vReference:e.newVReference});const r=n.findIndex((e,n)=>{const r=t[n];return!r||e.getId()!==r.getId()});const i=r>=0?r:n.length;return{changesToBeReverted:n.slice(i).reverse(),changesToBeApplied:t.slice(i)}}async function l(e){const c=f(e);const o=i.getLiveDependencyMap(e.reference);c.changesToBeReverted.forEach(e=>e.setQueuedForRevert());c.changesToBeApplied.forEach(n=>{if(!n.isApplyProcessFinished()){n.setQueuedForApply();r.addRuntimeChangeToMap(n,e.appComponent,o)}});if(c.changesToBeReverted.length>0){await t.revertMultipleChanges(c.changesToBeReverted,{...e,skipSetQueued:true})}if(c.changesToBeApplied.length>0){await n.applyMultipleChanges(c.changesToBeApplied,{...e,skipSetQueued:true})}a.setCurrentVariant(e)}p.executeAfterSwitch=function(e,n,t){const r=a.waitForVariantSwitch(n,t).catch(function(){}).then(e);a.setVariantSwitchPromise(n,t,r);return r};p.updateCurrentVariant=function(n){const t=n.vmControl.getVariantManagementReference();const r=n.appComponent||s.getAppComponentForControl(n.vmControl);const i=c.getFlexReferenceForControl(r);const o=async()=>{const c=a.getVariant({reference:i,vmReference:t,vReference:n.newVariantReference});if(n.scenario){c.createScenario=n.scenario}const o=n.vmControl.getCurrentVariantReference();if(o!==n.newVariantReference){await l({vmReference:t,currentVReference:o,newVReference:n.newVariantReference,appComponent:r,modifier:e,reference:i})}n.vmControl._executeAllVariantAppliedListeners(c)};if(n.skipExecuteAfterSwitch){return o()}return p.executeAfterSwitch(o,i,t)};p.handleSelectVariant=async function(e,n){const t=s.getAppComponentForControl(n);const r=n.getVariantManagementReference();const a=n.getModified();const i=e.getParameter("key");const c=n.getCurrentVariantReference();const f=c!==i;await p.updateCurrentVariant({newVariantReference:i,appComponent:t,vmControl:n,skipExecuteAfterSwitch:true});if(a){const e=await o("sap/ui/fl/variants/VariantManager");await e.eraseDirtyChangesOnVariant(r,c,n,!f)}};return p});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/init", ["sap/ui/fl/apply/_internal/changeHandlers/ChangeHandlerRegistration","sap/ui/fl/apply/_internal/flexState/communication/FLPAboutInfo","sap/ui/fl/apply/_internal/DelegateMediator","sap/ui/fl/changeHandler/ChangeAnnotation"],function(e,a,t,l){"use strict";e.registerPredefinedChangeHandlers();e.getChangeHandlersOfLoadedLibsAndRegisterOnNewLoadedLibs();e.registerAnnotationChangeHandler({changeHandler:l,isDefaultChangeHandler:true});t.registerReadDelegate({modelType:"sap.ui.model.odata.v4.ODataModel",delegate:"sap/ui/fl/write/_internal/delegates/ODataV4ReadDelegate"});t.registerReadDelegate({modelType:"sap.ui.model.odata.v2.ODataModel",delegate:"sap/ui/fl/write/_internal/delegates/ODataV2ReadDelegate"});t.registerReadDelegate({modelType:"sap.ui.model.odata.ODataModel",delegate:"sap/ui/fl/write/_internal/delegates/ODataV2ReadDelegate"});a.initialize()});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/api/ControlVariantApplyAPI", ["sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/Component","sap/ui/core/Element","sap/ui/fl/apply/_internal/controlVariants/URLHandler","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagerApply","sap/ui/fl/apply/_internal/flexState/FlexObjectState","sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/fl/Utils","sap/ui/fl/apply/_internal/init"],function(e,t,n,a,r,o,i,l,c,s,f){"use strict";var p="$FlexVariants";function d(e){var t=e.getModel(p);if(t){return Promise.resolve(t)}return new Promise(function(n){function a(){t=e.getModel(p);if(t){e.detachModelContextChange(a);n(t)}}e.attachModelContextChange(a)})}function m(e,t,n){const a=i.getVariantChangesForVariant({vmReference:e,reference:n});const r=i.getDefaultVariantReference({vmReference:e,reference:n});if(t.getExecuteOnSelectionForStandardDefault()&&r===e&&!a.some(e=>e.getChangeType()==="setExecuteOnSelect")){const t=i.getVariant({vmReference:e,reference:n,vReference:e});t.instance.setExecuteOnSelection(true);i.updateVariant({reference:n,variant:t.instance});return true}return false}function g(e){const n=i.getInitialUIChanges({vmReference:e.vmReference,reference:e.reference});const a=n.reduce((n,a)=>{const r=a.getSelector();const o=t.bySelector(r,e.appComponent);if(o&&f.indexOfObject(n,{selector:o})===-1){n.push({selector:o})}return n},[]);return a.length?c.waitForFlexObjectsToBeApplied(a,e.appComponent):Promise.resolve()}function u(e){return new Promise(t=>{if(e.getDomRef()){t()}else{e.addEventDelegate({onAfterRendering(){t()}})}})}var V={getVariantModelName(){return p},getVariantModel(e){return d(e)},getVariantManagementControlByVMReference(e,t){return o.getVariantManagementControlByVMReference(e,t)},clearVariantParameterInURL(t){var n;var a=f.getAppComponentForControl(t.control);var o=a&&a.getModel(p);if(!o){e.error("Variant model could not be found on the provided control");return}if(t.control.isA("sap.ui.fl.variants.VariantManagement")){var i=o.getLocalId(t.control.getId(),a);var l=r.removeURLParameterForVariantManagement({model:o,vmReference:i});n=l.parameters}r.update({parameters:n||[],updateURL:true,updateHashEntry:!!o,model:o||{},silent:!o})},async activateVariant(t){function r(t){e.error(t);throw t}let o;if(typeof t.element==="string"){o=n.getComponentById(t.element);if(!(o instanceof n)){o=a.getElementById(t.element);if(!(o instanceof a)){r(Error("No valid component or control found for the provided ID"))}}}else if(t.element instanceof n||t.element instanceof a){o=t.element}const c=f.getAppComponentForControl(o);const p=s.getFlexReferenceForControl(o);if(!c){r(Error("A valid variant management control or component (instance or ID) should be passed as parameter"))}if(t.standardVariant&&!o.isA("sap.ui.fl.variants.VariantManagement")){r(Error("With using standardVariant and no variantReference, a variant management control must be passed as element"))}let d;let m;let g;if(t.standardVariant){d=o.getVariantManagementReference();m=d;g=o}else{d=i.getVariantManagementReferenceForVariant(p,t.variantReference);m=t.variantReference;if(!d){try{await i.loadVariant({reference:p,variantReference:m,componentId:c.getId()});d=i.getVariantManagementReferenceForVariant(p,t.variantReference)}catch(e){r(Error(`Variant with reference '${m}' could not be found`))}if(!d){r(Error("Variant management reference not found. Check the passed element and variantReference"))}}g=this.getVariantManagementControlByVMReference(d,c)}await g.waitForInit();try{await l.updateCurrentVariant({newVariantReference:m,appComponent:c,vmControl:g})}catch(e){r(e)}},async attachVariantApplied(t){const n=a.getElementById(t.vmControlId);await n.waitForInit();const r=t.selector.id&&a.getElementById(t.selector.id)||t.selector;const l=f.getAppComponentForControl(r);const c=n.getVariantManagementReference();const p=s.getFlexReferenceForControl(n);const d=m(c,n,p);if(t.callAfterInitialVariant||d){g({appComponent:l,reference:p,vmReference:c}).then(()=>{const e=i.getCurrentVariantReference({vmReference:c,reference:p});const n=i.getVariant({vmReference:c,reference:p,vReference:e});t.callback(n)})}await u(r);if(o.getRelevantVariantManagementControlId(r)===t.vmControlId){n.setShowExecuteOnSelection(true);n._addVariantAppliedListener(r,t.callback)}else{e.error("Error in attachVariantApplied: The passed VariantManagement ID doesn't match the responsible VariantManagement control")}},async detachVariantApplied(e){const t=a.getElementById(e.vmControlId);const n=e.selector.id&&a.getElementById(e.selector.id)||e.selector;await Promise.all([t.waitForInit(),u(n)]);t._removeVariantAppliedListener(n)}};return V});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/AddXML", ["sap/ui/fl/changeHandler/BaseAddXml"],function(e){"use strict";var t={};t.applyChange=function(t,n,r){var g=t.getContent();var a={aggregationName:g.targetAggregation,index:g.index};return e.applyChange(t,n,r,a)};t.revertChange=e.revertChange;t.completeChangeContent=function(t,n){const r=n.content||n;const g={};if(!r.targetAggregation){e._throwMissingAttributeError("targetAggregation")}else{g.targetAggregation=r.targetAggregation}if(r.index===undefined){e._throwMissingAttributeError("index")}else{g.index=r.index}e.completeChangeContent(t,n,g)};return t});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/AddXMLAtExtensionPoint", ["sap/ui/fl/apply/_internal/extensionPoint/Registry","sap/ui/fl/changeHandler/BaseAddXml"],function(e,n){"use strict";const t={};function i(e){let n=e.index;if(e.referencedExtensionPoint){n+=i(e.referencedExtensionPoint)}return n}t.applyChange=async function(t,o,a){const r=a.view;const s=a.modifier;const d=a.viewId||s.getId(r);const f=t.getSelector();const l=t.getExtensionPointInfo&&t.getExtensionPointInfo()||await s.getExtensionPointInfo(f.name,r);if(!l){throw new Error(`AddXMLAtExtensionPoint-Error: Either no Extension-Point found by name '${f&&f.name}' or multiple Extension-Points available with the given name in the view (view.id='${d}'). Multiple Extension-points with the same name in one view are not supported!`)}(l.defaultContent||[]).forEach(function(e){if(e){s.destroy(e)}});l.defaultContent=[];l.index=i(l);if(s.targets==="xmlTree"){l.skipAdjustIndex=true}const c=await n.applyChange(t,o,a,l);if(l.ready){l.ready(c)}e.addCreatedControls({name:f.name,viewId:d,createdControlsIds:c.map(e=>s.getId(e))})};t.revertChange=n.revertChange;t.completeChangeContent=function(e,t){n.completeChangeContent(e,t)};return t});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/Base", ["sap/base/util/LoaderExtensions"],function(t){"use strict";const e={setTextInChange(t,e,n,o){t.texts||={};t.texts[e]||={};t.texts[e].value=n;t.texts[e].type=o},async instantiateFragment(e,n){const o=e.getFlexObjectMetadata();const s=o.moduleName;if(!s){return Promise.reject(new Error("The module name of the fragment is not set. This should happen in the backend"))}const a=n.viewId?`${n.viewId}--`:"";const i=o.projectId||"";const r=e.getExtensionPointInfo&&e.getExtensionPointInfo()&&e.getExtensionPointInfo().fragmentId||"";const c=i&&r?".":"";const d=a+i+c+r;const m=n.modifier;const g=n.view;const u=n.fragment||t.loadResource(s,{dataType:"text"});try{return await m.instantiateFragment(u,d,g)}catch(t){throw new Error(`The following XML Fragment could not be instantiated: ${u} Reason: ${t.message}`)}},markAsNotApplicable(t,e){const n={message:t};if(!e){throw n}return Promise.reject(n)}};return e});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/BaseAddXml", ["sap/base/util/LoaderExtensions","sap/ui/fl/apply/_internal/DelegateMediator","sap/ui/fl/changeHandler/common/revertAddedControls","sap/ui/fl/changeHandler/Base"],function(t,e,n,a){"use strict";const o={};o.applyChange=async function(n,r,i,s){const g=i.modifier;const c=s.aggregationName;const f=n.getFlexObjectMetadata();const d=f.moduleName;const l=await g.findAggregation(r,c);if(!l){throw Error(`The given Aggregation is not available in the given control: ${g.getId(r)}`)}let h=await t.loadResource(d,{dataType:"text"});const m=e.getAddXMLAdjustFragmentHandlers();if(m){for(const t in m){h=await m[t](h,i)}}const u=await a.instantiateFragment(n,{...i,fragment:h});let p=0;for(const t of u){const e=await g.validateType(t,l,r,h,p);p++;if(!e){o._destroyArrayOfControls(u);throw Error(`The content of the xml fragment does not match the type of the targetAggregation: ${l.type}`)}}const w=[];let y=0;for(const t of u){await g.insertAggregation(r,c,t,s.index+y,i.view,s.skipAdjustIndex);y++;w.push({id:g.getId(t),aggregationName:c})}n.setRevertData(w);return u};o.revertChange=n;o._throwMissingAttributeError=function(t){throw new Error(`Attribute missing from the change specific content '${t}'`)};o._destroyArrayOfControls=function(t){t.forEach(function(t){if(t.destroy){t.destroy()}})};o.completeChangeContent=function(t,e,n){n||={};const a=e.content||e;if(!a.fragmentPath){o._throwMissingAttributeError("fragmentPath")}n.fragmentPath??=a.fragmentPath;t.setContent(n);let r=t.getFlexObjectMetadata().reference.replace(/\.Component/g,"").replace(/\./g,"/");r+="/changes/";r+=n.fragmentPath;const i=t.getFlexObjectMetadata();i.moduleName=r;t.setFlexObjectMetadata(i)};return o});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/ChangeAnnotation", ["sap/ui/fl/changeHandler/condenser/Classification"],function(t){"use strict";const n={};n.applyChange=function(t){const n=t.getContent();const e={path:n.annotationPath};const o=t.getText("annotationText")||n.value;const a=n.objectTemplateInfo;if(a){const t=JSON.parse(a.templateAsString);Object.keys(t).forEach(n=>{t[n]=t[n].replace(a.placeholder,o)});e.value=t}else{e.value=o}return e};n.revertChange=function(){};n.completeChangeContent=function(t,n){const e={annotationPath:n.content.annotationPath};if(n.content.objectTemplateInfo){e.objectTemplateInfo=n.content.objectTemplateInfo}if(n.content.text){t.setText("annotationText",n.content.text,n.content.textType)}else{e.value=n.content.value}t.setContent(e)};n.getCondenserInfo=function(n,e){return{affectedControl:e.appComponent,classification:t.LastOneWins,uniqueKey:`${n.getContent().annotationPath}_${n.getChangeType()}`}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/HideControl", ["sap/base/Log","sap/ui/fl/changeHandler/condenser/Classification","sap/ui/core/util/reflection/JsControlTreeModifier"],function(e,t,n){"use strict";const i="visible";const o={};o.applyChange=async function(e,t,n){const i=n.modifier;const o=await i.getVisible(t);e.setRevertData({originalValue:o});i.setVisible(t,false)};o.revertChange=function(t,n,i){const o=t.getRevertData();if(o){i.modifier.setVisible(n,o.originalValue);t.resetRevertData()}else{e.error("Attempt to revert an unapplied change.")}};o.completeChangeContent=function(){};o.getCondenserInfo=function(e){return{affectedControl:e.getSelector(),classification:t.Reverse,uniqueKey:i}};o.getChangeVisualizationInfo=function(e,t){const i=e.getSelector();const o=n.bySelector(i,t);const r={affectedControls:[i],updateRequired:true};function a(e){if(!e){return null}if(e.getVisible?.()){return e}return a(e.getParent())}const s=a(o);if(s){r.displayControls=[s.getId()]}return r};return o});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/MoveControls", ["sap/base/Log","sap/ui/fl/changeHandler/condenser/Classification"],function(e,t){"use strict";const o={};o.SOURCE_ALIAS="source";o.TARGET_ALIAS="target";o.MOVED_ELEMENTS_ALIAS="movedElements";function r(e,t,o,r){if(!e){throw new Error("No change instance")}const n=e.getContent();if(!n||!n.movedElements||n.movedElements.length===0){throw new Error("Change format invalid")}if(!n.source||!n.source.selector){throw new Error("No source supplied for move")}if(!n.target||!n.target.selector){throw new Error("No target supplied for move")}if(!t.bySelector(n.source.selector,r,o)){throw new Error("Move source parent not found")}if(!t.bySelector(n.target.selector,r,o)){throw new Error("Move target parent not found")}if(!n.source.selector.aggregation){throw new Error("No source aggregation supplied for move")}if(!n.target.selector.aggregation){throw new Error("No target aggregation supplied for move")}}async function n(e,t,o,r){if(!e.selector&&!e.id){throw new Error("Change format invalid - moveElements element has no id attribute")}if(typeof e.targetIndex!=="number"){throw new Error(`Missing targetIndex for element with id '${e.selector.id}' in movedElements supplied`)}const n=await t.bySelector(e.selector||e.id,o,r);if(!n){throw new Error(`Control to move was not found. Id: '${e.selector.id}'`)}return n}function a(e){if(!e.movedElements){throw new Error("mSpecificChangeInfo.movedElements attribute required")}if(e.movedElements.length===0){throw new Error("MovedElements array is empty")}e.movedElements.forEach(function(e){if(!e.id){throw new Error("MovedControls element has no id attribute")}if(typeof e.sourceIndex!=="number"){throw new Error("SourceIndex attribute at MovedElements element is no number")}if(typeof e.targetIndex!=="number"){throw new Error("TargetIndex attribute at MovedElements element is no number")}})}async function s(e,t,o){delete t.source.publicAggregation;delete t.target.publicAggregation;const r=t.source.parent||await e.bySelector(t.source.id,o);const n=t.target.parent||await e.bySelector(t.target.id,o);const a=t.source.aggregation;const s=t.target.aggregation;const g={aggregation:t.source.aggregation,type:e.getControlType(r)};const c={aggregation:t.target.aggregation,type:e.getControlType(n)};const i={source:{id:r.getId(),aggregation:a,type:g.type,selector:e.getSelector(t.source.id,o,g)},target:{id:n.getId(),aggregation:s,type:c.type,selector:e.getSelector(t.target.id,o,c)},movedElements:t.movedElements};return i}o.applyChange=async function(e,t,o){const a=o.modifier;const s=o.view;const g=o.appComponent;const c=e.getContent();const i=[];let l=false;r(e,a,s,g);for(const e of c.movedElements){const t=await n(e,a,g,s);let r=a.getParent(t);let d=o.sourceAggregation||await a.getParentAggregationName(t,r);const u=await a.bySelector(c.target.selector,g,s);const m=o.targetAggregation||c.target.selector.aggregation;let f=await a.findIndexInParentAggregation(t);const E=e.targetIndex;if(f>-1){if(f===E&&d===m&&a.getParent(t)===u){f=e.sourceIndex;d=o.sourceAggregation||c.source.selector.aggregation;l=true;r=await a.bySelector(c.source.selector,g,s)||r}}if(f>-1){i.unshift({index:f,aggregation:d,sourceParent:a.getSelector(r,g)})}if(!l){await a.moveAggregation(r,d,u,m,t,E,s)}}e.setRevertData(i)};o.revertChange=async function(e,t,o){const a=o.modifier;const s=o.view;const g=o.appComponent;const c=e.getContent();r(e,a,s,g);let i=await a.bySelector(c.source.selector,g,s);const l=await a.bySelector(c.target.selector,g,s);let d=c.source.selector.aggregation;const u=c.target.selector.aggregation;const m=e.getRevertData();c.movedElements.reverse();let f=0;for(const e of c.movedElements){const t=await n(e,a,g,s);if(!t){throw new Error("Element to move not found")}let o=e.sourceIndex;if(m){const e=m[f];d=e.aggregation;o=e.index;i=await a.bySelector(e.sourceParent,g,s)||i}await a.moveAggregation(l,u,i,d,t,o,s);f++}e.resetRevertData()};o.completeChangeContent=async function(e,t,r){const n=r.modifier;const g=r.appComponent;const c=t.content||t;a(c);const i=await s(n,c,g);const l={movedElements:[],source:{selector:i.source.selector},target:{selector:i.target.selector}};for(const t of i.movedElements){const a=t.element||await n.bySelector(t.id,g);l.movedElements.push({selector:n.getSelector(a,g),sourceIndex:t.sourceIndex,targetIndex:t.targetIndex});e.addDependentControl(i.source.id,o.SOURCE_ALIAS,r);e.addDependentControl(i.target.id,o.TARGET_ALIAS,r);e.addDependentControl(i.movedElements.map(function(e){return e.id}),o.MOVED_ELEMENTS_ALIAS,r)}e.setContent(l)};o.getCondenserInfo=function(e){const o=e.getContent();const r=e.getRevertData()[0];return{affectedControl:o.movedElements[0].selector,classification:t.Move,sourceContainer:r.sourceParent,targetContainer:o.target.selector,sourceIndex:r.index,sourceAggregation:r.aggregation,targetAggregation:o.target.selector.aggregation,setTargetIndex(e,t){const o=e.getContent();o.movedElements[0].targetIndex=t;e.setContent(o)},getTargetIndex(e){return e.getContent().movedElements[0].targetIndex},setIndexInRevertData(e,t){const o=e.getRevertData();o[0].index=t;e.setRevertData(o)}}};o.getChangeVisualizationInfo=function(e){const t=e.getContent();const o=e.getRevertData()[0];return{affectedControls:[t.movedElements[0].selector],dependentControls:[t.source.selector],descriptionPayload:{sourceContainer:o.sourceParent,targetContainer:t.target.selector}}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/MoveElements", [],function(){"use strict";var e={};e.CHANGE_TYPE="moveElements";function t(e,t,r,o){if(!e){throw new Error("No change instance")}var n=e.getContent();if(!n||!n.movedElements||n.movedElements.length===0){throw new Error("Change format invalid")}if(!e.getSelector().aggregation){throw new Error("No source aggregation supplied via selector for move")}if(!n.target||!n.target.selector){throw new Error("No target supplied for move")}if(!t.bySelector(n.target.selector,o,r)){throw new Error("Move target parent not found")}if(!n.target.selector.aggregation){throw new Error("No target aggregation supplied for move")}}async function r(e,t,r,o){if(!e.selector&&!e.id){throw new Error("Change format invalid - moveElements element has no id attribute")}if(typeof e.targetIndex!=="number"){throw new Error(`Missing targetIndex for element with id '${e.selector.id}' in movedElements supplied`)}return await t.bySelector(e.selector||e.id,r,o)}e.applyChange=async function(e,o,n){var a=n.modifier;var g=n.view;var i=n.appComponent;var s=e.getContent();t(e,a,g,i);const c=e.getSelector().aggregation;const l=s.target.selector.aggregation;const d=await a.bySelector(s.target.selector,i,g);for(const e of s.movedElements){const t=await r(e,a,i,g);if(!t){throw new Error("Element to move not found")}await a.moveAggregation(o,c,d,l,t,e.targetIndex,g)}};e.completeChangeContent=function(){throw new Error("Using deprecated change handler. Please consider using 'MoveControls' instead")};e.getSpecificChangeInfo=function(e,t){var r=t.source.parent||e.bySelector(t.source.id);var o=t.target.parent||e.bySelector(t.target.id);var n=t.source.aggregation;var a=t.target.aggregation;var g={source:{id:r.getId(),aggregation:n,type:e.getControlType(r)},target:{id:o.getId(),aggregation:a,type:e.getControlType(o)},movedElements:t.movedElements};return g};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/PropertyBindingChange", ["sap/base/Log","sap/ui/fl/changeHandler/condenser/Classification"],function(e,t){"use strict";var n={};n.applyChange=function(e,t,n){var r=e.getContent();var i=r.property;var o=r.newBinding;var a=n.modifier;return Promise.resolve().then(a.getPropertyBindingOrProperty.bind(a,t,i)).then(function(n){e.setRevertData({originalValue:n});a.setPropertyBinding(t,i,o)})};n.revertChange=function(t,n,r){var i=t.getRevertData();if(i){var o=t.getContent();var a=o.property;var s=i.originalValue;var p=r.modifier;p.setPropertyBindingOrProperty(n,a,s);t.resetRevertData()}else{e.error("Attempt to revert an unapplied change.")}};n.completeChangeContent=function(e,t){if(!t.content){throw new Error("oSpecificChangeInfo attribute required")}e.setContent(t.content)};n.getCondenserInfo=function(e){return{affectedControl:e.getSelector(),classification:t.LastOneWins,uniqueKey:e.getContent().property}};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/PropertyChange", ["sap/ui/fl/Utils","sap/ui/fl/changeHandler/condenser/Classification","sap/base/Log","sap/base/util/isPlainObject"],function(e,t,n,r){"use strict";var i={};function a(t){return e.isBinding(t)||r(t)}function o(e,t,n,r){try{if(a(n)){r.setPropertyBinding(e,t,n)}else{r.setProperty(e,t,n)}}catch(e){throw new Error(`Applying property changes failed: ${e}`)}}i.applyChange=function(e,t,n){var r=e.getContent();var i=r.property;var a=r.newValue;var s=n.modifier;return Promise.resolve().then(s.getPropertyBindingOrProperty.bind(s,t,i)).then(function(n){e.setRevertData({originalValue:n});o(t,i,a,s)})};i.revertChange=function(e,t,r){var i=e.getRevertData();if(i){var a=e.getContent();var s=a.property;var c=i.originalValue;var p=r.modifier;o(t,s,c,p);e.resetRevertData()}else{n.error("Attempt to revert an unapplied change.")}};i.completeChangeContent=function(e,t){if(!t.content){throw new Error("oSpecificChangeInfo attribute required")}e.setContent(t.content)};i.getCondenserInfo=function(e){return{affectedControl:e.getSelector(),classification:t.LastOneWins,uniqueKey:e.getContent().property}};return i},true);
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/StashControl", ["sap/ui/fl/LayerUtils","sap/ui/fl/changeHandler/condenser/Classification","sap/ui/core/util/reflection/JsControlTreeModifier"],function(e,t,n){"use strict";const a={};a.applyChange=async function(t,n,a){const i=a.modifier;const o=await i.getStashed(n);const r=await i.findIndexInParentAggregation(n);this.setChangeRevertData(t,o,r);if(e.isDeveloperLayer(t.getLayer())){return i.setStashed(n,true)}return i.setVisible(n,false)};a.revertChange=async function(t,n,a){const i=t.getRevertData();const o=a.modifier;if(e.isDeveloperLayer(t.getLayer())){const e=await o.setStashed(n,i.originalValue,a.appComponent);if(e){const t=await o.findIndexInParentAggregation(e);if(t!==i.originalIndex){const t=o.getParent(e);const n=await o.getParentAggregationName(e);await o.moveAggregation(t,n,t,n,e,i.originalIndex)}}}o.setVisible(n,!i.originalValue);t.resetRevertData()};a.completeChangeContent=function(){};a.setChangeRevertData=function(e,t,n){e.setRevertData({originalValue:t,originalIndex:n})};a.getCondenserInfo=function(e){return{affectedControl:e.getSelector(),classification:t.Reverse,uniqueKey:"stashed"}};a.getChangeVisualizationInfo=function(e,t){const a=e.getSelector();const i=n.bySelector(a,t);return{affectedControls:[a],displayControls:[i.getParent().getId()]}};return a});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/UnhideControl", ["sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/changeHandler/condenser/Classification"],function(e,t,n){"use strict";const i="visible";const r={};r.applyChange=async function(e,t,n){const r=n.modifier;const o=await r.getProperty(t,i);e.setRevertData({originalValue:o});n.modifier.setVisible(t,true)};r.revertChange=function(t,n,i){const r=t.getRevertData();if(r){i.modifier.setVisible(n,r.originalValue);t.resetRevertData()}else{e.error("Attempt to revert an unapplied change.")}};r.completeChangeContent=function(){};r.getCondenserInfo=function(e){return{affectedControl:e.getSelector(),classification:n.Reverse,uniqueKey:i}};r.getChangeVisualizationInfo=function(e,n){const i=e.getSelector();const r=t.bySelector(i,n);const o={updateRequired:true};function a(e){if(!e){return null}if(e.getVisible?.()){return e}return a(e.getParent())}if(!r.getVisible()){const e=a(r.getParent());if(e){o.displayControls=[e.getId()]}}return o};return r});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/UnstashControl", ["sap/ui/fl/changeHandler/condenser/Classification"],function(e){"use strict";const t={};t.applyChange=async function(e,t,n){const a=e.getContent();const o=n.modifier;const i=await o.getStashed(t);e.setRevertData({originalValue:i});const s=await o.setStashed(t,false,n.appComponent)||t;if(a.parentAggregationName){const e=a.parentAggregationName;const t=o.getParent(s);await o.moveAggregation(t,e,t,e,s,a.index,n.view)}return s};t.revertChange=async function(e,t,n){const a=e.getRevertData();await n.modifier.setStashed(t,a.originalValue);e.resetRevertData()};t.completeChangeContent=function(e,t){if(t.content){e.setContent(t.content)}};t.getCondenserInfo=function(t){return{affectedControl:t.getSelector(),classification:e.Reverse,uniqueKey:"stashed"}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/common/revertAddedControls", ["sap/ui/fl/Utils"],function(e){"use strict";return async function(t,o,n){const r=n.modifier;let i=t.getContent().targetAggregation;const a=n.view||e.getViewForControl(o);const s=n.appComponent;const c=t.getRevertData()||[];for(const e of c){let t;if(typeof e==="string"){t=e}else{t=e.id;i||=e.aggregationName}const n=r.bySelector(t,s,a)||a?.createId&&r.bySelector(a.createId(t));if(n.destroy){n.destroy()}await r.removeAggregation(o,i,n)}t.resetRevertData()}});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/changeHandler/condenser/Classification", [],function(){"use strict";return{LastOneWins:"lastOneWins",Reverse:"reverse",Move:"move",Create:"create",Destroy:"destroy",Update:"update"}});
/*!
* OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/fl/initial/_internal/FlexConfiguration", ["sap/base/config"],e=>{"use strict";const i=e.getWritableInstance();const t={getFlexibilityServices(){const e=[{url:"/sap/bc/lrep",connector:"LrepConnector"}];const t=i.get({name:"sapUiFlexibilityServices",type:i=>{if(typeof i==="string"){if(i===""){return[]}if(i[0]==="/"){e[0].url=i;i=e}else{i=JSON.parse(i)}}return i||[]},defaultValue:e,external:false});return t},setFlexibilityServices(e){i.set("sapUiFlexibilityServices",e.slice())}};return t});
/*
 * ! OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/FlexInfoSession", [],()=>{"use strict";var e={};var n="sap.ui.fl.info.";function t(e){return n+(e||"true")}e.getByReference=function(e){return JSON.parse(window.sessionStorage.getItem(t(e)))||{}};e.setByReference=function(e,n){if(e){window.sessionStorage.setItem(t(n),JSON.stringify(e))}};e.removeByReference=function(e){window.sessionStorage.removeItem(t(e))};return e});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/Loader", ["sap/base/util/Deferred","sap/base/util/ObjectPath","sap/base/util/uid","sap/base/Log","sap/ui/base/ManagedObject","sap/ui/fl/initial/_internal/FlexInfoSession","sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/fl/initial/_internal/Settings","sap/ui/fl/initial/_internal/Storage","sap/ui/fl/initial/_internal/StorageUtils"],function(e,t,a,n,r,i,s,o,c,l){"use strict";const d={};const f={};const p={};function u(e){if(typeof e==="string"){e={id:e}}e.idIsLocal=true;return e}function m(e,t){if(s.getOvpEntry(e)){[t.changes,t.variantChanges,t.variantDependentControlChanges,t.variantManagementChanges].flat().filter(e=>e.selector&&!e.selector.idIsLocal).forEach(function(e){e.selector=u(e.selector);if(e.dependentSelector){Object.keys(e.dependentSelector).forEach(t=>{const a=e.dependentSelector[t];if(Array.isArray(a)){e.dependentSelector[t]=a.map(u)}else{e.dependentSelector[t]=u(a)}})}})}return t}function h(e){l.getAllFlexObjectNamespaces().forEach(function(a){const n=t.get(a,e);if(n){t.set(a,n.filter(e=>{let t;try{t=new r(e.fileName)}catch(e){return false}t.destroy();return true}),e)}});return e}function g(e){if(e?.startupParameters&&Array.isArray(e.startupParameters.hcpApplicationId)){return e.startupParameters.hcpApplicationId[0]}}function y(e){const a="deactivateChanges";const n=e.changes.map(e=>{if(e.changeType===a){return[e.fileName,...e.content.changeIds]}}).flat().filter(Boolean);if(n.length){l.getAllFlexObjectNamespaces().forEach(function(a){const r=t.get(a,e);if(r.length){t.set(a,r.filter(e=>!n.includes(e.fileName)),e)}})}return e}p.getFlexData=async function(t){const n=t.reference||s.getFlexReference(t);let r=i.getByReference(n);const p=r.version;const u=r.displayedAdaptationId;const v=r.allContextsProvided;const C=f[n];const F=new e;f[n]=F;if(C){await C.promise}const b=t.reInitialize||!d[n]||d[n].parameters.emptyState||d[n].parameters.version!==p||d[n].parameters.allContextsProvided!==v||d[n].parameters.adaptationId!==u;const x=d[n]&&!d[n].parameters.emptyState&&d[n].parameters.bundleNotLoaded&&!t.skipLoadBundle;if(!b&&!x){F.resolve();return d[n]}let I;let w;let S=false;const A=s.getBaseComponentNameFromManifest(t.manifest);if(b){S=d[n]&&l.isStorageResponseFilled(d[n].data.changes);const e=t.reInitialize?undefined:s.getCacheKeyFromAsyncHints(n,t.asyncHints);I=await c.loadFlexData({preview:s.getPreviewSectionFromAsyncHints(t.asyncHints),reference:n,componentName:A,cacheKey:e,siteId:g(t.componentData),appDescriptor:t.manifest.getRawJson?t.manifest.getRawJson():t.manifest,version:p,adaptationId:u,skipLoadBundle:t.skipLoadBundle});const a=await o.getInstance();w=a.getIsVariantAuthorNameAvailable()?await c.loadVariantsAuthors(n):{}}else{S=d[n].parameters.previouslyFilledData;I=await c.completeFlexData({reference:n,componentName:A,partialFlexData:d[n].data.changes});w=d[n].data.authors}const D=Object.assign({},I);y(D);h(D);m(t.manifest,D);const L={changes:D,cacheKey:D.cacheKey,authors:w};d[n]={data:L,parameters:{bundleNotLoaded:!!t.skipLoadBundle,version:p,allContextsProvided:v,adaptationId:u,loaderCacheKey:a(),previouslyFilledData:S}};if(L.changes.info!==undefined){r={...r,...L.changes.info}}i.setByReference(r,n);F.resolve();return d[n]};p.initializeEmptyCache=function(e){const t={changes:l.getEmptyFlexDataResponse()};d[e]={data:t,parameters:{bundleNotLoaded:true,emptyState:true,loaderCacheKey:a()}};return d[e]};p.clearCache=function(e){if(e){delete d[e];delete f[e]}else{Object.keys(d).forEach(e=>{delete d[e];delete f[e]})}};p.loadFlVariant=async function(e){const t=await c.loadFlVariant({variantReference:e.variantReference,reference:e.reference});Object.entries(t).forEach(([t,a])=>{d[e.reference].data.changes[t].push(...a)});d[e.reference].parameters.loaderCacheKey=a();return{newData:t,completeLoaderData:d[e.reference]}};p.updateCachedResponse=function(e,t){l.updateStorageResponse(d[e].data,t);d[e].parameters.loaderCacheKey=a();return d[e].parameters.loaderCacheKey};p.getCachedFlexData=function(e){return d[e]?.data||{}};p.waitForInitialization=function(e){const t=f[e]?.promise;if(!t){n.error("Loader.waitForInitialization was called before FlexState.initialize");return Promise.resolve()}return t};p.setAllContextsProvided=function(e,t){if(d[e]&&d[e].parameters.allContextsProvided===undefined){d[e].parameters.allContextsProvided=t}};return p});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/ManifestUtils", ["sap/ui/fl/Utils"],function(e){"use strict";function t(e,t){if(e&&e.requests&&Array.isArray(e.requests)){return e.requests.find(function(e){return e.name==="sap.ui.fl.changes"&&(!t||e.reference===t)})}}function r(e){var t=e.manifest;var r=e.componentData||{};if(r.startupParameters){if(Array.isArray(r.startupParameters["sap-app-id"])){return r.startupParameters["sap-app-id"][0]}}var a=t.getEntry?t.getEntry("sap.ui5"):t["sap.ui5"];if(a){if(a.appVariantId){return a.appVariantId}if(a.componentName){return a.componentName}}return n(t)}function n(e){if(e){var t="${pro"+"ject.art"+"ifactId}";var r=e.getEntry?e.getEntry("sap.app"):e["sap.app"];var n=r&&r.id;if(n===t){if(e.getComponentName){return e.getComponentName()}if(e.name){return e.name}}return n}throw new Error("No Manifest received, descriptor changes are not possible")}function a(e){if(e){var t=e.getEntry?e.getEntry("sap.app"):e["sap.app"];var r=t.applicationVersion?.version;return r}return undefined}var i={getAppIdFromManifest:n,getAppVersionFromManifest:a,getFlexReference:r,getFlexReferenceForControl(t){var n=e.getAppComponentForControl(t);return n&&r({manifest:n.getManifestObject(),componentData:n.getComponentData()})},getFlexReferenceForSelector(e){if(e.appId){return e.appId}return i.getFlexReferenceForControl(e.appComponent||e)},getOvpEntry(e){return e.getEntry?e.getEntry("sap.ovp"):e["sap.ovp"]},getCacheKeyFromAsyncHints(e,r){const n=t(r,e);if(n){return n.cachebusterToken||"<NO CHANGES>"}},getPreviewSectionFromAsyncHints(e){var r=t(e);if(r){return r.preview}},getChangeManifestFromAsyncHints(e,r){const n=r&&t(e,r);return!!(!n||n.cachebusterToken)},getBaseComponentNameFromManifest(e){var t=e.getEntry?e.getEntry("sap.ui5"):e["sap.ui5"];return t&&t.componentName||n(e)},isFlexExtensionPointHandlingEnabled(t){var r=e.getAppComponentForControl(t);return!!(r&&r.getManifestEntry("sap.ui5")&&r.getManifestEntry("sap.ui5").flexExtensionPointEnabled)}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/Settings", ["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/fl/initial/_internal/Storage","sap/ui/fl/Utils"],function(e,a,t,n){"use strict";let l;let s;async function i(){const a=n.getUshellContainer();if(a){try{const e=await n.getUShellService("UserInfo");return e.getUser()?.getId()}catch(a){e.error(`Error getting service from Unified Shell: ${a.message}`)}}return Promise.resolve("")}const o=a.extend("sap.ui.fl.initial._internal.Settings",{metadata:{library:"sap.ui.fl",properties:{client:{type:"string"},hasPersoConnector:{type:"boolean",defaultValue:false},isAnnotationChangeEnabled:{type:"boolean",defaultValue:false},isAppVariantSaveAsEnabled:{type:"boolean",defaultValue:false},isAtoEnabled:{type:"boolean",defaultValue:false},isCondensingEnabled:{type:"boolean",defaultValue:false},isContextBasedAdaptationEnabled:{type:"boolean",defaultValue:false},isContextSharingEnabled:{type:"boolean",defaultValue:true},isKeyUser:{type:"boolean",defaultValue:false},isKeyUserTranslationEnabled:{type:"boolean",defaultValue:false},isLocalResetEnabled:{type:"boolean",defaultValue:false},isProductiveSystem:{type:"boolean",defaultValue:true},isPublicFlVariantEnabled:{type:"boolean",defaultValue:false},isPublicLayerAvailable:{type:"boolean",defaultValue:false},isPublishAvailable:{type:"boolean",defaultValue:false},isSeenFeaturesAvailable:{type:"boolean",defaultValue:false},isVariantAdaptationEnabled:{type:"boolean",defaultValue:false},isVariantAuthorNameAvailable:{type:"boolean",defaultValue:false},isVariantPersonalizationEnabled:{type:"boolean",defaultValue:true},isVariantSharingEnabled:{type:"boolean",defaultValue:false},system:{type:"string"},systemType:{type:"string"},userId:{type:"string"},versioning:{type:"object",defaultValue:{}}}},constructor:function(...e){a.apply(this,e);const t=new URLSearchParams(window.location.search);if(t.has("sap-ui-xx-rta-adaptations")){this.setProperty("isContextBasedAdaptationEnabled",t.get("sap-ui-xx-rta-adaptations")==="true")}}});function r(){s=t.loadFeatures().then(async function(a){const t=Object.assign({},a);if(t.logonUser){t.userId=t.logonUser;delete t.logonUser}else{t.userId=await i()}delete t.isZeroDowntimeUpgradeRunning;delete t.isAtoAvailable;const n=Object.keys(t).map(e=>{if(!o.getMetadata().getAllProperties()[e]){delete t[e];return e}return null}).filter(Boolean);e.warning(`Unknown settings received from the backend: ${n.join(", ")}`);l=new o(t);return l});return s}o.getInstance=async function(){if(!l){if(s){await s}else{await r()}}return l};o.getInstanceOrUndef=function(){return l};o.clearInstance=function(){l=undefined;s=undefined};return o});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/Storage", ["sap/base/util/restricted/_merge","sap/ui/fl/initial/_internal/FlexInfoSession","sap/ui/fl/initial/_internal/storageResultDisassemble","sap/ui/fl/initial/_internal/StorageFeaturesMerger","sap/ui/fl/initial/_internal/StorageResultMerger","sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/Layer"],function(e,n,t,r,a,o,s){"use strict";function i(e,t){const r=t.map(function(t){const r={...e,url:t.url,path:t.path};const a=n.getByReference(e.reference);if(!t.layers||t.layers[0]!=="ALL"&&t.layers.indexOf(s.CUSTOMER)===-1){delete r.version}else{if(a.initialAllContexts){r.allContexts=true}if(!r.version&&a.version){r.version=a.version}}const i=!!Object.keys(window.sessionStorage).filter(e=>e.startsWith("sap.ui.rta.restart.")).length;if(!i&&!a.saveChangeKeepSession){n.removeByReference(e.reference)}if(r.version){delete r.cacheKey}return t.loadConnectorModule.loadFlexData(r).then(function(e){return e||o.getEmptyFlexDataResponse()}).catch(o.logAndResolveDefault.bind(undefined,o.getEmptyFlexDataResponse(),t,"loadFlexData"))});return Promise.all(r)}function l(e){var n=[];e.forEach(function(e){if(Array.isArray(e)){n=n.concat(e)}else{n.push(e)}});return n}function u(e){return e.map(function(e){return t(e)})}function c(e){return Promise.resolve(e).then(l).then(u).then(l).then(a.merge)}function f(e){return o.getStaticFileConnector().then(i.bind(this,e))}function d(e){var n=e.map(function(e){if(!e?.loadConnectorModule?.loadFeatures){return Promise.resolve(o.logAndResolveDefault({features:{},layers:e.layers},e,"loadFeatures"))}return e.loadConnectorModule.loadFeatures({url:e.url}).then(function(n){return{features:n,layers:e.layers}}).catch(o.logAndResolveDefault.bind(null,{features:{},layers:e.layers},e,"loadFeatures"))});return Promise.all(n)}async function h(n,t){const r=await Promise.all(t.map(function(e){if(!e?.loadConnectorModule?.loadVariantsAuthors){return Promise.resolve(o.logAndResolveDefault({},e,"loadVariantsAuthors"))}const t={reference:n,url:e.url};return e.loadConnectorModule.loadVariantsAuthors(t).then(e=>e||{}).catch(o.logAndResolveDefault.bind(undefined,{},e,"loadVariantsAuthors"))}));return e({},...r)}var p={};p.loadFeatures=function(){return o.getLoadConnectors().then(d).then(r.mergeResults)};p.completeFlexData=function(e){if(!e||!e.reference){return Promise.reject("No reference was provided")}return Promise.all([f(e),e.partialFlexData]).then(c)};p.loadFlexData=function(e){if(!e||!e.reference){return Promise.reject("No reference was provided")}return o.getLoadConnectors(e.skipLoadBundle).then(i.bind(this,e)).then(c)};p.loadVariantsAuthors=function(e){if(!e){return Promise.reject("No reference was provided")}return o.getLoadConnectors().then(h.bind(this,e))};p.loadFlVariant=async function(e){const n=await o.getLoadConnectors();const t=[];for(const r of n){if(r?.loadConnectorModule?.loadFlVariant){const n={...e,url:r.url,layers:r.layers};try{t.push(await r.loadConnectorModule.loadFlVariant(n))}catch(e){t.push({})}}}const r=["variants","variantChanges","variantDependentControlChanges"];return t.reduce((e,n)=>{r.forEach(t=>{if(n[t]){e[t]=[...e[t]||[],...n[t]]}});return e},{})};return p});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/StorageFeaturesMerger", ["sap/base/util/merge","sap/ui/fl/Layer","sap/base/Log"],function(e,n,i){"use strict";function r(e){var i={};var r=!!e.features.isVersioningEnabled;if(e?.layers&&(e.layers.includes(n.CUSTOMER)||e.layers.includes("ALL"))){i[n.CUSTOMER]=r}return i}return{mergeResults(s){var a={};s.forEach(function(s){Object.keys(s.features).forEach(function(e){if(e==="isKeyUser"&&s.features.isKeyUser!==undefined&&![n.CUSTOMER,"ALL"].some(e=>s.layers.includes(e))){i.warning("removed a layer specific setting from a connector not configure for the specific layer");return}if(e!=="isVersioningEnabled"){a[e]=s.features[e]}});a.versioning=e(a.versioning||{},r(s));if(s.isContextSharingEnabled!==undefined){a.isContextSharingEnabled=s.isContextSharingEnabled}});return a}}});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/StorageResultMerger", ["sap/base/util/merge","sap/base/util/ObjectPath"],function(n,a){"use strict";var e={};function t(n,e){var t=n.reduce(function(n,t){if(a.get(e,t)){return n.concat(a.get(e,t))}return n},[]);var r=[];return t.filter(function(n){var a=n.fileName;var e=r.indexOf(a)!==-1;if(e){return false}r.push(a);return true})}function r(a){return a.reduce(function(a,e){return n({},a,e.ui2personalization)},{})}function i(n){return n.reduce(function(n,a){return a.cacheKey?n+=a.cacheKey:n},"")||null}e.merge=function(n){var a={appDescriptorChanges:t(n,"appDescriptorChanges"),annotationChanges:t(n,"annotationChanges"),changes:t(n,"changes"),ui2personalization:r(n),comp:{variants:t(n,"comp.variants"),changes:t(n,"comp.changes"),defaultVariants:t(n,"comp.defaultVariants"),standardVariants:t(n,"comp.standardVariants")},variants:t(n,"variants"),variantChanges:t(n,"variantChanges"),variantDependentControlChanges:t(n,"variantDependentControlChanges"),variantManagementChanges:t(n,"variantManagementChanges"),cacheKey:i(n)};var e=t(n,"info");if(e.length>0){[a.info]=e}return a};return e});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/StorageUtils", ["sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/Log","sap/ui/fl/initial/_internal/FlexConfiguration","sap/ui/fl/Layer","sap/ui/fl/LayerUtils"],function(e,n,t,a,r,o){"use strict";const i={};var c={load:{LrepConnector:"sap/ui/fl/initial/_internal/connectors/LrepConnector",NeoLrepConnector:"sap/ui/fl/initial/_internal/connectors/NeoLrepConnector",PersonalizationConnector:"sap/ui/fl/initial/_internal/connectors/PersonalizationConnector",KeyUserConnector:"sap/ui/fl/initial/_internal/connectors/KeyUserConnector",BtpServiceConnector:"sap/ui/fl/initial/_internal/connectors/BtpServiceConnector",StaticFileConnector:"sap/ui/fl/initial/_internal/connectors/StaticFileConnector",JsObjectConnector:"sap/ui/fl/write/_internal/connectors/JsObjectConnector",ObjectPathConnector:"sap/ui/fl/write/_internal/connectors/ObjectPathConnector",LocalStorageConnector:"sap/ui/fl/write/_internal/connectors/LocalStorageConnector",SessionStorageConnector:"sap/ui/fl/write/_internal/connectors/SessionStorageConnector"},write:{LrepConnector:"sap/ui/fl/write/_internal/connectors/LrepConnector",NeoLrepConnector:"sap/ui/fl/write/_internal/connectors/NeoLrepConnector",PersonalizationConnector:"sap/ui/fl/write/_internal/connectors/PersonalizationConnector",KeyUserConnector:"sap/ui/fl/write/_internal/connectors/KeyUserConnector",BtpServiceConnector:"sap/ui/fl/write/_internal/connectors/BtpServiceConnector",StaticFileConnector:"sap/ui/fl/write/_internal/connectors/StaticFileConnector",JsObjectConnector:"sap/ui/fl/write/_internal/connectors/JsObjectConnector",ObjectPathConnector:"sap/ui/fl/write/_internal/connectors/ObjectPathConnector",LocalStorageConnector:"sap/ui/fl/write/_internal/connectors/LocalStorageConnector",SessionStorageConnector:"sap/ui/fl/write/_internal/connectors/SessionStorageConnector"}};var s="sap/ui/fl/initial/_internal/connectors/";var l={connector:"StaticFileConnector"};function p(e,n){var t=[];if(!e){t=n}else{t=e.filter(function(e){return n.indexOf(e)!==-1||n[0]==="ALL"})}return t}function u(e,n,t){return t.map(function(e){var t=e.connector;var a;if(!e.loadConnector&&!e.applyConnector&&!e.loadConnector){a=n?c.load[t]:c.write[t]}else if(n){a=e.loadConnector||e.applyConnector}else{a=e.writeConnector||"sap/ui/fl/write/connectors/BaseConnector"}return a})}function f(e){switch(e.fileType){case"change":if(e.selector&&e.selector.persistencyKey){return["comp","changes"]}if(e.variantReference){return"variantDependentControlChanges"}if(e.appDescriptorChange){return"appDescriptorChanges"}return"changes";case"ctrl_variant":return"variants";case"ctrl_variant_change":return"variantChanges";case"ctrl_variant_management_change":return"variantManagementChanges";case"variant":return["comp","variants"];case"annotation_change":return"annotationChanges";default:return""}}i.requireConnectors=function(e){return new Promise(function(n){sap.ui.require(e,function(...e){n(e)})})};async function g(e,n,t){var a=u(e,n,t);const r=await i.requireConnectors(a,n,t);r.forEach(function(e,a){if(!t[a].layers){t[a].layers=e.layers}else{t[a].layers=p(t[a].layers,e.layers)}if(n){t[a].loadConnectorModule=e}else{t[a].writeConnectorModule=e}});return t}i.getConnectors=function(e,n,t){var r=a.getFlexibilityServices();var o=[];if(n&&!t){o=[l]}o=o.concat(r);return g(e,n,o)};i.getLoadConnectors=function(e){return this.getConnectors(s,true,e)};i.getStaticFileConnector=function(){return g(s,true,[l])};i.logAndResolveDefault=function(e,n,a,r){t.error(`Connector (${n.connector}) failed call '${a}': ${r}\n\t\t\tApplication startup continues without data from this storage.`);return e};i.filterAndSortResponses=function(e){var n=[];Object.keys(e).forEach(function(t){n.push(e[t])});n=n.filter(function(e){return e.changes.length>0||e.appDescriptorChanges.length>0||e.variants.length>0||e.variantChanges.length>0||e.variantManagementChanges.length>0||e.variantDependentControlChanges.length>0||e.comp.variants.length>0||e.comp.changes.length>0||e.comp.defaultVariants.length>0||e.comp.standardVariants.length>0||e.annotationChanges.length>0});n.sort(function(e,n){return e.index-n.index});return n};i.sortFlexObjects=function(e){const n=e.filter(e=>e.creation);const t=e.filter(e=>!e.creation);n.sort(function(e,n){return Date.parse(e.creation)-Date.parse(n.creation)});return t.concat(n)};i.getGroupedFlexObjects=function(e){const n=this.sortFlexObjects(e);var t={};Object.keys(r).forEach(function(e){t[e]=this.getEmptyFlexDataResponse();t[e].index=o.getLayerIndex(e)}.bind(this));n.forEach(function(e){var n=e.layer;if(e.fileType==="annotation_change"){t[n].annotationChanges.push(e)}else if(e.fileType==="ctrl_variant"&&e.variantManagementReference){t[n].variants.push(e)}else if(e.fileType==="ctrl_variant_change"){t[n].variantChanges.push(e)}else if(e.fileType==="ctrl_variant_management_change"){t[n].variantManagementChanges.push(e)}else if(e.fileType==="variant"){t[n].comp.variants.push(e)}else if(e.fileType==="change"){if(e.variantReference){t[n].variantDependentControlChanges.push(e)}else if(e.appDescriptorChange){t[n].appDescriptorChanges.push(e)}else{switch(e.changeType){case"addFavorite":case"removeFavorite":case"updateVariant":t[n].comp.changes.push(e);break;case"defaultVariant":t[n].comp.defaultVariants.push(e);break;case"standardVariant":t[n].comp.standardVariants.push(e);break;default:t[n].changes.push(e)}}}});return t};i.getEmptyFlexDataResponse=function(){return{appDescriptorChanges:[],annotationChanges:[],changes:[],comp:{variants:[],changes:[],defaultVariants:[],standardVariants:[]},variants:[],variantChanges:[],variantDependentControlChanges:[],variantManagementChanges:[],ui2personalization:{}}};i.getAllFlexObjectNamespaces=function(){return["appDescriptorChanges","annotationChanges","changes","comp.changes","comp.changes","comp.defaultVariants","comp.standardVariants","variants","variantChanges","variantDependentControlChanges","variantManagementChanges"]};i.isStorageResponseFilled=function(t={}){const a=!e(t.ui2personalization);return a||i.getAllFlexObjectNamespaces().some(function(e){return n.get(e,t)?.length>0})};i.updateStorageResponse=function(e,t){t.forEach(t=>{if(t.type==="ui2"){e.changes.ui2personalization=t.newData}else{const a=f(t.flexObject);const r=t.flexObject.fileName;const o=n.get(a,e.changes);switch(t.type){case"add":o.push(t.flexObject);break;case"delete":o.splice(o.findIndex(e=>e.fileName===r),1);break;case"update":o.splice(o.findIndex(e=>e.fileName===r),1,t.flexObject);break;default:}}})};return i});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/BackendConnector", ["sap/base/util/merge","sap/base/util/restricted/_pick","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/interfaces/BaseLoadConnector"],function(e,t,n,s){"use strict";const i=e({},s,{xsrfToken:undefined,settings:undefined,sendRequest(e){var s=t(e,["version","allContexts","adaptationId"]);if(this.isLanguageInfoRequired){n.addLanguageInfo(s)}var i=n.getUrl(this.ROUTES.DATA,e,s);return n.sendRequest(i,"GET",{initialConnector:this,xsrfToken:this.xsrfToken,cacheable:e.cacheable}).then(function(e){var t=e.response;if(e.etag){t.cacheKey=e.etag}if(t.settings){this.settings=t.settings}return t}.bind(this))},loadFeatures(e){if(this.settings){return Promise.resolve({response:this.settings})}var t=n.getUrl(this.ROUTES.SETTINGS,e);return n.sendRequest(t,"GET",{initialConnector:this}).then(function(e){return e.response})},loadFlexData(e){e.cacheable=true;return this.sendRequest(e).then(function(e){e.changes=e.changes.concat(e.compVariants||[]);return e})}});return i});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/BtpServiceConnector", ["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/KeyUserConnector","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/Layer"],function(e,n,t,a){"use strict";var i="/flex/all";var s="/v3";const r=`${i}${s}`;const l=e({},n,{layers:[a.CUSTOMER,a.PUBLIC,a.USER],ROOT:r,ROUTES:{DATA:`${r}/data`,VARIANTDATA:`${r}/variantdata`,SETTINGS:`${r}/settings`},loadFeatures(e){return n.loadFeatures.call(this,e).then(function(e){e.isCondensingEnabled=e.isCondensingEnabledOnBtp;delete e.isCondensingEnabledOnBtp;e.isLocalResetEnabled=e.isLocalResetEnabledOnBtp;delete e.isLocalResetEnabledOnBtp;return e})},loadFlVariant(e){const n={id:e.variantReference,version:e.version};if(this.isLanguageInfoRequired){t.addLanguageInfo(n)}const a=t.getUrl(this.ROUTES.VARIANTDATA,e,n);return t.sendRequest(a,"GET",{initialConnector:this}).then(function(e){return e.response})}});return l});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/KeyUserConnector", ["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/BackendConnector","sap/ui/fl/Layer"],function(e,a,n){"use strict";var t="/flex/keyuser";var r="/v2";var s=e({},a,{layers:[n.CUSTOMER,n.PUBLIC],API_VERSION:r,ROUTES:{DATA:`${t+r}/data/`,SETTINGS:`${t+r}/settings`},isLanguageInfoRequired:true,loadFeatures(e){return a.loadFeatures.call(this,e)},loadFlexData(e){e.cacheable=true;return a.sendRequest.call(this,e).then(function(e){e.contents.map(function(e,a,n){n[a].changes=(e.changes||[]).concat(e.compVariants)});e.contents[0].cacheKey=e.cacheKey;return e.contents})}});return s});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/LrepConnector", ["sap/base/util/merge","sap/base/util/restricted/_pick","sap/ui/dom/includeScript","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/interfaces/BaseLoadConnector","sap/ui/fl/Utils"],function(e,t,s,i,n,a,r){"use strict";const o={DATA:"/flex/data/",MODULES:"/flex/modules/",SETTINGS:"/flex/settings",VARIANTS_AUTHORS:"/variants/authors/"};let l={};return e({},a,{layers:["ALL"],xsrfToken:undefined,settings:undefined,_loadModules(e){return new Promise(function(t,i){s(e,undefined,t,i)})},_addClientInfo(e){var t=r.getUrlParameter("sap-client");if(!e&&t){e={}}if(t){e["sap-client"]=t}},loadFeatures(e){if(this.settings){return Promise.resolve(this.settings)}var t={};this._addClientInfo(t);var s=i.getUrl(o.SETTINGS,e,t);return i.sendRequest(s,"GET",{initialConnector:this}).then(function(e){e.response.isVariantAdaptationEnabled=!!e.response.isPublicLayerAvailable;e.response.isContextSharingEnabled=true;e.response.isLocalResetEnabled=true;return e.response})},loadFlexData(e){if(e.cacheKey==="<NO CHANGES>"){return Promise.resolve({...n.getEmptyFlexDataResponse()})}var s=t(e,["version","allContexts","adaptationId"]);this._addClientInfo(s);i.addSAPLogonLanguageInfo(s);var a;if(e.appDescriptor&&e.appDescriptor["sap.app"]){a=e.appDescriptor["sap.app"].id}if(e.preview){e.reference=e.preview.reference;s.upToLayerType=e.preview.maxLayer}l=s;var r=i.getUrl(o.DATA,e,s);return i.sendRequest(r,"GET",{initialConnector:this,xsrfToken:this.xsrfToken,siteId:e.siteId,cacheable:true,sAppDescriptorId:a}).then(function(t){var n=t.response;if(t.etag){n.cacheKey=t.etag}else if(e.cacheKey){n.cacheKey=e.cacheKey}n.changes=n.changes.concat(n.compVariants||[]);if(n.settings){this.settings=n.settings;this.settings.isVariantAdaptationEnabled=!!this.settings.isPublicLayerAvailable;this.settings.isContextSharingEnabled=true;this.settings.isLocalResetEnabled=true}if(!n.loadModules){return n}var a=i.getUrl(o.MODULES,e,s);return this._loadModules(a).then(function(){return n})}.bind(this))},loadVariantsAuthors(e){const t=i.getUrl(o.VARIANTS_AUTHORS,e,l);return i.sendRequest(t,"GET",{initialConnector:this}).then(function(e){return e.response})}})});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/NeoLrepConnector", ["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/LrepConnector","sap/ui/fl/initial/_internal/connectors/Utils"],function(e,n,t){"use strict";var s={SETTINGS:"/flex/settings"};return e({},n,{loadFeatures(e){if(this.settings){return Promise.resolve(this.settings)}var n={};var i=t.getUrl(s.SETTINGS,e,n);return t.sendRequest(i,"GET",{initialConnector:this}).then(function(e){e.response.isContextSharingEnabled=false;e.response.isAnnotationChangeEnabled=false;return e.response})},loadVariantsAuthors(){return Promise.reject("loadVariantsAuthors is not implemented")}})});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/PersonalizationConnector", ["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/BackendConnector","sap/ui/fl/Layer"],function(e,r,a){"use strict";var t="/flex/personalization";var n="/v1";var s={isProductiveSystem:true,hasPersoConnector:true};var i=e({},r,{layers:[a.USER],ROUTES:{DATA:`${t+n}/data/`},loadFeatures(){return Promise.resolve(s)}});return i});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/StaticFileConnector", ["sap/base/Log","sap/base/util/LoaderExtensions","sap/base/util/merge","sap/ui/core/Component","sap/ui/core/Supportability","sap/ui/fl/interfaces/BaseLoadConnector"],function(e,r,a,o,n,s){"use strict";function t(a,s){var t=`${a.replace(/\./g,"/")}/changes/${s}.json`;var i=!!sap.ui.loader._.getModuleState(t);if(i||n.isDebugModeEnabled()||o.getComponentPreloadMode()==="off"){try{return r.loadResource(t)}catch(r){if(r.name.includes("SyntaxError")){e.error(r)}e.warning(`flexibility did not find a ${s}.json for the application: ${a}`)}}}const i=a({},s,{loadFlexData(e){var r=e.componentName;r||=e.reference.replace(/.Component/g,"");var a=t(r,"flexibility-bundle");if(a){a.changes=a.changes.concat(a.compVariants);delete a.compVariants;return Promise.resolve(a)}var o=t(r,"changes-bundle");if(o){return Promise.resolve({changes:o})}return Promise.resolve()},loadFeatures(){return Promise.resolve({})},loadVariantsAuthors(){return Promise.resolve({})}});return i});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/Utils", ["sap/ui/core/Lib","sap/base/i18n/Localization","sap/base/security/encodeURLParameters"],function(e,s,t){"use strict";var r=2e4;var n=function(e,s){var t=new Error(e.statusText);t.status=e.status;t.userMessage=s;return t};var a=function(s){return e.getResourceBundleFor("sap.ui.fl").getText(s)};const o=(e,s)=>{if(e.slice(-1)!=="/"&&s.charAt(0)!=="/"){e+="/"}return e+s};return{addLanguageInfo(e){if(!e){throw new Error("No parameters map were passed")}e["sap-language"]=s.getLanguage()},addSAPLogonLanguageInfo(e){if(!e){throw new Error("No parameters map were passed")}e["sap-language"]=s.getSAPLogonLanguage()},getUrl(e,s,r){if(!e||!s.url){throw new Error("Not all necessary parameters were passed")}let n=o(s.url,e);if(s.cacheKey){n=o(n,`~${s.cacheKey}~`)}if(s.reference){n=o(n,s.reference)}else if(s.fileName){n=o(n,s.fileName)}if(r){Object.keys(r).forEach(function(e){if(r[e]===undefined){delete r[e]}});var a=t(r);if(a.length>0){n+=`?${a}`}}return n},sendRequest(e,s,t){s||="GET";s=s.toUpperCase();return new Promise(function(o,i){var p=new XMLHttpRequest;p.open(s,e);p.timeout=r;if((s==="GET"||s==="HEAD")&&(!t||(!t.initialConnector||!t.initialConnector.xsrfToken)&&!t.cacheable)){p.setRequestHeader("X-CSRF-Token","fetch")}if((s==="POST"||s==="PUT"||s==="DELETE")&&t&&t.initialConnector&&t.initialConnector.xsrfToken){p.setRequestHeader("X-CSRF-Token",t.initialConnector.xsrfToken)}if(t&&t.contentType){p.setRequestHeader("Content-Type",t.contentType)}if(t&&t.siteId){p.setRequestHeader("X-LRep-Site-Id",t.siteId)}if(t&&t.sAppDescriptorId){p.setRequestHeader("X-LRep-AppDescriptor-Id",t.sAppDescriptorId)}if(t&&t.dataType){p.responseType=t.dataType}p.onload=function(){if(p.status>=200&&p.status<400){try{var e={};if(p.status!==204&&p.status!==205){if(["","text"].includes(p.responseType)&&!p.response&&p.responseText){p.response=p.responseText}e.response=p.response;if(e.response&&typeof e.response==="string"&&p.getResponseHeader("content-type")&&p.getResponseHeader("content-type").indexOf("json")>0){e.response=JSON.parse(e.response)}}e.status=p.status;if(p.getResponseHeader("X-CSRF-Token")){e.xsrfToken=p.getResponseHeader("X-CSRF-Token");if(t&&t.initialConnector){t.initialConnector.xsrfToken=e.xsrfToken}}if(p.getResponseHeader("Etag")){e.etag=p.getResponseHeader("Etag")}o(e)}catch(e){e.userMessage=a("MSG_LOADING_SERVER_RESPONSE_ERROR");i(e)}}else{var s="";try{var r=typeof p.response==="string"?JSON.parse(p.response):p.response;if(Array.isArray(r.messages)&&r.messages.length){s=r.messages.reduce(function(e,s){return e.concat(s.severity==="Error"?`${s.text}\n`:"")},s)}}catch(e){}i(n(p,s))}};p.ontimeout=function(){i(n(p,a("MSG_CONNECTION_TIMEOUT_ERROR")))};p.onerror=function(){i(n(p,a("MSG_NETWORK_ERROR")))};p.addEventListener("error",function(){i(n(p,a("MSG_NETWORK_ERROR")))});if(t&&t.payload){p.send(t.payload)}else{p.send()}})}}});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/preprocessors/ComponentLifecycleHooks", ["sap/base/Log","sap/ui/core/Component","sap/ui/core/Lib","sap/ui/fl/apply/api/ControlVariantApplyAPI","sap/ui/fl/initial/_internal/Loader","sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/variants/VariantModel","sap/ui/fl/Layer","sap/ui/fl/requireAsync","sap/ui/fl/Utils","sap/ui/model/json/JSONModel","sap/ui/model/odata/ODataUtils"],function(t,e,n,a,o,i,s,r,c,l,p,d,f){"use strict";const g={};g._componentInstantiationPromises=new WeakMap;g._embeddedComponents={};function m(t){return s.isStorageResponseFilled(t.data.changes)||t.parameters.previouslyFilledData}async function u(t,e){if(m(e)){const e=await l("sap/ui/fl/apply/_internal/flexState/FlexState");await e.initialize(t)}}async function y(e){if(p.getUshellContainer()){return}const a=window.sessionStorage.getItem(`sap.ui.rta.restart.${c.CUSTOMER}`);if(a){const o=i.getFlexReferenceForControl(e);if(a!==o&&a!=="true"){t.error(`an application component was started which does not match the component for which the restart was triggered:\n\t\t\t\t\tTriggering component: ${a}\n\t\t\t\t\tStarted component: ${o}`);return}await Promise.all([n.load({name:"sap.ui.rta"}),e.rootControlLoaded()]);const s=await l("sap/ui/rta/api/startKeyUserAdaptation");s({rootControl:e})}}function w(t,e){if(e.messagebundle&&!t.getModel("i18nFlexVendor")&&e?.changes?.some(t=>t.layer===c.VENDOR)){t.setModel(new d(e.messagebundle),"i18nFlexVendor")}}async function h(t,e){const n=await l("sap/ui/fl/apply/_internal/changes/Applier");const a=n.applyAllChangesForControl.bind(n,t,e);a._bIsFlexApplyChangesFunction=true;t.addPropagationListener(a)}async function C(t,e){const n=i.getFlexReferenceForControl(t);const s=await o.getFlexData({componentData:t.getComponentData(),asyncHints:e.asyncHints,manifest:t.getManifestObject(),reference:n});const r=t.getId();if(m(s)){const a=await l("sap/ui/fl/apply/_internal/flexState/FlexState");await a.initialize({componentId:r,asyncHints:e.asyncHints});await h(t,n);w(t,s.data.changes)}const c=g._createVariantModel(t);await c.initialize();t.setModel(c,a.getVariantModelName());if(g._embeddedComponents[r]){g._embeddedComponents[r].forEach(function(e){const n=t.getModel(a.getVariantModelName());e.setModel(n,a.getVariantModelName())});delete g._embeddedComponents[r]}await y(t)}g._createVariantModel=function(t){return new r({},{appComponent:t})};g.instanceCreatedHook=async function(t,e){if(p.isApplicationComponent(t)){const n=await C(t,e);g._componentInstantiationPromises.set(t,n);return n}else if(p.isEmbeddedComponent(t)){const e=p.getAppComponentForControl(t);if(g._componentInstantiationPromises.has(e)){await g._componentInstantiationPromises.get(e);const n=e.getModel(a.getVariantModelName());t.setModel(n,a.getVariantModelName())}g._embeddedComponents[e.getId()]||=[];g._embeddedComponents[e.getId()].push(t)}return undefined};g.componentLoadedHook=async function(t,e){if(p.isApplication(e)&&t.id){const n={manifest:e,componentData:t.componentData||t.settings?.componentData,asyncHints:t.asyncHints};const a=await o.getFlexData(n);await u({...n,componentId:t.id},a);const i="$sap.ui.fl.changes";const s=e?.getEntry?.(i)?.descriptor||[];if(s.length){const t=e.getJson();const n=await l("sap/ui/fl/apply/_internal/changes/descriptor/Applier");await n.applyInlineChanges(t,s);delete t[i]}}};async function M(n){const a=n.owner&&e.get(n.owner.id);if(!n.factoryConfig){t.error("Could not fetch Annotation changes. This can be caused by creating a component in an unsupported way");return[]}const s=a?.getManifest()||n.manifest;if(!p.isApplication(s)){return[]}const r=n.owner?.id||n.factoryConfig.id||n.factoryConfig.settings?.id;const c=a?.getComponentData()||n.factoryConfig.componentData||n.factoryConfig.settings?.componentData;const d=i.getFlexReference({manifest:s,componentData:c});try{const e={componentData:c,asyncHints:n.owner?.config.asyncHints||n.factoryConfig.asyncHints,componentId:r,reference:d,skipLoadBundle:true,manifest:s};const a=await o.getFlexData(e);if(!m(a)){return[]}const i=await l("sap/ui/fl/apply/_internal/flexState/FlexState");await i.initialize(e);const p=f.removeOriginSegmentParameters(n.model.getServiceUrl());const g=i.getAnnotationChanges(d).filter(t=>t.getServiceUrl()===p);return g.reduce(async(e,n)=>{const a=await e;try{const t=await l("sap/ui/fl/apply/_internal/changeHandlers/ChangeHandlerRegistration");const e=await t.getAnnotationChangeHandler({changeType:n.getChangeType()});a.push(await e.applyChange(n));n._appliedOnModel=true}catch(e){t.error(`Annotation change with id ${n.getId()} could not be applied to the model`,e)}return a},Promise.resolve([]))}catch(e){t.error("Annotation changes could not be applied.",e);return[]}}g.modelCreatedHook=function(t){t.model.setAnnotationChangePromise(M(t))};g.preprocessManifest=async function(t,e){if(!p.isApplication(t,true)||!e.id){return t}const n=e.componentData||{};const a=i.getFlexReference({manifest:t,componentData:n});const s=await o.getFlexData({componentData:e.componentData||e.settings?.componentData,asyncHints:e.asyncHints,manifest:t,skipLoadBundle:true});if(m(s)){await u({...e,rawManifest:t,componentId:e.id,reference:a,skipLoadBundle:true},s);const n={...t};const o=await l("sap/ui/fl/apply/_internal/changes/descriptor/Applier");return o.applyChanges(n)}return t};return g});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/preprocessors/ControllerExtension", ["sap/base/Log","sap/ui/core/Component","sap/ui/fl/initial/_internal/Loader","sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/requireAsync","sap/ui/fl/Utils"],function(e,t,n,r,i,o,a){"use strict";var s=function(){};function u(e){return e.getChangeType()==="codeExt"}function l(e){if(!e.startsWith("module:")){return`module:${e.replace(/\./g,"/")}.controller`}return e}function c(e,t){var n=l(t.getSelector().controllerName);return n===l(e)}function f(t){return new Promise(function(n){sap.ui.require(t,function(...e){n(e)},function(t){e.error("Code Extension not found",t.message);n([])})})}s.prototype.getControllerExtensions=function(e,s,l,p){if(l){if(!s){return Promise.resolve([])}var g=t.getComponentById(s);var m=a.getAppComponentForControl(g);if(!m){return Promise.resolve([])}if(!a.isApplication(m.getManifestObject())){return Promise.resolve([])}var d=r.getFlexReferenceForControl(m);return n.waitForInitialization(d).then(async function(){const t=n.getCachedFlexData(d);if(!i.isStorageResponseFilled(t?.changes)){return[]}const r=await o("sap/ui/fl/apply/_internal/flexState/FlexState");await r.waitForInitialization(d);const a=r.getFlexObjectsDataSelector().get({reference:d});const s=a.filter(function(t){return u(t)&&c(e,t)});const l=[];const g=s.filter(function(e){const t=e.getContent().viewId;if(!t){l.push(e);return false}return t===p});const m=l.concat(g).map(function(e){return e.getModuleName()});return f(m)})}return[]};return s});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/preprocessors/RegistrationDelegator", ["sap/ui/core/mvc/ControllerExtensionProvider","sap/ui/core/mvc/XMLView","sap/ui/core/ComponentHooks","sap/ui/core/ExtensionPoint","sap/ui/fl/initial/_internal/preprocessors/ComponentLifecycleHooks","sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/base/DesignTime","sap/ui/fl/initial/_internal/preprocessors/ControllerExtension","sap/ui/fl/initial/_internal/preprocessors/XmlPreprocessor"],function(e,n,i,r,o,s,t){"use strict";var a={};function l(){i.onInstanceCreated.register(o.instanceCreatedHook)}function p(){i.onModelCreated.register(o.modelCreatedHook)}function c(){i.onComponentLoaded.register(o.componentLoadedHook)}function u(){e.registerExtensionProvider("sap/ui/fl/initial/_internal/preprocessors/ControllerExtension")}function f(){if(n.registerPreprocessor){n.registerPreprocessor("viewxml","sap.ui.fl.initial._internal.preprocessors.XmlPreprocessor")}}function d(){i.onPreprocessManifest.register(o.preprocessManifest)}function P(e){if(s.isFlexExtensionPointHandlingEnabled(e)){return"sap/ui/fl/apply/_internal/extensionPoint/Processor"}if(t.isDesignModeEnabled()){return"sap/ui/fl/write/_internal/extensionPoint/Processor"}return undefined}function g(){r.registerExtensionProvider(P)}a.registerAll=function(){c();u();l();f();d();g();p()};return a});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/preprocessors/XmlPreprocessor", ["sap/base/util/merge","sap/base/Log","sap/ui/core/util/reflection/XmlTreeModifier","sap/ui/core/Component","sap/ui/fl/initial/_internal/Loader","sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/requireAsync","sap/ui/fl/Utils"],function(e,t,n,a,i,r,o,l,s){"use strict";var c=function(){};c.NOTAG="<NoTag>";async function p(e){const t=await l("sap/ui/fl/apply/_internal/flexState/FlexObjectState");const n=t.getAllApplicableUIChanges(e.reference);const a=await l("sap/ui/fl/apply/_internal/changes/Utils");return n.filter(a.isChangeInView.bind(undefined,e))}c.process=async function(c,f){try{f.viewId=f.id;var u=a.getComponentById(f.componentId);if(!u){t.warning("View is generated without a component. Flexibility features are not possible.");return c}var g=s.getAppComponentForControl(u);if(!s.isApplication(g.getManifestObject())){return c}const d=r.getFlexReferenceForControl(g);await i.waitForInitialization(d);const w=i.getCachedFlexData(d);if(!o.isStorageResponseFilled(w.changes)){return c}const y=await l("sap/ui/fl/apply/_internal/flexState/FlexState");await y.waitForInitialization(d);const C=e({appComponent:g,modifier:n,view:c,reference:d},f);const F=await p(C);const h=await l("sap/ui/fl/apply/_internal/changes/Applier");await h.applyAllChangesForXMLView(C,F);t.debug(`flex processing view ${f.id} finished`);return c}catch(e){var d=`view ${f.id}: ${e}`;t.info(d);return c}};function f(e,t){if(!t){return e}return e.concat("-",t)}function u(e){return e.replace(/(^W\/|")/g,"")}c.getCacheKey=async function(e){const t=a.getComponentById(e.componentId);const n=s.getAppComponentForControl(t);if(s.isVariantByStartupParameter(n)){return undefined}const p=r.getFlexReferenceForControl(n);let g=c.NOTAG;if(p){await i.waitForInitialization(p);const e=i.getCachedFlexData(p);if(e&&e.cacheKey&&o.isStorageResponseFilled(e.changes)){g=u(e.cacheKey);const t=await l("sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState");const n=t.getAllCurrentVariants(p).filter(e=>!e.getStandardVariant()).map(e=>e.getId());g=f(g,n.join("-"))}}return g};return c},true);
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/storageResultDisassemble", ["sap/ui/fl/initial/_internal/StorageUtils","sap/base/util/merge","sap/base/util/isEmptyObject"],function(a,e,n){"use strict";function t(a,e){if(e.content.fileName!==e.content.variantManagementReference){a.push(e.content)}e.controlChanges.forEach(function(e){a.push(e)});for(var n in e.variantChanges){a=a.concat(e.variantChanges[n])}return a}function r(a){var e=true;if(a){Object.keys(a).some(function(n){if(a[n].length){e=false;return true}})}return e}return function(i){var s;if(!n(i.variantSection)){s=i.changes||[];for(var c in i.variantSection){var o=i.variantSection[c];for(var u in o.variantManagementChanges){s=s.concat(o.variantManagementChanges[u])}s=o.variants.reduce(t,s)}var f=a.getGroupedFlexObjects(s);var v=a.filterAndSortResponses(f);delete i.changes;delete i.variantSection;e(v[0]||{},i);return v}if(r(i.comp)){s=i.changes||[];i.comp={variants:[],changes:[],defaultVariants:[],standardVariants:[]};s.slice().reverse().forEach(function(a,e,n){var t=false;if(a.fileType==="variant"){i.comp.variants.unshift(a);t=true}else{switch(a.changeType){case"addFavorite":case"removeFavorite":case"updateVariant":i.comp.changes.unshift(a);t=true;break;case"defaultVariant":i.comp.defaultVariants.unshift(a);t=true;break;case"standardVariant":i.comp.standardVariants.unshift(a);t=true;break;default:break}}if(t){var r=n.length-1-e;i.changes.splice(r,1)}})}return[i]}});
/*
 * ! OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/api/InitialFlexAPI", ["sap/ui/fl/initial/_internal/FlexInfoSession","sap/ui/fl/initial/_internal/Loader","sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/fl/initial/_internal/Settings","sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/requireAsync","sap/ui/fl/Utils"],function(e,t,n,i,s,l,r){"use strict";var a={};a.isKeyUser=async function(){const e=await i.getInstance();return e.getIsKeyUser()};a.getFlexVersion=function(t){return e.getByReference(t.reference)?.version};a.waitForChanges=async function(e){let i;if(e.element){i=[{selector:e.element}]}else if(e.selectors){i=e.selectors.map(function(e){return{selector:e}})}else if(e.complexSelectors){i=e.complexSelectors}const a=r.getAppComponentForSelector(i[0].selector);const o=n.getFlexReferenceForControl(a);const c=t.getCachedFlexData(o);if(!s.isStorageResponseFilled(c.changes)){return undefined}const f=await l("sap/ui/fl/apply/_internal/flexState/FlexObjectState");return f.waitForFlexObjectsToBeApplied(i,a)};return a});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/api/Version", [],function(){"use strict";return{Number:{Original:"-1",Draft:"0"},Type:{Active:"active",Draft:"draft",Inactive:"inactive"}}});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/interfaces/BaseLoadConnector", [],function(){"use strict";var e={loadFlexData(){return Promise.reject("loadFlexData is not implemented")},loadFeatures(){return Promise.reject("loadFeatures is not implemented")},loadVariantsAuthors(){return Promise.reject("loadVariantsAuthors is not implemented")},loadFlVariant(){return Promise.reject("loadFlVariant is not implemented")}};return e});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/interfaces/Delegate", [],function(){"use strict";return{getPropertyInfo(){return Promise.reject("not implemented")},getRepresentedProperties(){return Promise.reject("not implemented")},createLabel(){return Promise.reject("not implemented")},createControlForProperty(){return Promise.reject("not implemented")},createLayout(){return Promise.reject("not implemented")}}});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/library", ["sap/ui/core/Lib","sap/ui/fl/initial/_internal/preprocessors/RegistrationDelegator","sap/ui/fl/initial/_internal/FlexConfiguration","sap/ui/fl/Utils","sap/ui/fl/Layer","sap/ui/fl/Scenario","sap/ui/fl/changeHandler/condenser/Classification","sap/ui/core/library","sap/m/library"],function(i,e,a,s,n,r,l){"use strict";var t=i.init({apiVersion:2,name:"sap.ui.fl",version:"1.144.0",controls:["sap.ui.fl.variants.VariantManagement","sap.ui.fl.util.IFrame"],dependencies:["sap.ui.core","sap.m"],designtime:"sap/ui/fl/designtime/library.designtime",extensions:{flChangeHandlers:{"sap.ui.fl.util.IFrame":"sap/ui/fl/util/IFrame"},"sap.ui.support":{diagnosticPlugins:["sap/ui/fl/support/diagnostics/FlexibilityPlugin"],publicRules:true}}});t.condenser={Classification:l};t.Scenario=r;e.registerAll();function o(){var i=s.getUshellContainer();if(i){return i.getLogonSystem().isTrial()}return false}if(o()){a.setFlexibilityServices([{connector:"LrepConnector",url:"/sap/bc/lrep",layers:[]},{connector:"LocalStorageConnector",layers:[n.CUSTOMER,n.PUBLIC,n.USER]}])}return t});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/requireAsync", [],function(){"use strict";return function(e){var i=sap.ui.require(e);if(i){return Promise.resolve(i)}return new Promise(function(i,n){sap.ui.require([e],function(e){i(e)},function(e){n(e)})})}});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/util/ManagedObjectModel", ["sap/ui/core/Element","sap/ui/model/base/ManagedObjectModel"],function(e,t){"use strict";function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}var o=e.extend("sap.ui.fl.util.ManagedObjectModel",{metadata:{library:"sap.ui.fl",properties:{data:{type:"object"},name:{type:"string",defaultValue:"$sap.ui.fl.ManagedObjectModel"}},associations:{object:{type:"sap.ui.core.Element"}}},constructor:function(...o){e.apply(this,o);this._oManagedObjectModel=new t(e.getElementById(this.getObject()),this.getData());["data","name","object"].forEach(function(e){this[`set${a(e)}`]=function(){throw new Error(`sap.ui.fl.util.ManagedObjectModel: Can't change the value of \`${e}\` after the object is `+"initialized. Please recreate the object with correct values in the constructor.")}},this)}});o.prototype.setParent=function(...t){const[a]=t;const o=this.getParent();if(o){o.setModel(null,this.getName())}if(a){a.setModel(this._oManagedObjectModel,this.getName())}e.prototype.setParent.apply(this,t)};o.prototype.exit=function(){this._oManagedObjectModel.destroy()};return o});
/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/variants/VariantModel", ["sap/base/util/restricted/_difference","sap/base/util/restricted/_isEqual","sap/base/util/restricted/_omit","sap/base/util/Deferred","sap/base/util/isEmptyObject","sap/base/util/merge","sap/m/library","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/Lib","sap/ui/fl/apply/_internal/controlVariants/URLHandler","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/flexState/FlexObjectState","sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/fl/initial/_internal/Settings","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/ui/fl/Utils","sap/ui/model/json/JSONModel","sap/ui/model/BindingMode"],function(e,t,n,a,r,i,s,o,c,l,p,f,u,h,d,g,m,v,y,R,b,V){"use strict";var C={};const{SharingMode:x}=s;function U(e,t){C[e]=t}function S(e){var t=m.getInstanceOrUndef();if(t&&!t.getIsVariantPersonalizationEnabled()){e.remove=false;e.rename=false;e.change=false}}function I(e){var t=m.getInstanceOrUndef();var n=t&&(t.getIsKeyUser()||!t.getUserId()||t.getIsPublicFlVariantEnabled()&&t.getUserId().toUpperCase()===e.instance.getSupportInformation().user.toUpperCase());e.remove=n;e.rename=n;e.change=n}function D(e,t,n){var a=n?y.getCurrentLayer():v.USER;if(e.layer===a&&e.key!==t){return true}return false}function F(){var e=R.getUshellContainer();if(e){var t=[R.getUShellService("UserInfo"),R.getUShellService("URLParsing"),R.getUShellService("Navigation"),R.getUShellService("ShellNavigationInternal")];return Promise.all(t).then(function(e){U("UserInfo",e[0]);U("URLParsing",e[1]);U("Navigation",e[2]);U("ShellNavigationInternal",e[3])}).catch(function(e){throw new Error(`Error getting service from Unified Shell: ${e}`)})}return undefined}function E(e,t){return i({},e.find(function(e){return e.key===t}))}function M(e){const t=h.getInitialUIChanges({vmReference:e.vmReference,reference:e.reference});const n=t.reduce((t,n)=>{const a=n.getSelector();const r=o.bySelector(a,e.appComponent);if(r&&R.indexOfObject(t,{selector:r})===-1){t.push({selector:r})}return t},[]);return n.length?d.waitForFlexObjectsToBeApplied(n,e.appComponent):Promise.resolve()}var O=b.extend("sap.ui.fl.variants.VariantModel",{constructor:function(e,t){this.pSequentialImportCompleted=Promise.resolve();b.apply(this,[e]);this.sharing={PRIVATE:x.Private,PUBLIC:x.Public};this.sFlexReference=g.getFlexReferenceForControl(t.appComponent);this.oAppComponent=t.appComponent;this._oResourceBundle=c.getResourceBundleFor("sap.ui.fl");this.fnUpdateListener=this.updateData.bind(this);this.oDataSelector=h.getVariantManagementMap();this.oDataSelector.addUpdateListener(this.fnUpdateListener);this.updateData();const n=d.getLiveDependencyMap(this.sFlexReference);h.getInitialUIChanges({reference:this.sFlexReference},this.oAppComponent.getId(),this.sFlexReference).forEach(e=>{u.addChangeAndUpdateDependencies(e,this.oAppComponent.getId(),n)});this.setDefaultBindingMode(V.OneWay)}});O.prototype.updateData=function(){const e=this.oDataSelector.get({reference:this.sFlexReference});const t={...this.getData()};Object.entries(e).forEach(e=>{const n=e[0];const a={...e[1]};t[n]||={};t[n].variants=a.variants.map(function(e){const a=(t[n].variants||[]).find(function(t){return t.key===e.key});return{...a||{},...e}});const r=t[n].currentVariant;const i=p.getVariantManagementControlByVMReference(n,this.oAppComponent);if(i&&i.getUpdateVariantInURL()&&r&&r!==a.currentVariant){l.updateVariantInURL({vmReference:n,newVReference:a.currentVariant,model:this})}t[n].currentVariant=a.currentVariant;t[n].defaultVariant=a.defaultVariant;t[n].modified=a.modified});this.setData(t);this.refresh(true)};O.prototype.invalidateMap=function(){this.oDataSelector.checkUpdate({reference:this.sFlexReference})};O.prototype.initialize=function(){return Promise.all([m.getInstance(),F()]).then(function(){l.initialize({model:this})}.bind(this))};O.prototype.getCurrentVariantReference=function(e){return this.oData[e].currentVariant};O.prototype.getVariantManagementReference=function(e){var t="";var n=-1;Object.keys(this.oData).some(function(a){return this.oData[a].variants.some(function(r,i){if(r.key===e){t=a;n=i;return true}return false})}.bind(this));return{variantManagementReference:t,variantIndex:n}};O.prototype.getVariant=function(e,t){var n=t||this.getVariantManagementReference(e).variantManagementReference;return E(this.oData[n].variants,e)};O.prototype.setVariantProperties=function(e,t){var n=this.getData();var a=this.getVariant(t.variantReference,e).instance;const r=p.getVariantManagementControlByVMReference(e,this.oAppComponent);var i={};switch(t.changeType){case"setTitle":a.setName(t.title,true);break;case"setFavorite":i.favorite=t.favorite;a.setFavorite(t.favorite);break;case"setExecuteOnSelect":i.executeOnSelect=t.executeOnSelect;a.setExecuteOnSelection(t.executeOnSelect);break;case"setVisible":i.visible=t.visible;i.createdByReset=false;a.setVisible(t.visible);break;case"setContexts":i.contexts=t.contexts;a.setContexts(t.contexts);break;case"setDefault":i.defaultVariant=t.defaultVariant;var s=l.getStoredHashParams({model:this});if(s&&r.getUpdateVariantInURL()){if(n[e].defaultVariant!==n[e].currentVariant&&s.indexOf(n[e].currentVariant)===-1){l.update({parameters:s.concat(n[e].currentVariant),updateURL:!this._bDesignTimeMode,updateHashEntry:true,model:this})}else if(n[e].defaultVariant===n[e].currentVariant&&s.indexOf(n[e].currentVariant)>-1){s.splice(s.indexOf(n[e].currentVariant),1);l.update({parameters:s,updateURL:!this._bDesignTimeMode,updateHashEntry:true,model:this})}}break;default:break}return i};O.prototype._ensureStandardVariantExists=function(e){var t=this.getData();var n=t[e]||{};if(!t[e]||r(n)){var a=f.createFlVariant({id:e,variantManagementReference:e,variantName:this._oResourceBundle.getText("STANDARD_VARIANT_TITLE"),user:p.DEFAULT_AUTHOR,layer:v.BASE,reference:this.sFlexReference});h.addRuntimeSteadyObject(this.sFlexReference,this.oAppComponent.getId(),a);this._aCreatedStandardVariantsFor||=[];this._aCreatedStandardVariantsFor.push(e)}};O.prototype.setModelPropertiesForControl=function(e,t,n){this.oData[e].showFavorites=true;var a=this._bDesignTimeMode;if(a!==t){this._bDesignTimeMode=t;if(t){l.clearAllVariantURLParameters({model:this})}else if(a&&n.getUpdateVariantInURL()){l.update({parameters:l.getStoredHashParams({model:this}),updateURL:true,updateHashEntry:false,model:this})}}if(t&&n.getEditable()){this.oData[e].variantsEditable=false;this.oData[e].variants.forEach(function(n){n.rename=true;n.change=true;n.sharing=this.sharing.PUBLIC;n.remove=D(n,e,t)}.bind(this))}else if(n.getEditable()){this.oData[e].variantsEditable=true;this.oData[e].variants.forEach(function(n){n.remove=D(n,e,t);switch(n.layer){case v.USER:n.rename=true;n.change=true;n.sharing=this.sharing.PRIVATE;S(n);break;case v.PUBLIC:n.sharing=this.sharing.PUBLIC;I(n);break;default:n.rename=false;n.change=false;n.sharing=this.sharing.PUBLIC}}.bind(this))}else{this.oData[e].variantsEditable=false;this.oData[e].variants.forEach(function(e){e.remove=false;e.rename=false;e.change=false})}};O.prototype.getLocalId=function(e,t){return o.getSelector(e,t).id};function L(e,t){this.oData[t].variants.forEach(function(n){const a=n.title&&n.title.match(/{(\w+)>(\w.+)}/);if(a){const[,r,i]=a;const s=e.getModel(r);if(s){const e=s.getResourceBundle().getText(i);const t={reference:this.sFlexReference,changeType:"setTitle",layer:n.layer,fileType:"ctrl_variant_change",variantId:n.key};const a=f.createVariantChange(t);a.setText("title",e,"XFLD");n.instance.setName(e,true);h.addRuntimeSteadyObject(this.sFlexReference,this.oAppComponent.getId(),a)}else{e.attachEventOnce("modelContextChange",L.bind(this,e,t))}}}.bind(this))}O.prototype.registerToModel=function(e){const t=e.getVariantManagementReference();this._ensureStandardVariantExists(t);e.setShowExecuteOnSelection(false);L.call(this,e,t);this.setModelPropertiesForControl(t,false,e);if(e.getUpdateVariantInURL()){l.registerControl({vmReference:t,updateURL:true,model:this});l.handleModelContextChange({model:this,vmControl:e,appComponent:this.oAppComponent})}const n={appComponent:this.oAppComponent,reference:this.sFlexReference,vmReference:t};h.setVariantSwitchPromise(this.sFlexReference,t,M(n))};O.prototype.getCurrentControlVariantIds=function(){return Object.keys(this.oData||{}).reduce(function(e,t){return e.concat([this.oData[t].currentVariant])}.bind(this),[])};O.prototype.getVariantManagementControlIds=function(){var e;return Object.keys(this.oData||{}).reduce(function(t,n){if(this.oAppComponent.byId(n)){e=this.oAppComponent.createId(n)}else{e=n}t.push(e);return t}.bind(this),[])};O.prototype.destroy=function(){const e=this.oDataSelector.get({reference:this.sFlexReference});const t=Object.entries(e).map(([e,t])=>{const n=h.getVariant({vmReference:e,vReference:t.currentVariant,reference:this.sFlexReference});return n.controlChanges}).flat();const n=d.getLiveDependencyMap(this.sFlexReference);const r=[];t.forEach(e=>{if(!e.isPersisted()){r.push(e)}else{u.removeChangeFromMap(n,e.getId());u.removeChangeFromDependencies(n,e.getId())}});this.oDataSelector.removeUpdateListener(this.fnUpdateListener);const i=[];(this._aCreatedStandardVariantsFor||[]).forEach(t=>{if(e[t]?.variants.length>1||e[t]?.variants[0].controlChanges.length){i.push(e[t].variants[0].instance)}});if(i.length){h.addRuntimeOnlyFlexObjects(this.sFlexReference,this.oAppComponent.getId(),i)}h.clearRuntimeSteadyObjects(this.sFlexReference,this.oAppComponent.getId());h.resetCurrentVariantReference(this.sFlexReference);b.prototype.destroy.apply(this);this.oDestroyPromise=new a;if(r.length){sap.ui.require(["sap/ui/fl/write/_internal/flexState/FlexObjectManager"],e=>{e.deleteFlexObjects({reference:this.sFlexReference,flexObjects:r,componentId:this.oAppComponent.getId()});this.oDestroyPromise.resolve()})}else{this.oDestroyPromise.resolve()}};O.prototype.getUShellService=function(e){return R.getUshellContainer()&&C[e]};return O});
sap.ui.require.preload({
	"sap/ui/fl/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ui.fl","type":"library","embeds":["support/apps/contentbrowser","variants/context"],"applicationVersion":{"version":"1.144.0"},"title":"SAPUI5 library with sap.ui.fl controls.","description":"SAPUI5 library with sap.ui.fl controls.","ach":"CA-UI5-FL","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_hcb"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.144","libs":{"sap.ui.core":{"minVersion":"1.144.0"},"sap.m":{"minVersion":"1.144.0"}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cnr","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","mk","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":["sap.ui.fl.variants.VariantManagement","sap.ui.fl.util.IFrame"],"elements":[],"types":[],"interfaces":[]}}}}'
},"sap/ui/fl/library-preload");
sap.ui.loader.config({bundlesUI5:{
"sap/ui/fl/library-preload-apply.js":['sap/ui/fl/apply/_internal/changes/descriptor/Applier.js','sap/ui/fl/apply/_internal/changes/descriptor/ApplyUtil.js','sap/ui/fl/apply/_internal/changes/descriptor/RawApplier.js','sap/ui/fl/apply/_internal/changes/descriptor/Registration.js','sap/ui/fl/apply/_internal/changes/descriptor/RegistrationBuild.js','sap/ui/fl/apply/_internal/changes/descriptor/app/AddAnnotationsToOData.js','sap/ui/fl/apply/_internal/changes/descriptor/app/AddNewDataSource.js','sap/ui/fl/apply/_internal/changes/descriptor/app/AddNewInbound.js','sap/ui/fl/apply/_internal/changes/descriptor/app/AddNewOutbound.js','sap/ui/fl/apply/_internal/changes/descriptor/app/AddTechnicalAttributes.js','sap/ui/fl/apply/_internal/changes/descriptor/app/ChangeDataSource.js','sap/ui/fl/apply/_internal/changes/descriptor/app/ChangeInbound.js','sap/ui/fl/apply/_internal/changes/descriptor/app/ChangeOutbound.js','sap/ui/fl/apply/_internal/changes/descriptor/app/RemoveAllInboundsExceptOne.js','sap/ui/fl/apply/_internal/changes/descriptor/app/SetAch.js','sap/ui/fl/apply/_internal/changes/descriptor/app/SetDescription.js','sap/ui/fl/apply/_internal/changes/descriptor/app/SetInbounds.js','sap/ui/fl/apply/_internal/changes/descriptor/app/SetTitle.js','sap/ui/fl/apply/_internal/changes/descriptor/fiori/SetAbstract.js','sap/ui/fl/apply/_internal/changes/descriptor/fiori/SetCloudDevAdaptationStatus.js','sap/ui/fl/apply/_internal/changes/descriptor/fiori/SetRegistrationIds.js','sap/ui/fl/apply/_internal/changes/descriptor/ovp/AddNewCard.js','sap/ui/fl/apply/_internal/changes/descriptor/ovp/ChangeCard.js','sap/ui/fl/apply/_internal/changes/descriptor/ovp/DeleteCard.js','sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddComponentUsages.js','sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddLibrary.js','sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddNewModel.js','sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddNewModelEnhanceWith.js','sap/ui/fl/apply/_internal/changes/descriptor/ui5/ChangeModel.js','sap/ui/fl/apply/_internal/changes/descriptor/ui5/SetFlexExtensionPointEnabled.js','sap/ui/fl/apply/_internal/changes/descriptor/ui5/SetMinUI5Version.js','sap/ui/fl/apply/_internal/connectors/ObjectStorageConnector.js','sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils.js','sap/ui/fl/apply/_internal/extensionPoint/Processor.js','sap/ui/fl/apply/_internal/flexObjects/CompVariantRevertData.js','sap/ui/fl/apply/_internal/flexObjects/RevertData.js','sap/ui/fl/apply/_internal/flexState/UI2Personalization/UI2PersonalizationState.js','sap/ui/fl/apply/_internal/flexState/changes/ExtensionPointState.js','sap/ui/fl/apply/_internal/flexState/compVariants/CompVariantManagementState.js','sap/ui/fl/apply/_internal/flexState/compVariants/Utils.js','sap/ui/fl/apply/_internal/flexState/compVariants/applyChangesOnVariant.js','sap/ui/fl/apply/api/AnnotationChangeHandlerAPI.js','sap/ui/fl/apply/api/DelegateMediatorAPI.js','sap/ui/fl/apply/api/ExtensionPointRegistryAPI.js','sap/ui/fl/apply/api/FlexRuntimeInfoAPI.js','sap/ui/fl/apply/api/SmartVariantManagementApplyAPI.js','sap/ui/fl/apply/api/UI2PersonalizationApplyAPI.js','sap/ui/fl/changeHandler/AddIFrame.js','sap/ui/fl/changeHandler/BaseAddViaDelegate.js','sap/ui/fl/changeHandler/BaseRename.js','sap/ui/fl/changeHandler/UpdateIFrame.js','sap/ui/fl/changeHandler/common/ChangeCategories.js','sap/ui/fl/changeHandler/common/createIFrame.js','sap/ui/fl/changeHandler/common/getTargetAggregationIndex.js','sap/ui/fl/transport/TransportDialog.js','sap/ui/fl/transport/TransportSelection.js','sap/ui/fl/util/DescriptorChangeCheck.js','sap/ui/fl/util/IFrame.flexibility.js','sap/ui/fl/util/changePropertyValueByPath.js','sap/ui/fl/variants/VariantManagement.js','sap/ui/fl/write/_internal/connectors/Utils.js','sap/ui/fl/write/_internal/transport/TransportDialog.js','sap/ui/fl/write/_internal/transport/TransportSelection.js','sap/ui/fl/write/_internal/transport/Transports.js'],
"sap/ui/fl/library-preload-write.js":['sap/ui/fl/FakeLrepConnector.js','sap/ui/fl/FakeLrepConnectorLocalStorage.js','sap/ui/fl/FakeLrepConnectorSessionStorage.js','sap/ui/fl/FakeLrepLocalStorage.js','sap/ui/fl/descriptorRelated/Utils.js','sap/ui/fl/descriptorRelated/api/DescriptorChange.js','sap/ui/fl/descriptorRelated/api/DescriptorChangeFactory.js','sap/ui/fl/descriptorRelated/api/DescriptorInlineChangeFactory.js','sap/ui/fl/descriptorRelated/api/DescriptorVariantFactory.js','sap/ui/fl/variants/VariantManager.js','sap/ui/fl/variants/context/Component.js','sap/ui/fl/variants/context/controller/ContextVisibility.controller.js','sap/ui/fl/variants/context/view/ContextVisibility.view.xml','sap/ui/fl/variants/context/view/fragment/AddContextDialog.fragment.xml','sap/ui/fl/write/_internal/SaveAs.js','sap/ui/fl/write/_internal/Storage.js','sap/ui/fl/write/_internal/Versions.js','sap/ui/fl/write/_internal/appVariant/AppVariant.js','sap/ui/fl/write/_internal/appVariant/AppVariantFactory.js','sap/ui/fl/write/_internal/appVariant/AppVariantInlineChange.js','sap/ui/fl/write/_internal/appVariant/AppVariantInlineChangeFactory.js','sap/ui/fl/write/_internal/condenser/Condenser.js','sap/ui/fl/write/_internal/condenser/UIReconstruction.js','sap/ui/fl/write/_internal/condenser/Utils.js','sap/ui/fl/write/_internal/condenser/classifications/Create.js','sap/ui/fl/write/_internal/condenser/classifications/Destroy.js','sap/ui/fl/write/_internal/condenser/classifications/LastOneWins.js','sap/ui/fl/write/_internal/condenser/classifications/Move.js','sap/ui/fl/write/_internal/condenser/classifications/Reverse.js','sap/ui/fl/write/_internal/condenser/classifications/Update.js','sap/ui/fl/write/_internal/connectors/BackendConnector.js','sap/ui/fl/write/_internal/connectors/BtpServiceConnector.js','sap/ui/fl/write/_internal/connectors/JsObjectConnector.js','sap/ui/fl/write/_internal/connectors/KeyUserConnector.js','sap/ui/fl/write/_internal/connectors/LocalStorageConnector.js','sap/ui/fl/write/_internal/connectors/LrepConnector.js','sap/ui/fl/write/_internal/connectors/NeoLrepConnector.js','sap/ui/fl/write/_internal/connectors/ObjectPathConnector.js','sap/ui/fl/write/_internal/connectors/ObjectStorageConnector.js','sap/ui/fl/write/_internal/connectors/PersonalizationConnector.js','sap/ui/fl/write/_internal/connectors/SessionStorageConnector.js','sap/ui/fl/write/_internal/controlVariants/ControlVariantWriteUtils.js','sap/ui/fl/write/_internal/delegates/ODataV2ReadDelegate.js','sap/ui/fl/write/_internal/delegates/ODataV4ReadDelegate.js','sap/ui/fl/write/_internal/extensionPoint/Processor.js','sap/ui/fl/write/_internal/fieldExtensibility/ABAPAccess.js','sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariant.js','sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariantFactory.js','sap/ui/fl/write/_internal/fieldExtensibility/MultiTenantABAPExtensibilityVariant.js','sap/ui/fl/write/_internal/fieldExtensibility/ServiceValidation.js','sap/ui/fl/write/_internal/fieldExtensibility/SingleTenantABAPExtensibilityVariant.js','sap/ui/fl/write/_internal/fieldExtensibility/UriParser.js','sap/ui/fl/write/_internal/fieldExtensibility/Utils.js','sap/ui/fl/write/_internal/flexState/FlexObjectManager.js','sap/ui/fl/write/_internal/flexState/UI2Personalization/UI2PersonalizationState.js','sap/ui/fl/write/_internal/flexState/changes/UIChangeManager.js','sap/ui/fl/write/_internal/flexState/compVariants/CompVariantManager.js','sap/ui/fl/write/_internal/init.js','sap/ui/fl/write/api/Adaptations.js','sap/ui/fl/write/api/AppVariantWriteAPI.js','sap/ui/fl/write/api/BusinessNetworkAPI.js','sap/ui/fl/write/api/ChangesWriteAPI.js','sap/ui/fl/write/api/ContextBasedAdaptationsAPI.js','sap/ui/fl/write/api/ContextSharingAPI.js','sap/ui/fl/write/api/ControlPersonalizationWriteAPI.js','sap/ui/fl/write/api/FeaturesAPI.js','sap/ui/fl/write/api/FieldExtensibility.js','sap/ui/fl/write/api/LocalResetAPI.js','sap/ui/fl/write/api/PersistenceWriteAPI.js','sap/ui/fl/write/api/ReloadInfoAPI.js','sap/ui/fl/write/api/SACIntegrationUpdateVariant.js','sap/ui/fl/write/api/SmartBusinessWriteAPI.js','sap/ui/fl/write/api/SmartVariantManagementWriteAPI.js','sap/ui/fl/write/api/TranslationAPI.js','sap/ui/fl/write/api/UI2PersonalizationWriteAPI.js','sap/ui/fl/write/api/VersionsAPI.js','sap/ui/fl/write/api/connectors/FileListBaseConnector.js','sap/ui/fl/write/api/connectors/ObjectStorageConnector.js','sap/ui/fl/write/connectors/BaseConnector.js']
}});
//# sourceMappingURL=library-preload.js.map
