/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/util/DescriptorChangeCheck"],function(t){"use strict";const n=["uri"];const a=[...n,"type","settings","customType"];const e={type:"^(OData|ODataAnnotation|INA|XML|JSON|FHIR|WebSocket|http)$",customType:"^false$"};const o={uri:typeof"string",type:typeof"string",settings:typeof{},dataSourceCustom:typeof false,annotations:typeof[]};function r(t,n){return Object.keys(t).includes(n)}function s(t){return t.type||"OData"}function i(t,n){const[a]=Object.entries(t).find(([,t])=>s(t)===n)||[];return a}function c(t,n,a){a.forEach(function(a){if(!r(t,a)){throw new Error(`Referenced annotation '${a}' in the annotation array of data source '${n}' does not exist in the manifest.`)}})}function u(t,n){const a=i(n,"OData");const e=i(n,"ODataAnnotation");if(!(a&&e)){throw new Error("When adding two data sources it is only allwoed to add a data source with type 'OData' and the other one must be of type 'ODataAnnotation'.")}if(!n[a]?.settings?.annotations?.includes(e)){throw new Error(`Data source '${a}' does not include annotation '${e}' under 'settings/annotations' array.`)}const o=n[a].settings.annotations.filter(function(t){return t!==e});c(t,a,o)}function p(t,n){const a=i(n,"OData");if(n[a].settings?.annotations){c(t,a,n[a].settings.annotations)}}function f(t,n,a){a.forEach(function(a){if(r(t,a)){throw new Error(`There is already a dataSource '${a}' existing in the manifest.`)}y(n,a)});if(a.length===1){p(t,n)}if(a.length===2){u(t,n)}}function y(t,n){const a=s(t[n]);if(t[n].settings?.annotations){if(a!=="OData"){throw new Error(`Data source '${n}' which is of type '${a}' contains the annotations array. Only data sources with type 'OData' could contain the 'settings/annotations' array.`)}if(!Array.isArray(t[n].settings.annotations)){throw new Error("Property 'annotations' must be of type 'array'.")}}}const d={applyChange(r,s){r["sap.app"].dataSources||={};const i=s.getContent();const c=t.getAndCheckContentObject(i,{sKey:"dataSource",sChangeType:s.getChangeType(),iMaxNumberOfKeys:2,aMandatoryProperties:n,aSupportedProperties:a,oSupportedPropertyPattern:e,oSupportedPropertyTypes:o});c.forEach(function(n){t.checkIdNamespaceCompliance(n,s)});f(r["sap.app"].dataSources,i.dataSource,c);Object.assign(r["sap.app"].dataSources,i.dataSource);return r}};return d});
//# sourceMappingURL=AddNewDataSource.js.map