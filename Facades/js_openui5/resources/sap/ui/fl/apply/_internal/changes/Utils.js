/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/apply/_internal/changeHandlers/ChangeHandlerRegistration","sap/ui/fl/apply/_internal/changeHandlers/ChangeHandlerStorage","sap/ui/fl/apply/_internal/changes/descriptor/ApplyStrategyFactory","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/flexObjects/AnnotationChange","sap/ui/fl/apply/_internal/flexObjects/AppDescriptorChange","sap/ui/fl/apply/_internal/flexObjects/VariantChange","sap/ui/fl/apply/_internal/flexObjects/VariantManagementChange","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/Utils"],function(e,t,n,a,r,l,o,i,c,s){"use strict";function f(e,t){if(t||e.hasApplyProcessStarted()){return false}return true}function p(e){return e.flexObject instanceof o||e.flexObject instanceof i}const g={getControlIfTemplateAffected(e,t,n){const a=n.modifier;const r={originalControl:t};const l=e.getOriginalSelector();if(e.getContent().boundAggregation&&l){r.control=a.bySelector(l,n.appComponent,n.view);r.controlType=a.getControlType(r.control);r.bTemplateAffected=true}else{r.control=t;r.controlType=a.getControlType(t);r.bTemplateAffected=false}return r},async getChangeHandler(a){const o=a.changeType||a.flexObject?.getChangeType();if(a.flexObject instanceof l||a.appDescriptorChange){const e=a.strategy||await n.getRuntimeStrategy();try{const t=await e.registry();return await(t[o]?.())}catch(t){e.handleError(t)}}else if(a.flexObject instanceof r||a.annotationChange){return t.getAnnotationChangeHandler({changeType:o})}else if(p(a)){return c.getChangeInformationProvider(a.flexObject)}else if(a.control){const n=await a.modifier.getLibraryName(a.control);await e.waitForChangeHandlerRegistration(n);const r=a.layer||a.flexObject?.getLayer();return t.getChangeHandler(o,a.controlType,a.control,a.modifier,r)}return undefined},checkIfDependencyIsStillValid(e,t,n,r){const l=s.getChangeFromChangesMap(n.mChanges,r);if(!l){return false}const o=t.bySelector(l.getSelector(),e);if(!o){return true}const i=a.hasChangeApplyFinishedCustomData(o,l,t);return f(l,i)},isChangeInView(e,t){const n=e.modifier;const a=e.appComponent;const r=t.getSelector();if(!r){return false}if(r.viewSelector){const t=n.getControlIdBySelector(r.viewSelector,a);return t===e.viewId}const l=r.id;if(l){let n;if(t.getSelector().idIsLocal){if(a){n=a.getLocalId(e.viewId)}}else{n=e.viewId}let r=0;let o;do{r=l.indexOf("--",r);o=l.slice(0,r);r++}while(o!==n&&r>0);return o===n}return false}};return g});
//# sourceMappingURL=Utils.js.map