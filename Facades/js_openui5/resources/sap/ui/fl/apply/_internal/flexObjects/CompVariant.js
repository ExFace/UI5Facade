/*!
 * OpenUI5
 * (c) Copyright 2026 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/restricted/_pick","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexObjects/Variant","sap/ui/fl/initial/_internal/Settings","sap/ui/fl/LayerUtils","sap/ui/fl/Layer","sap/ui/fl/Utils"],function(t,e,n,i,r,a,s){"use strict";var o=n.extend("sap.ui.fl.apply._internal.flexObjects.CompVariant",{metadata:{properties:{persisted:{type:"boolean",defaultValue:true},persistencyKey:{type:"string"}},aggregations:{revertData:{type:"sap.ui.base.ManagedObject",multiple:true,singularName:"revertData",defaultValue:[]}}},constructor:function(...t){const[e]=t;n.apply(this,t);this.setFileType("variant");if(!e.executeOnSelection){this.setExecuteOnSelection(!!(e.content?.executeOnSelect||e.content?.executeOnSelection))}const i=this.getVariantId()===o.STANDARD_VARIANT_ID||!!this.getContent()?.standardvariant;if(i){this.setFavorite(true);this.setStandardVariant(true)}else if(e.favorite!==undefined){this.setFavorite(!!e.favorite)}else if(e.layer===a.VENDOR||e.layer===a.CUSTOMER_BASE){this.setFavorite(true)}}});o.STANDARD_VARIANT_ID="*standard*";o.getMappingInfo=function(){return{...n.getMappingInfo(),persistencyKey:"selector.persistencyKey",standardVariant:"standardVariant",variantId:"variantId"}};o.prototype.getMappingInfo=function(){return o.getMappingInfo()};function p(t){var e=i.getInstanceOrUndef();var n=e?.getUserId();return!n||!t||n.toUpperCase()===t.toUpperCase()}function u(t,e,n){if(e){return t===e}else if(t===a.USER){return true}const s=i.getInstanceOrUndef();if(r.isSapUiLayerParameterProvided()){e=r.getCurrentLayer()}else{e||=s.getIsPublicLayerAvailable()?a.PUBLIC:a.CUSTOMER}const o=e!==a.PUBLIC||s.getIsVariantSharingEnabled();const u=t===e;const c=s.getIsKeyUser()||p(n)&&o;return u&&c}function c(t){return!t||s.getCurrentLanguage()===t}function l(t,e){var n=i.getInstanceOrUndef();if(!n){return true}if(!t||!e){return true}var r=n.getSystem();var a=n.getClient();return r===t&&e===a}o.prototype.getPackage=function(){return this.getFlexObjectMetadata().packageName};o.prototype.isVariant=function(){return true};o.prototype.isRenameEnabled=function(t){return!this.getStandardVariant()&&this.isEditEnabled(t)&&(!this.isTranslationEnabled()||c(this.getSupportInformation().originalLanguage))};o.prototype.isEditEnabled=function(t){var e=t&&r.isDeveloperLayer(t);var n=l(this.getSupportInformation().sourceSystem,this.getSupportInformation().sourceClient);var i=u(this.getLayer(),t,this.getOwnerId());return e||n&&i};o.prototype.isDeleteEnabled=function(t){var e=l(this.getSupportInformation().sourceSystem,this.getSupportInformation().sourceClient);return e&&u(this.getLayer(),t,this.getOwnerId())&&!this.getStandardVariant()};o.prototype.isTranslationEnabled=function(){return!r.isOverLayer(this.getLayer(),a.CUSTOMER)};o.prototype.storeFavorite=function(t){if(t!==this.getFavorite()){this.setState(e.LifecycleState.UPDATED);this.setFavorite(t)}};o.prototype.storeVisible=function(t){if(t!==this.getVisible()){this.setState(e.LifecycleState.UPDATED);this.setVisible(t)}};o.prototype.getOwnerId=function(){return this.getSupportInformation().user||""};o.prototype.storeContent=function(t){this.setContent(t)};o.prototype.storeExecuteOnSelection=function(t){if(t!==this.getExecuteOnSelection()){this.setState(e.LifecycleState.UPDATED);this.setExecuteOnSelection(t)}};o.prototype.storeName=function(t){this.setName(t)};o.prototype.storeContexts=function(t){this.setContexts(t);this.setState(e.LifecycleState.UPDATED)};o.prototype.cloneFileContentWithNewId=function(...t){var e=n.prototype.cloneFileContentWithNewId.apply(this,t);e.variantId=e.fileName;return e};return o});
//# sourceMappingURL=CompVariant.js.map