{"version":3,"file":"VariantManager.js","names":["sap","ui","define","_difference","merge","ObjectPath","JsControlTreeModifier","Element","Applier","Reverter","FlexObjectFactory","States","VariantManagementState","FlexObjectState","ControlVariantApplyAPI","ControlVariantWriteUtils","UIChangeManager","FlexObjectManager","ContextBasedAdaptationsAPI","Layer","Utils","VariantManager","getVariantModel","oControl","oAppComponent","getAppComponentForControl","getModel","getVariantModelName","async","eraseDirtyChanges","mPropertyBag","aVariantDirtyChanges","model","_getDirtyChangesFromVariantChanges","changes","reverse","revert","revertMultipleChanges","appComponent","modifier","reference","sFlexReference","deleteFlexObjects","flexObjects","executeAfterSwitch","fnCallback","oModel","sVMReference","_oVariantSwitchPromises","catch","then","setVariantSwitchPromise","handleDirtyChanges","oFlexController","aDirtyChanges","sVariantManagementReference","oVariantModel","_bDesignTimeMode","oResponse","saveSequenceOfDirtyChanges","oVariantFlexObject","response","find","oFlexObject","fileType","oAffectedVariant","oData","variants","oVariant","key","fileName","oSupportInformation","instance","getSupportInformation","user","support","setSupportInformation","invalidateMap","getAdaptationId","sLayer","mContextBasedAdaptationBag","layer","control","bHasAdaptationsModel","hasAdaptationsModel","getDisplayedAdaptationId","handleSelectVariant","oEvent","mParameters","mVariantProperties","vmReference","bVariantSwitch","bOldVariantWasModified","get","sTargetVReference","sSourceVReference","currentVariant","updateCurrentVariant","variantManagementReference","newVariantReference","internallyCalled","aControlChanges","getControlChangesForVariant","vReference","callVariantSwitchListeners","bind","getParameters","handleManageEvent","getData","aConfigurationChangesContent","variantsToBeDeleted","aVariantsToBeDeleted","_collectModelChanges","USER","length","some","oChange","visible","variantReference","getCurrentVariantReference","forEach","oChangeProperties","aNewVariantChanges","addVariantChanges","aVariantDeletionChanges","map","sVariantKey","getVariant","deleteVariant","flat","aChanges","filter","getState","LifecycleState","NEW","aLayers","Object","values","sCurrentLayer","aChangesOnLayer","getLayer","oChangePersistence","saveDirtyChanges","handleSaveEvent","oVariantManagementControl","getLocalId","getId","aNewVariantDirtyChanges","sSourceVariantReference","aSourceVariantChanges","overwrite","PUBLIC","setLayer","sVariantLayer","public","sVariantChangeLayer","sNewVariantReference","createDefaultFileName","title","name","contexts","sourceVariantReference","generator","additionalVariantChanges","adaptationId","executeOnSelection","execute","oBaseChangeProperties","content","def","mPropertyBagSetDefault","changeType","defaultVariant","selector","getSelector","push","createVariantManagementChange","aCopiedVariantDirtyChanges","copyVariant","addAndApplyChangesOnVariant","aAddedChanges","addDirtyChanges","reduce","oPreviousPromise","getElementById","getControlIdBySelector","oReturn","applyChangeOnControl","view","getViewForControl","success","oException","error","Error","Promise","resolve","eraseDirtyChangesOnVariant","sVariantReference","aSourceVariantDirtyChanges","oDuplicateVariantData","_duplicateVariant","rename","change","remove","sharing","PRIVATE","setFavorite","variantId","favorite","createVariantChange","addDirtyFlexObjects","concat","controlChanges","scenario","removeVariant","aChangesToBeDeleted","getDirtyFlexObjects","getVariantReference","variant","component","addVariantChange","aChangePropertyMaps","mProperties","deleteVariantChange","setVariantProperties","mAdditionalChangeContent","mNewChangeData","undefined","setContent","setText","manageVariants","sClass","oContextSharingComponentPromise","attachEventOnce","fnManageClickRta","openManagementDialog"],"sources":["VariantManager-dbg.js"],"mappings":"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","ignoreList":[]}